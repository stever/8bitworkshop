var Aa=Object.create;var xs=Object.defineProperty;var ka=Object.getOwnPropertyDescriptor;var Da=Object.getOwnPropertyNames;var La=Object.getPrototypeOf,Pa=Object.prototype.hasOwnProperty;var Xr=(f=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(f,{get:(t,i)=>(typeof require!="undefined"?require:t)[i]}):f)(function(f){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+f+'" is not supported')});var Yr=(f,t)=>()=>(t||f((t={exports:{}}).exports,t),t.exports);var Ra=(f,t,i,u)=>{if(t&&typeof t=="object"||typeof t=="function")for(let d of Da(t))!Pa.call(f,d)&&d!==i&&xs(f,d,{get:()=>t[d],enumerable:!(u=ka(t,d))||u.enumerable});return f};var Ss=(f,t,i)=>(i=f!=null?Aa(La(f)):{},Ra(t||!f||!f.__esModule?xs(i,"default",{value:f,enumerable:!0}):i,f));var _s=Yr((ws,Ii)=>{(function(f){if(typeof ws=="object"&&typeof Ii!="undefined")Ii.exports=f();else if(typeof define=="function"&&define.amd)define([],f);else{var t;typeof window!="undefined"?t=window:typeof global!="undefined"?t=global:typeof self!="undefined"?t=self:t=this,t.localforage=f()}})(function(){var f,t,i;return function u(d,y,g){function C(W,se){if(!y[W]){if(!d[W]){var z=typeof Xr=="function"&&Xr;if(!se&&z)return z(W,!0);if(w)return w(W,!0);var q=new Error("Cannot find module '"+W+"'");throw q.code="MODULE_NOT_FOUND",q}var V=y[W]={exports:{}};d[W][0].call(V.exports,function(oe){var ie=d[W][1][oe];return C(ie||oe)},V,V.exports,u,d,y,g)}return y[W].exports}for(var w=typeof Xr=="function"&&Xr,N=0;N<g.length;N++)C(g[N]);return C}({1:[function(u,d,y){(function(g){"use strict";var C=g.MutationObserver||g.WebKitMutationObserver,w;if(C){var N=0,W=new C(oe),se=g.document.createTextNode("");W.observe(se,{characterData:!0}),w=function(){se.data=N=++N%2}}else if(!g.setImmediate&&typeof g.MessageChannel!="undefined"){var z=new g.MessageChannel;z.port1.onmessage=oe,w=function(){z.port2.postMessage(0)}}else"document"in g&&"onreadystatechange"in g.document.createElement("script")?w=function(){var Ae=g.document.createElement("script");Ae.onreadystatechange=function(){oe(),Ae.onreadystatechange=null,Ae.parentNode.removeChild(Ae),Ae=null},g.document.documentElement.appendChild(Ae)}:w=function(){setTimeout(oe,0)};var q,V=[];function oe(){q=!0;for(var Ae,Ke,Fe=V.length;Fe;){for(Ke=V,V=[],Ae=-1;++Ae<Fe;)Ke[Ae]();Fe=V.length}q=!1}d.exports=ie;function ie(Ae){V.push(Ae)===1&&!q&&w()}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(u,d,y){"use strict";var g=u(1);function C(){}var w={},N=["REJECTED"],W=["FULFILLED"],se=["PENDING"];d.exports=z;function z(T){if(typeof T!="function")throw new TypeError("resolver must be a function");this.state=se,this.queue=[],this.outcome=void 0,T!==C&&ie(this,T)}z.prototype.catch=function(T){return this.then(null,T)},z.prototype.then=function(T,M){if(typeof T!="function"&&this.state===W||typeof M!="function"&&this.state===N)return this;var Z=new this.constructor(C);if(this.state!==se){var de=this.state===W?T:M;V(Z,de,this.outcome)}else this.queue.push(new q(Z,T,M));return Z};function q(T,M,Z){this.promise=T,typeof M=="function"&&(this.onFulfilled=M,this.callFulfilled=this.otherCallFulfilled),typeof Z=="function"&&(this.onRejected=Z,this.callRejected=this.otherCallRejected)}q.prototype.callFulfilled=function(T){w.resolve(this.promise,T)},q.prototype.otherCallFulfilled=function(T){V(this.promise,this.onFulfilled,T)},q.prototype.callRejected=function(T){w.reject(this.promise,T)},q.prototype.otherCallRejected=function(T){V(this.promise,this.onRejected,T)};function V(T,M,Z){g(function(){var de;try{de=M(Z)}catch(Le){return w.reject(T,Le)}de===T?w.reject(T,new TypeError("Cannot resolve promise with itself")):w.resolve(T,de)})}w.resolve=function(T,M){var Z=Ae(oe,M);if(Z.status==="error")return w.reject(T,Z.value);var de=Z.value;if(de)ie(T,de);else{T.state=W,T.outcome=M;for(var Le=-1,Ce=T.queue.length;++Le<Ce;)T.queue[Le].callFulfilled(M)}return T},w.reject=function(T,M){T.state=N,T.outcome=M;for(var Z=-1,de=T.queue.length;++Z<de;)T.queue[Z].callRejected(M);return T};function oe(T){var M=T&&T.then;if(T&&(typeof T=="object"||typeof T=="function")&&typeof M=="function")return function(){M.apply(T,arguments)}}function ie(T,M){var Z=!1;function de(Je){Z||(Z=!0,w.reject(T,Je))}function Le(Je){Z||(Z=!0,w.resolve(T,Je))}function Ce(){M(Le,de)}var Ee=Ae(Ce);Ee.status==="error"&&de(Ee.value)}function Ae(T,M){var Z={};try{Z.value=T(M),Z.status="success"}catch(de){Z.status="error",Z.value=de}return Z}z.resolve=Ke;function Ke(T){return T instanceof this?T:w.resolve(new this(C),T)}z.reject=Fe;function Fe(T){var M=new this(C);return w.reject(M,T)}z.all=Se;function Se(T){var M=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Z=T.length,de=!1;if(!Z)return this.resolve([]);for(var Le=new Array(Z),Ce=0,Ee=-1,Je=new this(C);++Ee<Z;)et(T[Ee],Ee);return Je;function et(gt,wt){M.resolve(gt).then(Nt,function(vt){de||(de=!0,w.reject(Je,vt))});function Nt(vt){Le[wt]=vt,++Ce===Z&&!de&&(de=!0,w.resolve(Je,Le))}}}z.race=a;function a(T){var M=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Z=T.length,de=!1;if(!Z)return this.resolve([]);for(var Le=-1,Ce=new this(C);++Le<Z;)Ee(T[Le]);return Ce;function Ee(Je){M.resolve(Je).then(function(et){de||(de=!0,w.resolve(Ce,et))},function(et){de||(de=!0,w.reject(Ce,et))})}}},{1:1}],3:[function(u,d,y){(function(g){"use strict";typeof g.Promise!="function"&&(g.Promise=u(2))}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{2:2}],4:[function(u,d,y){"use strict";var g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h};function C(h,S){if(!(h instanceof S))throw new TypeError("Cannot call a class as a function")}function w(){try{if(typeof indexedDB!="undefined")return indexedDB;if(typeof webkitIndexedDB!="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!="undefined")return mozIndexedDB;if(typeof OIndexedDB!="undefined")return OIndexedDB;if(typeof msIndexedDB!="undefined")return msIndexedDB}catch(h){return}}var N=w();function W(){try{if(!N||!N.open)return!1;var h=typeof openDatabase!="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),S=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!h||S)&&typeof indexedDB!="undefined"&&typeof IDBKeyRange!="undefined"}catch(m){return!1}}function se(h,S){h=h||[],S=S||{};try{return new Blob(h,S)}catch(_){if(_.name!=="TypeError")throw _;for(var m=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,A=new m,k=0;k<h.length;k+=1)A.append(h[k]);return A.getBlob(S.type)}}typeof Promise=="undefined"&&u(3);var z=Promise;function q(h,S){S&&h.then(function(m){S(null,m)},function(m){S(m)})}function V(h,S,m){typeof S=="function"&&h.then(S),typeof m=="function"&&h.catch(m)}function oe(h){return typeof h!="string"&&(console.warn(h+" used as a key, but it is not a string."),h=String(h)),h}function ie(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var Ae="local-forage-detect-blob-support",Ke=void 0,Fe={},Se=Object.prototype.toString,a="readonly",T="readwrite";function M(h){for(var S=h.length,m=new ArrayBuffer(S),A=new Uint8Array(m),k=0;k<S;k++)A[k]=h.charCodeAt(k);return m}function Z(h){return new z(function(S){var m=h.transaction(Ae,T),A=se([""]);m.objectStore(Ae).put(A,"key"),m.onabort=function(k){k.preventDefault(),k.stopPropagation(),S(!1)},m.oncomplete=function(){var k=navigator.userAgent.match(/Chrome\/(\d+)/),_=navigator.userAgent.match(/Edge\//);S(_||!k||parseInt(k[1],10)>=43)}}).catch(function(){return!1})}function de(h){return typeof Ke=="boolean"?z.resolve(Ke):Z(h).then(function(S){return Ke=S,Ke})}function Le(h){var S=Fe[h.name],m={};m.promise=new z(function(A,k){m.resolve=A,m.reject=k}),S.deferredOperations.push(m),S.dbReady?S.dbReady=S.dbReady.then(function(){return m.promise}):S.dbReady=m.promise}function Ce(h){var S=Fe[h.name],m=S.deferredOperations.pop();if(m)return m.resolve(),m.promise}function Ee(h,S){var m=Fe[h.name],A=m.deferredOperations.pop();if(A)return A.reject(S),A.promise}function Je(h,S){return new z(function(m,A){if(Fe[h.name]=Fe[h.name]||ve(),h.db)if(S)Le(h),h.db.close();else return m(h.db);var k=[h.name];S&&k.push(h.version);var _=N.open.apply(N,k);S&&(_.onupgradeneeded=function(O){var H=_.result;try{H.createObjectStore(h.storeName),O.oldVersion<=1&&H.createObjectStore(Ae)}catch(G){if(G.name==="ConstraintError")console.warn('The database "'+h.name+'" has been upgraded from version '+O.oldVersion+" to version "+O.newVersion+', but the storage "'+h.storeName+'" already exists.');else throw G}}),_.onerror=function(O){O.preventDefault(),A(_.error)},_.onsuccess=function(){var O=_.result;O.onversionchange=function(H){H.target.close()},m(O),Ce(h)}})}function et(h){return Je(h,!1)}function gt(h){return Je(h,!0)}function wt(h,S){if(!h.db)return!0;var m=!h.db.objectStoreNames.contains(h.storeName),A=h.version<h.db.version,k=h.version>h.db.version;if(A&&(h.version!==S&&console.warn('The database "'+h.name+`" can't be downgraded from version `+h.db.version+" to version "+h.version+"."),h.version=h.db.version),k||m){if(m){var _=h.db.version+1;_>h.version&&(h.version=_)}return!0}return!1}function Nt(h){return new z(function(S,m){var A=new FileReader;A.onerror=m,A.onloadend=function(k){var _=btoa(k.target.result||"");S({__local_forage_encoded_blob:!0,data:_,type:h.type})},A.readAsBinaryString(h)})}function vt(h){var S=M(atob(h.data));return se([S],{type:h.type})}function kt(h){return h&&h.__local_forage_encoded_blob}function fe(h){var S=this,m=S._initReady().then(function(){var A=Fe[S._dbInfo.name];if(A&&A.dbReady)return A.dbReady});return V(m,h,h),m}function ke(h){Le(h);for(var S=Fe[h.name],m=S.forages,A=0;A<m.length;A++){var k=m[A];k._dbInfo.db&&(k._dbInfo.db.close(),k._dbInfo.db=null)}return h.db=null,et(h).then(function(_){return h.db=_,wt(h)?gt(h):_}).then(function(_){h.db=S.db=_;for(var O=0;O<m.length;O++)m[O]._dbInfo.db=_}).catch(function(_){throw Ee(h,_),_})}function ye(h,S,m,A){A===void 0&&(A=1);try{var k=h.db.transaction(h.storeName,S);m(null,k)}catch(_){if(A>0&&(!h.db||_.name==="InvalidStateError"||_.name==="NotFoundError"))return z.resolve().then(function(){if(!h.db||_.name==="NotFoundError"&&!h.db.objectStoreNames.contains(h.storeName)&&h.version<=h.db.version)return h.db&&(h.version=h.db.version+1),gt(h)}).then(function(){return ke(h).then(function(){ye(h,S,m,A-1)})}).catch(m);m(_)}}function ve(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Pe(h){var S=this,m={db:null};if(h)for(var A in h)m[A]=h[A];var k=Fe[m.name];k||(k=ve(),Fe[m.name]=k),k.forages.push(S),S._initReady||(S._initReady=S.ready,S.ready=fe);var _=[];function O(){return z.resolve()}for(var H=0;H<k.forages.length;H++){var G=k.forages[H];G!==S&&_.push(G._initReady().catch(O))}var X=k.forages.slice(0);return z.all(_).then(function(){return m.db=k.db,et(m)}).then(function(Y){return m.db=Y,wt(m,S._defaultConfig.version)?gt(m):Y}).then(function(Y){m.db=k.db=Y,S._dbInfo=m;for(var ne=0;ne<X.length;ne++){var we=X[ne];we!==S&&(we._dbInfo.db=m.db,we._dbInfo.version=m.version)}})}function ut(h,S){var m=this;h=oe(h);var A=new z(function(k,_){m.ready().then(function(){ye(m._dbInfo,a,function(O,H){if(O)return _(O);try{var G=H.objectStore(m._dbInfo.storeName),X=G.get(h);X.onsuccess=function(){var Y=X.result;Y===void 0&&(Y=null),kt(Y)&&(Y=vt(Y)),k(Y)},X.onerror=function(){_(X.error)}}catch(Y){_(Y)}})}).catch(_)});return q(A,S),A}function De(h,S){var m=this,A=new z(function(k,_){m.ready().then(function(){ye(m._dbInfo,a,function(O,H){if(O)return _(O);try{var G=H.objectStore(m._dbInfo.storeName),X=G.openCursor(),Y=1;X.onsuccess=function(){var ne=X.result;if(ne){var we=ne.value;kt(we)&&(we=vt(we));var Ne=h(we,ne.key,Y++);Ne!==void 0?k(Ne):ne.continue()}else k()},X.onerror=function(){_(X.error)}}catch(ne){_(ne)}})}).catch(_)});return q(A,S),A}function Ve(h,S,m){var A=this;h=oe(h);var k=new z(function(_,O){var H;A.ready().then(function(){return H=A._dbInfo,Se.call(S)==="[object Blob]"?de(H.db).then(function(G){return G?S:Nt(S)}):S}).then(function(G){ye(A._dbInfo,T,function(X,Y){if(X)return O(X);try{var ne=Y.objectStore(A._dbInfo.storeName);G===null&&(G=void 0);var we=ne.put(G,h);Y.oncomplete=function(){G===void 0&&(G=null),_(G)},Y.onabort=Y.onerror=function(){var Ne=we.error?we.error:we.transaction.error;O(Ne)}}catch(Ne){O(Ne)}})}).catch(O)});return q(k,m),k}function qe(h,S){var m=this;h=oe(h);var A=new z(function(k,_){m.ready().then(function(){ye(m._dbInfo,T,function(O,H){if(O)return _(O);try{var G=H.objectStore(m._dbInfo.storeName),X=G.delete(h);H.oncomplete=function(){k()},H.onerror=function(){_(X.error)},H.onabort=function(){var Y=X.error?X.error:X.transaction.error;_(Y)}}catch(Y){_(Y)}})}).catch(_)});return q(A,S),A}function ct(h){var S=this,m=new z(function(A,k){S.ready().then(function(){ye(S._dbInfo,T,function(_,O){if(_)return k(_);try{var H=O.objectStore(S._dbInfo.storeName),G=H.clear();O.oncomplete=function(){A()},O.onabort=O.onerror=function(){var X=G.error?G.error:G.transaction.error;k(X)}}catch(X){k(X)}})}).catch(k)});return q(m,h),m}function or(h){var S=this,m=new z(function(A,k){S.ready().then(function(){ye(S._dbInfo,a,function(_,O){if(_)return k(_);try{var H=O.objectStore(S._dbInfo.storeName),G=H.count();G.onsuccess=function(){A(G.result)},G.onerror=function(){k(G.error)}}catch(X){k(X)}})}).catch(k)});return q(m,h),m}function Zt(h,S){var m=this,A=new z(function(k,_){if(h<0){k(null);return}m.ready().then(function(){ye(m._dbInfo,a,function(O,H){if(O)return _(O);try{var G=H.objectStore(m._dbInfo.storeName),X=!1,Y=G.openKeyCursor();Y.onsuccess=function(){var ne=Y.result;if(!ne){k(null);return}h===0||X?k(ne.key):(X=!0,ne.advance(h))},Y.onerror=function(){_(Y.error)}}catch(ne){_(ne)}})}).catch(_)});return q(A,S),A}function bt(h){var S=this,m=new z(function(A,k){S.ready().then(function(){ye(S._dbInfo,a,function(_,O){if(_)return k(_);try{var H=O.objectStore(S._dbInfo.storeName),G=H.openKeyCursor(),X=[];G.onsuccess=function(){var Y=G.result;if(!Y){A(X);return}X.push(Y.key),Y.continue()},G.onerror=function(){k(G.error)}}catch(Y){k(Y)}})}).catch(k)});return q(m,h),m}function _t(h,S){S=ie.apply(this,arguments);var m=this.config();h=typeof h!="function"&&h||{},h.name||(h.name=h.name||m.name,h.storeName=h.storeName||m.storeName);var A=this,k;if(!h.name)k=z.reject("Invalid arguments");else{var _=h.name===m.name&&A._dbInfo.db,O=_?z.resolve(A._dbInfo.db):et(h).then(function(H){var G=Fe[h.name],X=G.forages;G.db=H;for(var Y=0;Y<X.length;Y++)X[Y]._dbInfo.db=H;return H});h.storeName?k=O.then(function(H){if(H.objectStoreNames.contains(h.storeName)){var G=H.version+1;Le(h);var X=Fe[h.name],Y=X.forages;H.close();for(var ne=0;ne<Y.length;ne++){var we=Y[ne];we._dbInfo.db=null,we._dbInfo.version=G}var Ne=new z(function(Ie,Qe){var We=N.open(h.name,G);We.onerror=function(pt){var qt=We.result;qt.close(),Qe(pt)},We.onupgradeneeded=function(){var pt=We.result;pt.deleteObjectStore(h.storeName)},We.onsuccess=function(){var pt=We.result;pt.close(),Ie(pt)}});return Ne.then(function(Ie){X.db=Ie;for(var Qe=0;Qe<Y.length;Qe++){var We=Y[Qe];We._dbInfo.db=Ie,Ce(We._dbInfo)}}).catch(function(Ie){throw(Ee(h,Ie)||z.resolve()).catch(function(){}),Ie})}}):k=O.then(function(H){Le(h);var G=Fe[h.name],X=G.forages;H.close();for(var Y=0;Y<X.length;Y++){var ne=X[Y];ne._dbInfo.db=null}var we=new z(function(Ne,Ie){var Qe=N.deleteDatabase(h.name);Qe.onerror=function(){var We=Qe.result;We&&We.close(),Ie(Qe.error)},Qe.onblocked=function(){console.warn('dropInstance blocked for database "'+h.name+'" until all open connections are closed')},Qe.onsuccess=function(){var We=Qe.result;We&&We.close(),Ne(We)}});return we.then(function(Ne){G.db=Ne;for(var Ie=0;Ie<X.length;Ie++){var Qe=X[Ie];Ce(Qe._dbInfo)}}).catch(function(Ne){throw(Ee(h,Ne)||z.resolve()).catch(function(){}),Ne})})}return q(k,S),k}var Ht={_driver:"asyncStorage",_initStorage:Pe,_support:W(),iterate:De,getItem:ut,setItem:Ve,removeItem:qe,clear:ct,length:or,key:Zt,keys:bt,dropInstance:_t};function ue(){return typeof openDatabase=="function"}var Ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yr="~~local_forage_type~",xr=/^~~local_forage_type~([^~]+)~/,jt="__lfsc__:",Jt=jt.length,Ut="arbf",It="blob",yt="si08",at="ui08",Dt="uic8",Sr="si16",zt="si32",re="ur16",K="ui32",ee="fl32",ae="fl64",ze=Jt+Ut.length,$e=Object.prototype.toString;function nt(h){var S=h.length*.75,m=h.length,A,k=0,_,O,H,G;h[h.length-1]==="="&&(S--,h[h.length-2]==="="&&S--);var X=new ArrayBuffer(S),Y=new Uint8Array(X);for(A=0;A<m;A+=4)_=Ue.indexOf(h[A]),O=Ue.indexOf(h[A+1]),H=Ue.indexOf(h[A+2]),G=Ue.indexOf(h[A+3]),Y[k++]=_<<2|O>>4,Y[k++]=(O&15)<<4|H>>2,Y[k++]=(H&3)<<6|G&63;return X}function Ge(h){var S=new Uint8Array(h),m="",A;for(A=0;A<S.length;A+=3)m+=Ue[S[A]>>2],m+=Ue[(S[A]&3)<<4|S[A+1]>>4],m+=Ue[(S[A+1]&15)<<2|S[A+2]>>6],m+=Ue[S[A+2]&63];return S.length%3===2?m=m.substring(0,m.length-1)+"=":S.length%3===1&&(m=m.substring(0,m.length-2)+"=="),m}function tt(h,S){var m="";if(h&&(m=$e.call(h)),h&&(m==="[object ArrayBuffer]"||h.buffer&&$e.call(h.buffer)==="[object ArrayBuffer]")){var A,k=jt;h instanceof ArrayBuffer?(A=h,k+=Ut):(A=h.buffer,m==="[object Int8Array]"?k+=yt:m==="[object Uint8Array]"?k+=at:m==="[object Uint8ClampedArray]"?k+=Dt:m==="[object Int16Array]"?k+=Sr:m==="[object Uint16Array]"?k+=re:m==="[object Int32Array]"?k+=zt:m==="[object Uint32Array]"?k+=K:m==="[object Float32Array]"?k+=ee:m==="[object Float64Array]"?k+=ae:S(new Error("Failed to get type for BinaryArray"))),S(k+Ge(A))}else if(m==="[object Blob]"){var _=new FileReader;_.onload=function(){var O=yr+h.type+"~"+Ge(this.result);S(jt+It+O)},_.readAsArrayBuffer(h)}else try{S(JSON.stringify(h))}catch(O){console.error("Couldn't convert value into a JSON string: ",h),S(null,O)}}function Vt(h){if(h.substring(0,Jt)!==jt)return JSON.parse(h);var S=h.substring(ze),m=h.substring(Jt,ze),A;if(m===It&&xr.test(S)){var k=S.match(xr);A=k[1],S=S.substring(k[0].length)}var _=nt(S);switch(m){case Ut:return _;case It:return se([_],{type:A});case yt:return new Int8Array(_);case at:return new Uint8Array(_);case Dt:return new Uint8ClampedArray(_);case Sr:return new Int16Array(_);case re:return new Uint16Array(_);case zt:return new Int32Array(_);case K:return new Uint32Array(_);case ee:return new Float32Array(_);case ae:return new Float64Array(_);default:throw new Error("Unkown type: "+m)}}var Pr={serialize:tt,deserialize:Vt,stringToBuffer:nt,bufferToString:Ge};function Rr(h,S,m,A){h.executeSql("CREATE TABLE IF NOT EXISTS "+S.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],m,A)}function un(h){var S=this,m={db:null};if(h)for(var A in h)m[A]=typeof h[A]!="string"?h[A].toString():h[A];var k=new z(function(_,O){try{m.db=openDatabase(m.name,String(m.version),m.description,m.size)}catch(H){return O(H)}m.db.transaction(function(H){Rr(H,m,function(){S._dbInfo=m,_()},function(G,X){O(X)})},O)});return m.serializer=Pr,k}function ht(h,S,m,A,k,_){h.executeSql(m,A,k,function(O,H){H.code===H.SYNTAX_ERR?O.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[S.storeName],function(G,X){X.rows.length?_(G,H):Rr(G,S,function(){G.executeSql(m,A,k,_)},_)},_):_(O,H)},_)}function er(h,S){var m=this;h=oe(h);var A=new z(function(k,_){m.ready().then(function(){var O=m._dbInfo;O.db.transaction(function(H){ht(H,O,"SELECT * FROM "+O.storeName+" WHERE key = ? LIMIT 1",[h],function(G,X){var Y=X.rows.length?X.rows.item(0).value:null;Y&&(Y=O.serializer.deserialize(Y)),k(Y)},function(G,X){_(X)})})}).catch(_)});return q(A,S),A}function ci(h,S){var m=this,A=new z(function(k,_){m.ready().then(function(){var O=m._dbInfo;O.db.transaction(function(H){ht(H,O,"SELECT * FROM "+O.storeName,[],function(G,X){for(var Y=X.rows,ne=Y.length,we=0;we<ne;we++){var Ne=Y.item(we),Ie=Ne.value;if(Ie&&(Ie=O.serializer.deserialize(Ie)),Ie=h(Ie,Ne.key,we+1),Ie!==void 0){k(Ie);return}}k()},function(G,X){_(X)})})}).catch(_)});return q(A,S),A}function ln(h,S,m,A){var k=this;h=oe(h);var _=new z(function(O,H){k.ready().then(function(){S===void 0&&(S=null);var G=S,X=k._dbInfo;X.serializer.serialize(S,function(Y,ne){ne?H(ne):X.db.transaction(function(we){ht(we,X,"INSERT OR REPLACE INTO "+X.storeName+" (key, value) VALUES (?, ?)",[h,Y],function(){O(G)},function(Ne,Ie){H(Ie)})},function(we){if(we.code===we.QUOTA_ERR){if(A>0){O(ln.apply(k,[h,G,m,A-1]));return}H(we)}})})}).catch(H)});return q(_,m),_}function Mr(h,S,m){return ln.apply(this,[h,S,m,1])}function wr(h,S){var m=this;h=oe(h);var A=new z(function(k,_){m.ready().then(function(){var O=m._dbInfo;O.db.transaction(function(H){ht(H,O,"DELETE FROM "+O.storeName+" WHERE key = ?",[h],function(){k()},function(G,X){_(X)})})}).catch(_)});return q(A,S),A}function di(h){var S=this,m=new z(function(A,k){S.ready().then(function(){var _=S._dbInfo;_.db.transaction(function(O){ht(O,_,"DELETE FROM "+_.storeName,[],function(){A()},function(H,G){k(G)})})}).catch(k)});return q(m,h),m}function hi(h){var S=this,m=new z(function(A,k){S.ready().then(function(){var _=S._dbInfo;_.db.transaction(function(O){ht(O,_,"SELECT COUNT(key) as c FROM "+_.storeName,[],function(H,G){var X=G.rows.item(0).c;A(X)},function(H,G){k(G)})})}).catch(k)});return q(m,h),m}function pi(h,S){var m=this,A=new z(function(k,_){m.ready().then(function(){var O=m._dbInfo;O.db.transaction(function(H){ht(H,O,"SELECT key FROM "+O.storeName+" WHERE id = ? LIMIT 1",[h+1],function(G,X){var Y=X.rows.length?X.rows.item(0).key:null;k(Y)},function(G,X){_(X)})})}).catch(_)});return q(A,S),A}function fn(h){var S=this,m=new z(function(A,k){S.ready().then(function(){var _=S._dbInfo;_.db.transaction(function(O){ht(O,_,"SELECT key FROM "+_.storeName,[],function(H,G){for(var X=[],Y=0;Y<G.rows.length;Y++)X.push(G.rows.item(Y).key);A(X)},function(H,G){k(G)})})}).catch(k)});return q(m,h),m}function mi(h){return new z(function(S,m){h.transaction(function(A){A.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(k,_){for(var O=[],H=0;H<_.rows.length;H++)O.push(_.rows.item(H).name);S({db:h,storeNames:O})},function(k,_){m(_)})},function(A){m(A)})})}function gi(h,S){S=ie.apply(this,arguments);var m=this.config();h=typeof h!="function"&&h||{},h.name||(h.name=h.name||m.name,h.storeName=h.storeName||m.storeName);var A=this,k;return h.name?k=new z(function(_){var O;h.name===m.name?O=A._dbInfo.db:O=openDatabase(h.name,"","",0),h.storeName?_({db:O,storeNames:[h.storeName]}):_(mi(O))}).then(function(_){return new z(function(O,H){_.db.transaction(function(G){function X(Ne){return new z(function(Ie,Qe){G.executeSql("DROP TABLE IF EXISTS "+Ne,[],function(){Ie()},function(We,pt){Qe(pt)})})}for(var Y=[],ne=0,we=_.storeNames.length;ne<we;ne++)Y.push(X(_.storeNames[ne]));z.all(Y).then(function(){O()}).catch(function(Ne){H(Ne)})},function(G){H(G)})})}):k=z.reject("Invalid arguments"),q(k,S),k}var cn={_driver:"webSQLStorage",_initStorage:un,_support:ue(),iterate:ci,getItem:er,setItem:Mr,removeItem:wr,clear:di,length:hi,key:pi,keys:fn,dropInstance:gi};function vi(){try{return typeof localStorage!="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(h){return!1}}function $t(h,S){var m=h.name+"/";return h.storeName!==S.storeName&&(m+=h.storeName+"/"),m}function dn(){var h="_localforage_support_test";try{return localStorage.setItem(h,!0),localStorage.removeItem(h),!1}catch(S){return!0}}function Fr(){return!dn()||localStorage.length>0}function Nr(h){var S=this,m={};if(h)for(var A in h)m[A]=h[A];return m.keyPrefix=$t(h,S._defaultConfig),Fr()?(S._dbInfo=m,m.serializer=Pr,z.resolve()):z.reject()}function _r(h){var S=this,m=S.ready().then(function(){for(var A=S._dbInfo.keyPrefix,k=localStorage.length-1;k>=0;k--){var _=localStorage.key(k);_.indexOf(A)===0&&localStorage.removeItem(_)}});return q(m,h),m}function hn(h,S){var m=this;h=oe(h);var A=m.ready().then(function(){var k=m._dbInfo,_=localStorage.getItem(k.keyPrefix+h);return _&&(_=k.serializer.deserialize(_)),_});return q(A,S),A}function bi(h,S){var m=this,A=m.ready().then(function(){for(var k=m._dbInfo,_=k.keyPrefix,O=_.length,H=localStorage.length,G=1,X=0;X<H;X++){var Y=localStorage.key(X);if(Y.indexOf(_)===0){var ne=localStorage.getItem(Y);if(ne&&(ne=k.serializer.deserialize(ne)),ne=h(ne,Y.substring(O),G++),ne!==void 0)return ne}}});return q(A,S),A}function pn(h,S){var m=this,A=m.ready().then(function(){var k=m._dbInfo,_;try{_=localStorage.key(h)}catch(O){_=null}return _&&(_=_.substring(k.keyPrefix.length)),_});return q(A,S),A}function yi(h){var S=this,m=S.ready().then(function(){for(var A=S._dbInfo,k=localStorage.length,_=[],O=0;O<k;O++){var H=localStorage.key(O);H.indexOf(A.keyPrefix)===0&&_.push(H.substring(A.keyPrefix.length))}return _});return q(m,h),m}function ur(h){var S=this,m=S.keys().then(function(A){return A.length});return q(m,h),m}function mn(h,S){var m=this;h=oe(h);var A=m.ready().then(function(){var k=m._dbInfo;localStorage.removeItem(k.keyPrefix+h)});return q(A,S),A}function gn(h,S,m){var A=this;h=oe(h);var k=A.ready().then(function(){S===void 0&&(S=null);var _=S;return new z(function(O,H){var G=A._dbInfo;G.serializer.serialize(S,function(X,Y){if(Y)H(Y);else try{localStorage.setItem(G.keyPrefix+h,X),O(_)}catch(ne){(ne.name==="QuotaExceededError"||ne.name==="NS_ERROR_DOM_QUOTA_REACHED")&&H(ne),H(ne)}})})});return q(k,m),k}function vn(h,S){if(S=ie.apply(this,arguments),h=typeof h!="function"&&h||{},!h.name){var m=this.config();h.name=h.name||m.name,h.storeName=h.storeName||m.storeName}var A=this,k;return h.name?k=new z(function(_){h.storeName?_($t(h,A._defaultConfig)):_(h.name+"/")}).then(function(_){for(var O=localStorage.length-1;O>=0;O--){var H=localStorage.key(O);H.indexOf(_)===0&&localStorage.removeItem(H)}}):k=z.reject("Invalid arguments"),q(k,S),k}var bn={_driver:"localStorageWrapper",_initStorage:Nr,_support:vi(),iterate:bi,getItem:hn,setItem:gn,removeItem:mn,clear:_r,length:ur,key:pn,keys:yi,dropInstance:vn},xi=function(S,m){return S===m||typeof S=="number"&&typeof m=="number"&&isNaN(S)&&isNaN(m)},Ir=function(S,m){for(var A=S.length,k=0;k<A;){if(xi(S[k],m))return!0;k++}return!1},yn=Array.isArray||function(h){return Object.prototype.toString.call(h)==="[object Array]"},lr={},Or={},Kt={INDEXEDDB:Ht,WEBSQL:cn,LOCALSTORAGE:bn},Br=[Kt.INDEXEDDB._driver,Kt.WEBSQL._driver,Kt.LOCALSTORAGE._driver],fr=["dropInstance"],ot=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(fr),tr={description:"",driver:Br.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Cr(h,S){h[S]=function(){var m=arguments;return h.ready().then(function(){return h[S].apply(h,m)})}}function Vr(){for(var h=1;h<arguments.length;h++){var S=arguments[h];if(S)for(var m in S)S.hasOwnProperty(m)&&(yn(S[m])?arguments[0][m]=S[m].slice():arguments[0][m]=S[m])}return arguments[0]}var Si=function(){function h(S){C(this,h);for(var m in Kt)if(Kt.hasOwnProperty(m)){var A=Kt[m],k=A._driver;this[m]=k,lr[k]||this.defineDriver(A)}this._defaultConfig=Vr({},tr),this._config=Vr({},this._defaultConfig,S),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return h.prototype.config=function(m){if((typeof m=="undefined"?"undefined":g(m))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var A in m){if(A==="storeName"&&(m[A]=m[A].replace(/\W/g,"_")),A==="version"&&typeof m[A]!="number")return new Error("Database version must be a number.");this._config[A]=m[A]}return"driver"in m&&m.driver?this.setDriver(this._config.driver):!0}else return typeof m=="string"?this._config[m]:this._config},h.prototype.defineDriver=function(m,A,k){var _=new z(function(O,H){try{var G=m._driver,X=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!m._driver){H(X);return}for(var Y=ot.concat("_initStorage"),ne=0,we=Y.length;ne<we;ne++){var Ne=Y[ne],Ie=!Ir(fr,Ne);if((Ie||m[Ne])&&typeof m[Ne]!="function"){H(X);return}}var Qe=function(){for(var qt=function(Ur){return function(){var wi=new Error("Method "+Ur+" is not implemented by the current driver"),Sn=z.reject(wi);return q(Sn,arguments[arguments.length-1]),Sn}},Hr=0,xn=fr.length;Hr<xn;Hr++){var jr=fr[Hr];m[jr]||(m[jr]=qt(jr))}};Qe();var We=function(qt){lr[G]&&console.info("Redefining LocalForage driver: "+G),lr[G]=m,Or[G]=qt,O()};"_support"in m?m._support&&typeof m._support=="function"?m._support().then(We,H):We(!!m._support):We(!0)}catch(pt){H(pt)}});return V(_,A,k),_},h.prototype.driver=function(){return this._driver||null},h.prototype.getDriver=function(m,A,k){var _=lr[m]?z.resolve(lr[m]):z.reject(new Error("Driver not found."));return V(_,A,k),_},h.prototype.getSerializer=function(m){var A=z.resolve(Pr);return V(A,m),A},h.prototype.ready=function(m){var A=this,k=A._driverSet.then(function(){return A._ready===null&&(A._ready=A._initDriver()),A._ready});return V(k,m,m),k},h.prototype.setDriver=function(m,A,k){var _=this;yn(m)||(m=[m]);var O=this._getSupportedDrivers(m);function H(){_._config.driver=_.driver()}function G(ne){return _._extend(ne),H(),_._ready=_._initStorage(_._config),_._ready}function X(ne){return function(){var we=0;function Ne(){for(;we<ne.length;){var Ie=ne[we];return we++,_._dbInfo=null,_._ready=null,_.getDriver(Ie).then(G).catch(Ne)}H();var Qe=new Error("No available storage method found.");return _._driverSet=z.reject(Qe),_._driverSet}return Ne()}}var Y=this._driverSet!==null?this._driverSet.catch(function(){return z.resolve()}):z.resolve();return this._driverSet=Y.then(function(){var ne=O[0];return _._dbInfo=null,_._ready=null,_.getDriver(ne).then(function(we){_._driver=we._driver,H(),_._wrapLibraryMethodsWithReady(),_._initDriver=X(O)})}).catch(function(){H();var ne=new Error("No available storage method found.");return _._driverSet=z.reject(ne),_._driverSet}),V(this._driverSet,A,k),this._driverSet},h.prototype.supports=function(m){return!!Or[m]},h.prototype._extend=function(m){Vr(this,m)},h.prototype._getSupportedDrivers=function(m){for(var A=[],k=0,_=m.length;k<_;k++){var O=m[k];this.supports(O)&&A.push(O)}return A},h.prototype._wrapLibraryMethodsWithReady=function(){for(var m=0,A=ot.length;m<A;m++)Cr(this,ot[m])},h.prototype.createInstance=function(m){return new h(m)},h}(),Wr=new Si;d.exports=Wr},{3:3}]},{},[4])(4)})});var As=Yr((Ts,Mn)=>{(function(f,t){"use strict";typeof Mn=="object"&&typeof Mn.exports=="object"?Mn.exports=f.document?t(f,!0):function(i){if(!i.document)throw new Error("jQuery requires a window with a document");return t(i)}:t(f)})(typeof window!="undefined"?window:Ts,function(f,t){"use strict";var i=[],u=Object.getPrototypeOf,d=i.slice,y=i.flat?function(e){return i.flat.call(e)}:function(e){return i.concat.apply([],e)},g=i.push,C=i.indexOf,w={},N=w.toString,W=w.hasOwnProperty,se=W.toString,z=se.call(Object),q={},V=function(r){return typeof r=="function"&&typeof r.nodeType!="number"&&typeof r.item!="function"},oe=function(r){return r!=null&&r===r.window},ie=f.document,Ae={type:!0,src:!0,nonce:!0,noModule:!0};function Ke(e,r,n){n=n||ie;var s,o,l=n.createElement("script");if(l.text=e,r)for(s in Ae)o=r[s]||r.getAttribute&&r.getAttribute(s),o&&l.setAttribute(s,o);n.head.appendChild(l).parentNode.removeChild(l)}function Fe(e){return e==null?e+"":typeof e=="object"||typeof e=="function"?w[N.call(e)]||"object":typeof e}var Se="3.6.3",a=function(e,r){return new a.fn.init(e,r)};a.fn=a.prototype={jquery:Se,constructor:a,length:0,toArray:function(){return d.call(this)},get:function(e){return e==null?d.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var r=a.merge(this.constructor(),e);return r.prevObject=this,r},each:function(e){return a.each(this,e)},map:function(e){return this.pushStack(a.map(this,function(r,n){return e.call(r,n,r)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(a.grep(this,function(e,r){return(r+1)%2}))},odd:function(){return this.pushStack(a.grep(this,function(e,r){return r%2}))},eq:function(e){var r=this.length,n=+e+(e<0?r:0);return this.pushStack(n>=0&&n<r?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:g,sort:i.sort,splice:i.splice},a.extend=a.fn.extend=function(){var e,r,n,s,o,l,c=arguments[0]||{},x=1,v=arguments.length,L=!1;for(typeof c=="boolean"&&(L=c,c=arguments[x]||{},x++),typeof c!="object"&&!V(c)&&(c={}),x===v&&(c=this,x--);x<v;x++)if((e=arguments[x])!=null)for(r in e)s=e[r],!(r==="__proto__"||c===s)&&(L&&s&&(a.isPlainObject(s)||(o=Array.isArray(s)))?(n=c[r],o&&!Array.isArray(n)?l=[]:!o&&!a.isPlainObject(n)?l={}:l=n,o=!1,c[r]=a.extend(L,l,s)):s!==void 0&&(c[r]=s));return c},a.extend({expando:"jQuery"+(Se+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var r,n;return!e||N.call(e)!=="[object Object]"?!1:(r=u(e),r?(n=W.call(r,"constructor")&&r.constructor,typeof n=="function"&&se.call(n)===z):!0)},isEmptyObject:function(e){var r;for(r in e)return!1;return!0},globalEval:function(e,r,n){Ke(e,{nonce:r&&r.nonce},n)},each:function(e,r){var n,s=0;if(T(e))for(n=e.length;s<n&&r.call(e[s],s,e[s])!==!1;s++);else for(s in e)if(r.call(e[s],s,e[s])===!1)break;return e},makeArray:function(e,r){var n=r||[];return e!=null&&(T(Object(e))?a.merge(n,typeof e=="string"?[e]:e):g.call(n,e)),n},inArray:function(e,r,n){return r==null?-1:C.call(r,e,n)},merge:function(e,r){for(var n=+r.length,s=0,o=e.length;s<n;s++)e[o++]=r[s];return e.length=o,e},grep:function(e,r,n){for(var s,o=[],l=0,c=e.length,x=!n;l<c;l++)s=!r(e[l],l),s!==x&&o.push(e[l]);return o},map:function(e,r,n){var s,o,l=0,c=[];if(T(e))for(s=e.length;l<s;l++)o=r(e[l],l,n),o!=null&&c.push(o);else for(l in e)o=r(e[l],l,n),o!=null&&c.push(o);return y(c)},guid:1,support:q}),typeof Symbol=="function"&&(a.fn[Symbol.iterator]=i[Symbol.iterator]),a.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,r){w["[object "+r+"]"]=r.toLowerCase()});function T(e){var r=!!e&&"length"in e&&e.length,n=Fe(e);return V(e)||oe(e)?!1:n==="array"||r===0||typeof r=="number"&&r>0&&r-1 in e}var M=function(e){var r,n,s,o,l,c,x,v,L,R,j,P,F,ce,xe,le,it,rt,Ct,Be="sizzle"+1*new Date,be=e.document,xt=0,Re=0,Ze=En(),$r=En(),wn=En(),Et=En(),cr=function(p,b){return p===b&&(j=!0),0},dr={}.hasOwnProperty,St=[],rr=St.pop,Lt=St.push,nr=St.push,cs=St.slice,hr=function(p,b){for(var E=0,I=p.length;E<I;E++)if(p[E]===b)return E;return-1},Ai="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Oe="[\\x20\\t\\r\\n\\f]",pr="(?:\\\\[\\da-fA-F]{1,6}"+Oe+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",ds="\\["+Oe+"*("+pr+")(?:"+Oe+"*([*^$|!~]?=)"+Oe+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+pr+"))|)"+Oe+"*\\]",ki=":("+pr+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+ds+")*)|.*)\\)|)",ha=new RegExp(Oe+"+","g"),_n=new RegExp("^"+Oe+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Oe+"+$","g"),pa=new RegExp("^"+Oe+"*,"+Oe+"*"),hs=new RegExp("^"+Oe+"*([>+~]|"+Oe+")"+Oe+"*"),ma=new RegExp(Oe+"|>"),ga=new RegExp(ki),va=new RegExp("^"+pr+"$"),Cn={ID:new RegExp("^#("+pr+")"),CLASS:new RegExp("^\\.("+pr+")"),TAG:new RegExp("^("+pr+"|[*])"),ATTR:new RegExp("^"+ds),PSEUDO:new RegExp("^"+ki),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Oe+"*(even|odd|(([+-]|)(\\d*)n|)"+Oe+"*(?:([+-]|)"+Oe+"*(\\d+)|))"+Oe+"*\\)|)","i"),bool:new RegExp("^(?:"+Ai+")$","i"),needsContext:new RegExp("^"+Oe+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Oe+"*((?:-\\d)?\\d*)"+Oe+"*\\)|)(?=[^-]|$)","i")},ba=/HTML$/i,ya=/^(?:input|select|textarea|button)$/i,xa=/^h\d$/i,Kr=/^[^{]+\{\s*\[native \w/,Sa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Di=/[+~]/,Gt=new RegExp("\\\\[\\da-fA-F]{1,6}"+Oe+"?|\\\\([^\\r\\n\\f])","g"),Xt=function(p,b){var E="0x"+p.slice(1)-65536;return b||(E<0?String.fromCharCode(E+65536):String.fromCharCode(E>>10|55296,E&1023|56320))},ps=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ms=function(p,b){return b?p==="\0"?"\uFFFD":p.slice(0,-1)+"\\"+p.charCodeAt(p.length-1).toString(16)+" ":"\\"+p},gs=function(){P()},wa=An(function(p){return p.disabled===!0&&p.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{nr.apply(St=cs.call(be.childNodes),be.childNodes),St[be.childNodes.length].nodeType}catch(p){nr={apply:St.length?function(b,E){Lt.apply(b,cs.call(E))}:function(b,E){for(var I=b.length,D=0;b[I++]=E[D++];);b.length=I-1}}}function He(p,b,E,I){var D,B,U,J,te,pe,he,ge=b&&b.ownerDocument,Te=b?b.nodeType:9;if(E=E||[],typeof p!="string"||!p||Te!==1&&Te!==9&&Te!==11)return E;if(!I&&(P(b),b=b||F,xe)){if(Te!==11&&(te=Sa.exec(p)))if(D=te[1]){if(Te===9)if(U=b.getElementById(D)){if(U.id===D)return E.push(U),E}else return E;else if(ge&&(U=ge.getElementById(D))&&Ct(b,U)&&U.id===D)return E.push(U),E}else{if(te[2])return nr.apply(E,b.getElementsByTagName(p)),E;if((D=te[3])&&n.getElementsByClassName&&b.getElementsByClassName)return nr.apply(E,b.getElementsByClassName(D)),E}if(n.qsa&&!Et[p+" "]&&(!le||!le.test(p))&&(Te!==1||b.nodeName.toLowerCase()!=="object")){if(he=p,ge=b,Te===1&&(ma.test(p)||hs.test(p))){for(ge=Di.test(p)&&Pi(b.parentNode)||b,(ge!==b||!n.scope)&&((J=b.getAttribute("id"))?J=J.replace(ps,ms):b.setAttribute("id",J=Be)),pe=c(p),B=pe.length;B--;)pe[B]=(J?"#"+J:":scope")+" "+Tn(pe[B]);he=pe.join(",")}try{if(n.cssSupportsSelector&&!CSS.supports("selector(:is("+he+"))"))throw new Error;return nr.apply(E,ge.querySelectorAll(he)),E}catch(je){Et(p,!0)}finally{J===Be&&b.removeAttribute("id")}}}return v(p.replace(_n,"$1"),b,E,I)}function En(){var p=[];function b(E,I){return p.push(E+" ")>s.cacheLength&&delete b[p.shift()],b[E+" "]=I}return b}function Ot(p){return p[Be]=!0,p}function Pt(p){var b=F.createElement("fieldset");try{return!!p(b)}catch(E){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function Li(p,b){for(var E=p.split("|"),I=E.length;I--;)s.attrHandle[E[I]]=b}function vs(p,b){var E=b&&p,I=E&&p.nodeType===1&&b.nodeType===1&&p.sourceIndex-b.sourceIndex;if(I)return I;if(E){for(;E=E.nextSibling;)if(E===b)return-1}return p?1:-1}function _a(p){return function(b){var E=b.nodeName.toLowerCase();return E==="input"&&b.type===p}}function Ca(p){return function(b){var E=b.nodeName.toLowerCase();return(E==="input"||E==="button")&&b.type===p}}function bs(p){return function(b){return"form"in b?b.parentNode&&b.disabled===!1?"label"in b?"label"in b.parentNode?b.parentNode.disabled===p:b.disabled===p:b.isDisabled===p||b.isDisabled!==!p&&wa(b)===p:b.disabled===p:"label"in b?b.disabled===p:!1}}function mr(p){return Ot(function(b){return b=+b,Ot(function(E,I){for(var D,B=p([],E.length,b),U=B.length;U--;)E[D=B[U]]&&(E[D]=!(I[D]=E[D]))})})}function Pi(p){return p&&typeof p.getElementsByTagName!="undefined"&&p}n=He.support={},l=He.isXML=function(p){var b=p&&p.namespaceURI,E=p&&(p.ownerDocument||p).documentElement;return!ba.test(b||E&&E.nodeName||"HTML")},P=He.setDocument=function(p){var b,E,I=p?p.ownerDocument||p:be;return I==F||I.nodeType!==9||!I.documentElement||(F=I,ce=F.documentElement,xe=!l(F),be!=F&&(E=F.defaultView)&&E.top!==E&&(E.addEventListener?E.addEventListener("unload",gs,!1):E.attachEvent&&E.attachEvent("onunload",gs)),n.scope=Pt(function(D){return ce.appendChild(D).appendChild(F.createElement("div")),typeof D.querySelectorAll!="undefined"&&!D.querySelectorAll(":scope fieldset div").length}),n.cssSupportsSelector=Pt(function(){return CSS.supports("selector(*)")&&F.querySelectorAll(":is(:jqfake)")&&!CSS.supports("selector(:is(*,:jqfake))")}),n.attributes=Pt(function(D){return D.className="i",!D.getAttribute("className")}),n.getElementsByTagName=Pt(function(D){return D.appendChild(F.createComment("")),!D.getElementsByTagName("*").length}),n.getElementsByClassName=Kr.test(F.getElementsByClassName),n.getById=Pt(function(D){return ce.appendChild(D).id=Be,!F.getElementsByName||!F.getElementsByName(Be).length}),n.getById?(s.filter.ID=function(D){var B=D.replace(Gt,Xt);return function(U){return U.getAttribute("id")===B}},s.find.ID=function(D,B){if(typeof B.getElementById!="undefined"&&xe){var U=B.getElementById(D);return U?[U]:[]}}):(s.filter.ID=function(D){var B=D.replace(Gt,Xt);return function(U){var J=typeof U.getAttributeNode!="undefined"&&U.getAttributeNode("id");return J&&J.value===B}},s.find.ID=function(D,B){if(typeof B.getElementById!="undefined"&&xe){var U,J,te,pe=B.getElementById(D);if(pe){if(U=pe.getAttributeNode("id"),U&&U.value===D)return[pe];for(te=B.getElementsByName(D),J=0;pe=te[J++];)if(U=pe.getAttributeNode("id"),U&&U.value===D)return[pe]}return[]}}),s.find.TAG=n.getElementsByTagName?function(D,B){if(typeof B.getElementsByTagName!="undefined")return B.getElementsByTagName(D);if(n.qsa)return B.querySelectorAll(D)}:function(D,B){var U,J=[],te=0,pe=B.getElementsByTagName(D);if(D==="*"){for(;U=pe[te++];)U.nodeType===1&&J.push(U);return J}return pe},s.find.CLASS=n.getElementsByClassName&&function(D,B){if(typeof B.getElementsByClassName!="undefined"&&xe)return B.getElementsByClassName(D)},it=[],le=[],(n.qsa=Kr.test(F.querySelectorAll))&&(Pt(function(D){var B;ce.appendChild(D).innerHTML="<a id='"+Be+"'></a><select id='"+Be+"-\r\\' msallowcapture=''><option selected=''></option></select>",D.querySelectorAll("[msallowcapture^='']").length&&le.push("[*^$]="+Oe+`*(?:''|"")`),D.querySelectorAll("[selected]").length||le.push("\\["+Oe+"*(?:value|"+Ai+")"),D.querySelectorAll("[id~="+Be+"-]").length||le.push("~="),B=F.createElement("input"),B.setAttribute("name",""),D.appendChild(B),D.querySelectorAll("[name='']").length||le.push("\\["+Oe+"*name"+Oe+"*="+Oe+`*(?:''|"")`),D.querySelectorAll(":checked").length||le.push(":checked"),D.querySelectorAll("a#"+Be+"+*").length||le.push(".#.+[+~]"),D.querySelectorAll("\\\f"),le.push("[\\r\\n\\f]")}),Pt(function(D){D.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var B=F.createElement("input");B.setAttribute("type","hidden"),D.appendChild(B).setAttribute("name","D"),D.querySelectorAll("[name=d]").length&&le.push("name"+Oe+"*[*^$|!~]?="),D.querySelectorAll(":enabled").length!==2&&le.push(":enabled",":disabled"),ce.appendChild(D).disabled=!0,D.querySelectorAll(":disabled").length!==2&&le.push(":enabled",":disabled"),D.querySelectorAll("*,:x"),le.push(",.*:")})),(n.matchesSelector=Kr.test(rt=ce.matches||ce.webkitMatchesSelector||ce.mozMatchesSelector||ce.oMatchesSelector||ce.msMatchesSelector))&&Pt(function(D){n.disconnectedMatch=rt.call(D,"*"),rt.call(D,"[s!='']:x"),it.push("!=",ki)}),n.cssSupportsSelector||le.push(":has"),le=le.length&&new RegExp(le.join("|")),it=it.length&&new RegExp(it.join("|")),b=Kr.test(ce.compareDocumentPosition),Ct=b||Kr.test(ce.contains)?function(D,B){var U=D.nodeType===9&&D.documentElement||D,J=B&&B.parentNode;return D===J||!!(J&&J.nodeType===1&&(U.contains?U.contains(J):D.compareDocumentPosition&&D.compareDocumentPosition(J)&16))}:function(D,B){if(B){for(;B=B.parentNode;)if(B===D)return!0}return!1},cr=b?function(D,B){if(D===B)return j=!0,0;var U=!D.compareDocumentPosition-!B.compareDocumentPosition;return U||(U=(D.ownerDocument||D)==(B.ownerDocument||B)?D.compareDocumentPosition(B):1,U&1||!n.sortDetached&&B.compareDocumentPosition(D)===U?D==F||D.ownerDocument==be&&Ct(be,D)?-1:B==F||B.ownerDocument==be&&Ct(be,B)?1:R?hr(R,D)-hr(R,B):0:U&4?-1:1)}:function(D,B){if(D===B)return j=!0,0;var U,J=0,te=D.parentNode,pe=B.parentNode,he=[D],ge=[B];if(!te||!pe)return D==F?-1:B==F?1:te?-1:pe?1:R?hr(R,D)-hr(R,B):0;if(te===pe)return vs(D,B);for(U=D;U=U.parentNode;)he.unshift(U);for(U=B;U=U.parentNode;)ge.unshift(U);for(;he[J]===ge[J];)J++;return J?vs(he[J],ge[J]):he[J]==be?-1:ge[J]==be?1:0}),F},He.matches=function(p,b){return He(p,null,null,b)},He.matchesSelector=function(p,b){if(P(p),n.matchesSelector&&xe&&!Et[b+" "]&&(!it||!it.test(b))&&(!le||!le.test(b)))try{var E=rt.call(p,b);if(E||n.disconnectedMatch||p.document&&p.document.nodeType!==11)return E}catch(I){Et(b,!0)}return He(b,F,null,[p]).length>0},He.contains=function(p,b){return(p.ownerDocument||p)!=F&&P(p),Ct(p,b)},He.attr=function(p,b){(p.ownerDocument||p)!=F&&P(p);var E=s.attrHandle[b.toLowerCase()],I=E&&dr.call(s.attrHandle,b.toLowerCase())?E(p,b,!xe):void 0;return I!==void 0?I:n.attributes||!xe?p.getAttribute(b):(I=p.getAttributeNode(b))&&I.specified?I.value:null},He.escape=function(p){return(p+"").replace(ps,ms)},He.error=function(p){throw new Error("Syntax error, unrecognized expression: "+p)},He.uniqueSort=function(p){var b,E=[],I=0,D=0;if(j=!n.detectDuplicates,R=!n.sortStable&&p.slice(0),p.sort(cr),j){for(;b=p[D++];)b===p[D]&&(I=E.push(D));for(;I--;)p.splice(E[I],1)}return R=null,p},o=He.getText=function(p){var b,E="",I=0,D=p.nodeType;if(D){if(D===1||D===9||D===11){if(typeof p.textContent=="string")return p.textContent;for(p=p.firstChild;p;p=p.nextSibling)E+=o(p)}else if(D===3||D===4)return p.nodeValue}else for(;b=p[I++];)E+=o(b);return E},s=He.selectors={cacheLength:50,createPseudo:Ot,match:Cn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(p){return p[1]=p[1].replace(Gt,Xt),p[3]=(p[3]||p[4]||p[5]||"").replace(Gt,Xt),p[2]==="~="&&(p[3]=" "+p[3]+" "),p.slice(0,4)},CHILD:function(p){return p[1]=p[1].toLowerCase(),p[1].slice(0,3)==="nth"?(p[3]||He.error(p[0]),p[4]=+(p[4]?p[5]+(p[6]||1):2*(p[3]==="even"||p[3]==="odd")),p[5]=+(p[7]+p[8]||p[3]==="odd")):p[3]&&He.error(p[0]),p},PSEUDO:function(p){var b,E=!p[6]&&p[2];return Cn.CHILD.test(p[0])?null:(p[3]?p[2]=p[4]||p[5]||"":E&&ga.test(E)&&(b=c(E,!0))&&(b=E.indexOf(")",E.length-b)-E.length)&&(p[0]=p[0].slice(0,b),p[2]=E.slice(0,b)),p.slice(0,3))}},filter:{TAG:function(p){var b=p.replace(Gt,Xt).toLowerCase();return p==="*"?function(){return!0}:function(E){return E.nodeName&&E.nodeName.toLowerCase()===b}},CLASS:function(p){var b=Ze[p+" "];return b||(b=new RegExp("(^|"+Oe+")"+p+"("+Oe+"|$)"))&&Ze(p,function(E){return b.test(typeof E.className=="string"&&E.className||typeof E.getAttribute!="undefined"&&E.getAttribute("class")||"")})},ATTR:function(p,b,E){return function(I){var D=He.attr(I,p);return D==null?b==="!=":b?(D+="",b==="="?D===E:b==="!="?D!==E:b==="^="?E&&D.indexOf(E)===0:b==="*="?E&&D.indexOf(E)>-1:b==="$="?E&&D.slice(-E.length)===E:b==="~="?(" "+D.replace(ha," ")+" ").indexOf(E)>-1:b==="|="?D===E||D.slice(0,E.length+1)===E+"-":!1):!0}},CHILD:function(p,b,E,I,D){var B=p.slice(0,3)!=="nth",U=p.slice(-4)!=="last",J=b==="of-type";return I===1&&D===0?function(te){return!!te.parentNode}:function(te,pe,he){var ge,Te,je,me,st,dt,Tt=B!==U?"nextSibling":"previousSibling",Xe=te.parentNode,qr=J&&te.nodeName.toLowerCase(),Gr=!he&&!J,At=!1;if(Xe){if(B){for(;Tt;){for(me=te;me=me[Tt];)if(J?me.nodeName.toLowerCase()===qr:me.nodeType===1)return!1;dt=Tt=p==="only"&&!dt&&"nextSibling"}return!0}if(dt=[U?Xe.firstChild:Xe.lastChild],U&&Gr){for(me=Xe,je=me[Be]||(me[Be]={}),Te=je[me.uniqueID]||(je[me.uniqueID]={}),ge=Te[p]||[],st=ge[0]===xt&&ge[1],At=st&&ge[2],me=st&&Xe.childNodes[st];me=++st&&me&&me[Tt]||(At=st=0)||dt.pop();)if(me.nodeType===1&&++At&&me===te){Te[p]=[xt,st,At];break}}else if(Gr&&(me=te,je=me[Be]||(me[Be]={}),Te=je[me.uniqueID]||(je[me.uniqueID]={}),ge=Te[p]||[],st=ge[0]===xt&&ge[1],At=st),At===!1)for(;(me=++st&&me&&me[Tt]||(At=st=0)||dt.pop())&&!((J?me.nodeName.toLowerCase()===qr:me.nodeType===1)&&++At&&(Gr&&(je=me[Be]||(me[Be]={}),Te=je[me.uniqueID]||(je[me.uniqueID]={}),Te[p]=[xt,At]),me===te)););return At-=D,At===I||At%I===0&&At/I>=0}}},PSEUDO:function(p,b){var E,I=s.pseudos[p]||s.setFilters[p.toLowerCase()]||He.error("unsupported pseudo: "+p);return I[Be]?I(b):I.length>1?(E=[p,p,"",b],s.setFilters.hasOwnProperty(p.toLowerCase())?Ot(function(D,B){for(var U,J=I(D,b),te=J.length;te--;)U=hr(D,J[te]),D[U]=!(B[U]=J[te])}):function(D){return I(D,0,E)}):I}},pseudos:{not:Ot(function(p){var b=[],E=[],I=x(p.replace(_n,"$1"));return I[Be]?Ot(function(D,B,U,J){for(var te,pe=I(D,null,J,[]),he=D.length;he--;)(te=pe[he])&&(D[he]=!(B[he]=te))}):function(D,B,U){return b[0]=D,I(b,null,U,E),b[0]=null,!E.pop()}}),has:Ot(function(p){return function(b){return He(p,b).length>0}}),contains:Ot(function(p){return p=p.replace(Gt,Xt),function(b){return(b.textContent||o(b)).indexOf(p)>-1}}),lang:Ot(function(p){return va.test(p||"")||He.error("unsupported lang: "+p),p=p.replace(Gt,Xt).toLowerCase(),function(b){var E;do if(E=xe?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return E=E.toLowerCase(),E===p||E.indexOf(p+"-")===0;while((b=b.parentNode)&&b.nodeType===1);return!1}}),target:function(p){var b=e.location&&e.location.hash;return b&&b.slice(1)===p.id},root:function(p){return p===ce},focus:function(p){return p===F.activeElement&&(!F.hasFocus||F.hasFocus())&&!!(p.type||p.href||~p.tabIndex)},enabled:bs(!1),disabled:bs(!0),checked:function(p){var b=p.nodeName.toLowerCase();return b==="input"&&!!p.checked||b==="option"&&!!p.selected},selected:function(p){return p.parentNode&&p.parentNode.selectedIndex,p.selected===!0},empty:function(p){for(p=p.firstChild;p;p=p.nextSibling)if(p.nodeType<6)return!1;return!0},parent:function(p){return!s.pseudos.empty(p)},header:function(p){return xa.test(p.nodeName)},input:function(p){return ya.test(p.nodeName)},button:function(p){var b=p.nodeName.toLowerCase();return b==="input"&&p.type==="button"||b==="button"},text:function(p){var b;return p.nodeName.toLowerCase()==="input"&&p.type==="text"&&((b=p.getAttribute("type"))==null||b.toLowerCase()==="text")},first:mr(function(){return[0]}),last:mr(function(p,b){return[b-1]}),eq:mr(function(p,b,E){return[E<0?E+b:E]}),even:mr(function(p,b){for(var E=0;E<b;E+=2)p.push(E);return p}),odd:mr(function(p,b){for(var E=1;E<b;E+=2)p.push(E);return p}),lt:mr(function(p,b,E){for(var I=E<0?E+b:E>b?b:E;--I>=0;)p.push(I);return p}),gt:mr(function(p,b,E){for(var I=E<0?E+b:E;++I<b;)p.push(I);return p})}},s.pseudos.nth=s.pseudos.eq;for(r in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})s.pseudos[r]=_a(r);for(r in{submit:!0,reset:!0})s.pseudos[r]=Ca(r);function ys(){}ys.prototype=s.filters=s.pseudos,s.setFilters=new ys,c=He.tokenize=function(p,b){var E,I,D,B,U,J,te,pe=$r[p+" "];if(pe)return b?0:pe.slice(0);for(U=p,J=[],te=s.preFilter;U;){(!E||(I=pa.exec(U)))&&(I&&(U=U.slice(I[0].length)||U),J.push(D=[])),E=!1,(I=hs.exec(U))&&(E=I.shift(),D.push({value:E,type:I[0].replace(_n," ")}),U=U.slice(E.length));for(B in s.filter)(I=Cn[B].exec(U))&&(!te[B]||(I=te[B](I)))&&(E=I.shift(),D.push({value:E,type:B,matches:I}),U=U.slice(E.length));if(!E)break}return b?U.length:U?He.error(p):$r(p,J).slice(0)};function Tn(p){for(var b=0,E=p.length,I="";b<E;b++)I+=p[b].value;return I}function An(p,b,E){var I=b.dir,D=b.next,B=D||I,U=E&&B==="parentNode",J=Re++;return b.first?function(te,pe,he){for(;te=te[I];)if(te.nodeType===1||U)return p(te,pe,he);return!1}:function(te,pe,he){var ge,Te,je,me=[xt,J];if(he){for(;te=te[I];)if((te.nodeType===1||U)&&p(te,pe,he))return!0}else for(;te=te[I];)if(te.nodeType===1||U)if(je=te[Be]||(te[Be]={}),Te=je[te.uniqueID]||(je[te.uniqueID]={}),D&&D===te.nodeName.toLowerCase())te=te[I]||te;else{if((ge=Te[B])&&ge[0]===xt&&ge[1]===J)return me[2]=ge[2];if(Te[B]=me,me[2]=p(te,pe,he))return!0}return!1}}function Ri(p){return p.length>1?function(b,E,I){for(var D=p.length;D--;)if(!p[D](b,E,I))return!1;return!0}:p[0]}function Ea(p,b,E){for(var I=0,D=b.length;I<D;I++)He(p,b[I],E);return E}function kn(p,b,E,I,D){for(var B,U=[],J=0,te=p.length,pe=b!=null;J<te;J++)(B=p[J])&&(!E||E(B,I,D))&&(U.push(B),pe&&b.push(J));return U}function Mi(p,b,E,I,D,B){return I&&!I[Be]&&(I=Mi(I)),D&&!D[Be]&&(D=Mi(D,B)),Ot(function(U,J,te,pe){var he,ge,Te,je=[],me=[],st=J.length,dt=U||Ea(b||"*",te.nodeType?[te]:te,[]),Tt=p&&(U||!b)?kn(dt,je,p,te,pe):dt,Xe=E?D||(U?p:st||I)?[]:J:Tt;if(E&&E(Tt,Xe,te,pe),I)for(he=kn(Xe,me),I(he,[],te,pe),ge=he.length;ge--;)(Te=he[ge])&&(Xe[me[ge]]=!(Tt[me[ge]]=Te));if(U){if(D||p){if(D){for(he=[],ge=Xe.length;ge--;)(Te=Xe[ge])&&he.push(Tt[ge]=Te);D(null,Xe=[],he,pe)}for(ge=Xe.length;ge--;)(Te=Xe[ge])&&(he=D?hr(U,Te):je[ge])>-1&&(U[he]=!(J[he]=Te))}}else Xe=kn(Xe===J?Xe.splice(st,Xe.length):Xe),D?D(null,J,Xe,pe):nr.apply(J,Xe)})}function Fi(p){for(var b,E,I,D=p.length,B=s.relative[p[0].type],U=B||s.relative[" "],J=B?1:0,te=An(function(ge){return ge===b},U,!0),pe=An(function(ge){return hr(b,ge)>-1},U,!0),he=[function(ge,Te,je){var me=!B&&(je||Te!==L)||((b=Te).nodeType?te(ge,Te,je):pe(ge,Te,je));return b=null,me}];J<D;J++)if(E=s.relative[p[J].type])he=[An(Ri(he),E)];else{if(E=s.filter[p[J].type].apply(null,p[J].matches),E[Be]){for(I=++J;I<D&&!s.relative[p[I].type];I++);return Mi(J>1&&Ri(he),J>1&&Tn(p.slice(0,J-1).concat({value:p[J-2].type===" "?"*":""})).replace(_n,"$1"),E,J<I&&Fi(p.slice(J,I)),I<D&&Fi(p=p.slice(I)),I<D&&Tn(p))}he.push(E)}return Ri(he)}function Ta(p,b){var E=b.length>0,I=p.length>0,D=function(B,U,J,te,pe){var he,ge,Te,je=0,me="0",st=B&&[],dt=[],Tt=L,Xe=B||I&&s.find.TAG("*",pe),qr=xt+=Tt==null?1:Math.random()||.1,Gr=Xe.length;for(pe&&(L=U==F||U||pe);me!==Gr&&(he=Xe[me])!=null;me++){if(I&&he){for(ge=0,!U&&he.ownerDocument!=F&&(P(he),J=!xe);Te=p[ge++];)if(Te(he,U||F,J)){te.push(he);break}pe&&(xt=qr)}E&&((he=!Te&&he)&&je--,B&&st.push(he))}if(je+=me,E&&me!==je){for(ge=0;Te=b[ge++];)Te(st,dt,U,J);if(B){if(je>0)for(;me--;)st[me]||dt[me]||(dt[me]=rr.call(te));dt=kn(dt)}nr.apply(te,dt),pe&&!B&&dt.length>0&&je+b.length>1&&He.uniqueSort(te)}return pe&&(xt=qr,L=Tt),st};return E?Ot(D):D}return x=He.compile=function(p,b){var E,I=[],D=[],B=wn[p+" "];if(!B){for(b||(b=c(p)),E=b.length;E--;)B=Fi(b[E]),B[Be]?I.push(B):D.push(B);B=wn(p,Ta(D,I)),B.selector=p}return B},v=He.select=function(p,b,E,I){var D,B,U,J,te,pe=typeof p=="function"&&p,he=!I&&c(p=pe.selector||p);if(E=E||[],he.length===1){if(B=he[0]=he[0].slice(0),B.length>2&&(U=B[0]).type==="ID"&&b.nodeType===9&&xe&&s.relative[B[1].type]){if(b=(s.find.ID(U.matches[0].replace(Gt,Xt),b)||[])[0],b)pe&&(b=b.parentNode);else return E;p=p.slice(B.shift().value.length)}for(D=Cn.needsContext.test(p)?0:B.length;D--&&(U=B[D],!s.relative[J=U.type]);)if((te=s.find[J])&&(I=te(U.matches[0].replace(Gt,Xt),Di.test(B[0].type)&&Pi(b.parentNode)||b))){if(B.splice(D,1),p=I.length&&Tn(B),!p)return nr.apply(E,I),E;break}}return(pe||x(p,he))(I,b,!xe,E,!b||Di.test(p)&&Pi(b.parentNode)||b),E},n.sortStable=Be.split("").sort(cr).join("")===Be,n.detectDuplicates=!!j,P(),n.sortDetached=Pt(function(p){return p.compareDocumentPosition(F.createElement("fieldset"))&1}),Pt(function(p){return p.innerHTML="<a href='#'></a>",p.firstChild.getAttribute("href")==="#"})||Li("type|href|height|width",function(p,b,E){if(!E)return p.getAttribute(b,b.toLowerCase()==="type"?1:2)}),(!n.attributes||!Pt(function(p){return p.innerHTML="<input/>",p.firstChild.setAttribute("value",""),p.firstChild.getAttribute("value")===""}))&&Li("value",function(p,b,E){if(!E&&p.nodeName.toLowerCase()==="input")return p.defaultValue}),Pt(function(p){return p.getAttribute("disabled")==null})||Li(Ai,function(p,b,E){var I;if(!E)return p[b]===!0?b.toLowerCase():(I=p.getAttributeNode(b))&&I.specified?I.value:null}),He}(f);a.find=M,a.expr=M.selectors,a.expr[":"]=a.expr.pseudos,a.uniqueSort=a.unique=M.uniqueSort,a.text=M.getText,a.isXMLDoc=M.isXML,a.contains=M.contains,a.escapeSelector=M.escape;var Z=function(e,r,n){for(var s=[],o=n!==void 0;(e=e[r])&&e.nodeType!==9;)if(e.nodeType===1){if(o&&a(e).is(n))break;s.push(e)}return s},de=function(e,r){for(var n=[];e;e=e.nextSibling)e.nodeType===1&&e!==r&&n.push(e);return n},Le=a.expr.match.needsContext;function Ce(e,r){return e.nodeName&&e.nodeName.toLowerCase()===r.toLowerCase()}var Ee=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Je(e,r,n){return V(r)?a.grep(e,function(s,o){return!!r.call(s,o,s)!==n}):r.nodeType?a.grep(e,function(s){return s===r!==n}):typeof r!="string"?a.grep(e,function(s){return C.call(r,s)>-1!==n}):a.filter(r,e,n)}a.filter=function(e,r,n){var s=r[0];return n&&(e=":not("+e+")"),r.length===1&&s.nodeType===1?a.find.matchesSelector(s,e)?[s]:[]:a.find.matches(e,a.grep(r,function(o){return o.nodeType===1}))},a.fn.extend({find:function(e){var r,n,s=this.length,o=this;if(typeof e!="string")return this.pushStack(a(e).filter(function(){for(r=0;r<s;r++)if(a.contains(o[r],this))return!0}));for(n=this.pushStack([]),r=0;r<s;r++)a.find(e,o[r],n);return s>1?a.uniqueSort(n):n},filter:function(e){return this.pushStack(Je(this,e||[],!1))},not:function(e){return this.pushStack(Je(this,e||[],!0))},is:function(e){return!!Je(this,typeof e=="string"&&Le.test(e)?a(e):e||[],!1).length}});var et,gt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,wt=a.fn.init=function(e,r,n){var s,o;if(!e)return this;if(n=n||et,typeof e=="string")if(e[0]==="<"&&e[e.length-1]===">"&&e.length>=3?s=[null,e,null]:s=gt.exec(e),s&&(s[1]||!r))if(s[1]){if(r=r instanceof a?r[0]:r,a.merge(this,a.parseHTML(s[1],r&&r.nodeType?r.ownerDocument||r:ie,!0)),Ee.test(s[1])&&a.isPlainObject(r))for(s in r)V(this[s])?this[s](r[s]):this.attr(s,r[s]);return this}else return o=ie.getElementById(s[2]),o&&(this[0]=o,this.length=1),this;else return!r||r.jquery?(r||n).find(e):this.constructor(r).find(e);else{if(e.nodeType)return this[0]=e,this.length=1,this;if(V(e))return n.ready!==void 0?n.ready(e):e(a)}return a.makeArray(e,this)};wt.prototype=a.fn,et=a(ie);var Nt=/^(?:parents|prev(?:Until|All))/,vt={children:!0,contents:!0,next:!0,prev:!0};a.fn.extend({has:function(e){var r=a(e,this),n=r.length;return this.filter(function(){for(var s=0;s<n;s++)if(a.contains(this,r[s]))return!0})},closest:function(e,r){var n,s=0,o=this.length,l=[],c=typeof e!="string"&&a(e);if(!Le.test(e)){for(;s<o;s++)for(n=this[s];n&&n!==r;n=n.parentNode)if(n.nodeType<11&&(c?c.index(n)>-1:n.nodeType===1&&a.find.matchesSelector(n,e))){l.push(n);break}}return this.pushStack(l.length>1?a.uniqueSort(l):l)},index:function(e){return e?typeof e=="string"?C.call(a(e),this[0]):C.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,r){return this.pushStack(a.uniqueSort(a.merge(this.get(),a(e,r))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function kt(e,r){for(;(e=e[r])&&e.nodeType!==1;);return e}a.each({parent:function(e){var r=e.parentNode;return r&&r.nodeType!==11?r:null},parents:function(e){return Z(e,"parentNode")},parentsUntil:function(e,r,n){return Z(e,"parentNode",n)},next:function(e){return kt(e,"nextSibling")},prev:function(e){return kt(e,"previousSibling")},nextAll:function(e){return Z(e,"nextSibling")},prevAll:function(e){return Z(e,"previousSibling")},nextUntil:function(e,r,n){return Z(e,"nextSibling",n)},prevUntil:function(e,r,n){return Z(e,"previousSibling",n)},siblings:function(e){return de((e.parentNode||{}).firstChild,e)},children:function(e){return de(e.firstChild)},contents:function(e){return e.contentDocument!=null&&u(e.contentDocument)?e.contentDocument:(Ce(e,"template")&&(e=e.content||e),a.merge([],e.childNodes))}},function(e,r){a.fn[e]=function(n,s){var o=a.map(this,r,n);return e.slice(-5)!=="Until"&&(s=n),s&&typeof s=="string"&&(o=a.filter(s,o)),this.length>1&&(vt[e]||a.uniqueSort(o),Nt.test(e)&&o.reverse()),this.pushStack(o)}});var fe=/[^\x20\t\r\n\f]+/g;function ke(e){var r={};return a.each(e.match(fe)||[],function(n,s){r[s]=!0}),r}a.Callbacks=function(e){e=typeof e=="string"?ke(e):a.extend({},e);var r,n,s,o,l=[],c=[],x=-1,v=function(){for(o=o||e.once,s=r=!0;c.length;x=-1)for(n=c.shift();++x<l.length;)l[x].apply(n[0],n[1])===!1&&e.stopOnFalse&&(x=l.length,n=!1);e.memory||(n=!1),r=!1,o&&(n?l=[]:l="")},L={add:function(){return l&&(n&&!r&&(x=l.length-1,c.push(n)),function R(j){a.each(j,function(P,F){V(F)?(!e.unique||!L.has(F))&&l.push(F):F&&F.length&&Fe(F)!=="string"&&R(F)})}(arguments),n&&!r&&v()),this},remove:function(){return a.each(arguments,function(R,j){for(var P;(P=a.inArray(j,l,P))>-1;)l.splice(P,1),P<=x&&x--}),this},has:function(R){return R?a.inArray(R,l)>-1:l.length>0},empty:function(){return l&&(l=[]),this},disable:function(){return o=c=[],l=n="",this},disabled:function(){return!l},lock:function(){return o=c=[],!n&&!r&&(l=n=""),this},locked:function(){return!!o},fireWith:function(R,j){return o||(j=j||[],j=[R,j.slice?j.slice():j],c.push(j),r||v()),this},fire:function(){return L.fireWith(this,arguments),this},fired:function(){return!!s}};return L};function ye(e){return e}function ve(e){throw e}function Pe(e,r,n,s){var o;try{e&&V(o=e.promise)?o.call(e).done(r).fail(n):e&&V(o=e.then)?o.call(e,r,n):r.apply(void 0,[e].slice(s))}catch(l){n.apply(void 0,[l])}}a.extend({Deferred:function(e){var r=[["notify","progress",a.Callbacks("memory"),a.Callbacks("memory"),2],["resolve","done",a.Callbacks("once memory"),a.Callbacks("once memory"),0,"resolved"],["reject","fail",a.Callbacks("once memory"),a.Callbacks("once memory"),1,"rejected"]],n="pending",s={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(l){return s.then(null,l)},pipe:function(){var l=arguments;return a.Deferred(function(c){a.each(r,function(x,v){var L=V(l[v[4]])&&l[v[4]];o[v[1]](function(){var R=L&&L.apply(this,arguments);R&&V(R.promise)?R.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[v[0]+"With"](this,L?[R]:arguments)})}),l=null}).promise()},then:function(l,c,x){var v=0;function L(R,j,P,F){return function(){var ce=this,xe=arguments,le=function(){var rt,Ct;if(!(R<v)){if(rt=P.apply(ce,xe),rt===j.promise())throw new TypeError("Thenable self-resolution");Ct=rt&&(typeof rt=="object"||typeof rt=="function")&&rt.then,V(Ct)?F?Ct.call(rt,L(v,j,ye,F),L(v,j,ve,F)):(v++,Ct.call(rt,L(v,j,ye,F),L(v,j,ve,F),L(v,j,ye,j.notifyWith))):(P!==ye&&(ce=void 0,xe=[rt]),(F||j.resolveWith)(ce,xe))}},it=F?le:function(){try{le()}catch(rt){a.Deferred.exceptionHook&&a.Deferred.exceptionHook(rt,it.stackTrace),R+1>=v&&(P!==ve&&(ce=void 0,xe=[rt]),j.rejectWith(ce,xe))}};R?it():(a.Deferred.getStackHook&&(it.stackTrace=a.Deferred.getStackHook()),f.setTimeout(it))}}return a.Deferred(function(R){r[0][3].add(L(0,R,V(x)?x:ye,R.notifyWith)),r[1][3].add(L(0,R,V(l)?l:ye)),r[2][3].add(L(0,R,V(c)?c:ve))}).promise()},promise:function(l){return l!=null?a.extend(l,s):s}},o={};return a.each(r,function(l,c){var x=c[2],v=c[5];s[c[1]]=x.add,v&&x.add(function(){n=v},r[3-l][2].disable,r[3-l][3].disable,r[0][2].lock,r[0][3].lock),x.add(c[3].fire),o[c[0]]=function(){return o[c[0]+"With"](this===o?void 0:this,arguments),this},o[c[0]+"With"]=x.fireWith}),s.promise(o),e&&e.call(o,o),o},when:function(e){var r=arguments.length,n=r,s=Array(n),o=d.call(arguments),l=a.Deferred(),c=function(x){return function(v){s[x]=this,o[x]=arguments.length>1?d.call(arguments):v,--r||l.resolveWith(s,o)}};if(r<=1&&(Pe(e,l.done(c(n)).resolve,l.reject,!r),l.state()==="pending"||V(o[n]&&o[n].then)))return l.then();for(;n--;)Pe(o[n],c(n),l.reject);return l.promise()}});var ut=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;a.Deferred.exceptionHook=function(e,r){f.console&&f.console.warn&&e&&ut.test(e.name)&&f.console.warn("jQuery.Deferred exception: "+e.message,e.stack,r)},a.readyException=function(e){f.setTimeout(function(){throw e})};var De=a.Deferred();a.fn.ready=function(e){return De.then(e).catch(function(r){a.readyException(r)}),this},a.extend({isReady:!1,readyWait:1,ready:function(e){(e===!0?--a.readyWait:a.isReady)||(a.isReady=!0,!(e!==!0&&--a.readyWait>0)&&De.resolveWith(ie,[a]))}}),a.ready.then=De.then;function Ve(){ie.removeEventListener("DOMContentLoaded",Ve),f.removeEventListener("load",Ve),a.ready()}ie.readyState==="complete"||ie.readyState!=="loading"&&!ie.documentElement.doScroll?f.setTimeout(a.ready):(ie.addEventListener("DOMContentLoaded",Ve),f.addEventListener("load",Ve));var qe=function(e,r,n,s,o,l,c){var x=0,v=e.length,L=n==null;if(Fe(n)==="object"){o=!0;for(x in n)qe(e,r,x,n[x],!0,l,c)}else if(s!==void 0&&(o=!0,V(s)||(c=!0),L&&(c?(r.call(e,s),r=null):(L=r,r=function(R,j,P){return L.call(a(R),P)})),r))for(;x<v;x++)r(e[x],n,c?s:s.call(e[x],x,r(e[x],n)));return o?e:L?r.call(e):v?r(e[0],n):l},ct=/^-ms-/,or=/-([a-z])/g;function Zt(e,r){return r.toUpperCase()}function bt(e){return e.replace(ct,"ms-").replace(or,Zt)}var _t=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};function Ht(){this.expando=a.expando+Ht.uid++}Ht.uid=1,Ht.prototype={cache:function(e){var r=e[this.expando];return r||(r={},_t(e)&&(e.nodeType?e[this.expando]=r:Object.defineProperty(e,this.expando,{value:r,configurable:!0}))),r},set:function(e,r,n){var s,o=this.cache(e);if(typeof r=="string")o[bt(r)]=n;else for(s in r)o[bt(s)]=r[s];return o},get:function(e,r){return r===void 0?this.cache(e):e[this.expando]&&e[this.expando][bt(r)]},access:function(e,r,n){return r===void 0||r&&typeof r=="string"&&n===void 0?this.get(e,r):(this.set(e,r,n),n!==void 0?n:r)},remove:function(e,r){var n,s=e[this.expando];if(s!==void 0){if(r!==void 0)for(Array.isArray(r)?r=r.map(bt):(r=bt(r),r=r in s?[r]:r.match(fe)||[]),n=r.length;n--;)delete s[r[n]];(r===void 0||a.isEmptyObject(s))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var r=e[this.expando];return r!==void 0&&!a.isEmptyObject(r)}};var ue=new Ht,Ue=new Ht,yr=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,xr=/[A-Z]/g;function jt(e){return e==="true"?!0:e==="false"?!1:e==="null"?null:e===+e+""?+e:yr.test(e)?JSON.parse(e):e}function Jt(e,r,n){var s;if(n===void 0&&e.nodeType===1)if(s="data-"+r.replace(xr,"-$&").toLowerCase(),n=e.getAttribute(s),typeof n=="string"){try{n=jt(n)}catch(o){}Ue.set(e,r,n)}else n=void 0;return n}a.extend({hasData:function(e){return Ue.hasData(e)||ue.hasData(e)},data:function(e,r,n){return Ue.access(e,r,n)},removeData:function(e,r){Ue.remove(e,r)},_data:function(e,r,n){return ue.access(e,r,n)},_removeData:function(e,r){ue.remove(e,r)}}),a.fn.extend({data:function(e,r){var n,s,o,l=this[0],c=l&&l.attributes;if(e===void 0){if(this.length&&(o=Ue.get(l),l.nodeType===1&&!ue.get(l,"hasDataAttrs"))){for(n=c.length;n--;)c[n]&&(s=c[n].name,s.indexOf("data-")===0&&(s=bt(s.slice(5)),Jt(l,s,o[s])));ue.set(l,"hasDataAttrs",!0)}return o}return typeof e=="object"?this.each(function(){Ue.set(this,e)}):qe(this,function(x){var v;if(l&&x===void 0)return v=Ue.get(l,e),v!==void 0||(v=Jt(l,e),v!==void 0)?v:void 0;this.each(function(){Ue.set(this,e,x)})},null,r,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Ue.remove(this,e)})}}),a.extend({queue:function(e,r,n){var s;if(e)return r=(r||"fx")+"queue",s=ue.get(e,r),n&&(!s||Array.isArray(n)?s=ue.access(e,r,a.makeArray(n)):s.push(n)),s||[]},dequeue:function(e,r){r=r||"fx";var n=a.queue(e,r),s=n.length,o=n.shift(),l=a._queueHooks(e,r),c=function(){a.dequeue(e,r)};o==="inprogress"&&(o=n.shift(),s--),o&&(r==="fx"&&n.unshift("inprogress"),delete l.stop,o.call(e,c,l)),!s&&l&&l.empty.fire()},_queueHooks:function(e,r){var n=r+"queueHooks";return ue.get(e,n)||ue.access(e,n,{empty:a.Callbacks("once memory").add(function(){ue.remove(e,[r+"queue",n])})})}}),a.fn.extend({queue:function(e,r){var n=2;return typeof e!="string"&&(r=e,e="fx",n--),arguments.length<n?a.queue(this[0],e):r===void 0?this:this.each(function(){var s=a.queue(this,e,r);a._queueHooks(this,e),e==="fx"&&s[0]!=="inprogress"&&a.dequeue(this,e)})},dequeue:function(e){return this.each(function(){a.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,r){var n,s=1,o=a.Deferred(),l=this,c=this.length,x=function(){--s||o.resolveWith(l,[l])};for(typeof e!="string"&&(r=e,e=void 0),e=e||"fx";c--;)n=ue.get(l[c],e+"queueHooks"),n&&n.empty&&(s++,n.empty.add(x));return x(),o.promise(r)}});var Ut=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,It=new RegExp("^(?:([+-])=|)("+Ut+")([a-z%]*)$","i"),yt=["Top","Right","Bottom","Left"],at=ie.documentElement,Dt=function(e){return a.contains(e.ownerDocument,e)},Sr={composed:!0};at.getRootNode&&(Dt=function(e){return a.contains(e.ownerDocument,e)||e.getRootNode(Sr)===e.ownerDocument});var zt=function(e,r){return e=r||e,e.style.display==="none"||e.style.display===""&&Dt(e)&&a.css(e,"display")==="none"};function re(e,r,n,s){var o,l,c=20,x=s?function(){return s.cur()}:function(){return a.css(e,r,"")},v=x(),L=n&&n[3]||(a.cssNumber[r]?"":"px"),R=e.nodeType&&(a.cssNumber[r]||L!=="px"&&+v)&&It.exec(a.css(e,r));if(R&&R[3]!==L){for(v=v/2,L=L||R[3],R=+v||1;c--;)a.style(e,r,R+L),(1-l)*(1-(l=x()/v||.5))<=0&&(c=0),R=R/l;R=R*2,a.style(e,r,R+L),n=n||[]}return n&&(R=+R||+v||0,o=n[1]?R+(n[1]+1)*n[2]:+n[2],s&&(s.unit=L,s.start=R,s.end=o)),o}var K={};function ee(e){var r,n=e.ownerDocument,s=e.nodeName,o=K[s];return o||(r=n.body.appendChild(n.createElement(s)),o=a.css(r,"display"),r.parentNode.removeChild(r),o==="none"&&(o="block"),K[s]=o,o)}function ae(e,r){for(var n,s,o=[],l=0,c=e.length;l<c;l++)s=e[l],s.style&&(n=s.style.display,r?(n==="none"&&(o[l]=ue.get(s,"display")||null,o[l]||(s.style.display="")),s.style.display===""&&zt(s)&&(o[l]=ee(s))):n!=="none"&&(o[l]="none",ue.set(s,"display",n)));for(l=0;l<c;l++)o[l]!=null&&(e[l].style.display=o[l]);return e}a.fn.extend({show:function(){return ae(this,!0)},hide:function(){return ae(this)},toggle:function(e){return typeof e=="boolean"?e?this.show():this.hide():this.each(function(){zt(this)?a(this).show():a(this).hide()})}});var ze=/^(?:checkbox|radio)$/i,$e=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,nt=/^$|^module$|\/(?:java|ecma)script/i;(function(){var e=ie.createDocumentFragment(),r=e.appendChild(ie.createElement("div")),n=ie.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),r.appendChild(n),q.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,r.innerHTML="<textarea>x</textarea>",q.noCloneChecked=!!r.cloneNode(!0).lastChild.defaultValue,r.innerHTML="<option></option>",q.option=!!r.lastChild})();var Ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ge.tbody=Ge.tfoot=Ge.colgroup=Ge.caption=Ge.thead,Ge.th=Ge.td,q.option||(Ge.optgroup=Ge.option=[1,"<select multiple='multiple'>","</select>"]);function tt(e,r){var n;return typeof e.getElementsByTagName!="undefined"?n=e.getElementsByTagName(r||"*"):typeof e.querySelectorAll!="undefined"?n=e.querySelectorAll(r||"*"):n=[],r===void 0||r&&Ce(e,r)?a.merge([e],n):n}function Vt(e,r){for(var n=0,s=e.length;n<s;n++)ue.set(e[n],"globalEval",!r||ue.get(r[n],"globalEval"))}var Pr=/<|&#?\w+;/;function Rr(e,r,n,s,o){for(var l,c,x,v,L,R,j=r.createDocumentFragment(),P=[],F=0,ce=e.length;F<ce;F++)if(l=e[F],l||l===0)if(Fe(l)==="object")a.merge(P,l.nodeType?[l]:l);else if(!Pr.test(l))P.push(r.createTextNode(l));else{for(c=c||j.appendChild(r.createElement("div")),x=($e.exec(l)||["",""])[1].toLowerCase(),v=Ge[x]||Ge._default,c.innerHTML=v[1]+a.htmlPrefilter(l)+v[2],R=v[0];R--;)c=c.lastChild;a.merge(P,c.childNodes),c=j.firstChild,c.textContent=""}for(j.textContent="",F=0;l=P[F++];){if(s&&a.inArray(l,s)>-1){o&&o.push(l);continue}if(L=Dt(l),c=tt(j.appendChild(l),"script"),L&&Vt(c),n)for(R=0;l=c[R++];)nt.test(l.type||"")&&n.push(l)}return j}var un=/^([^.]*)(?:\.(.+)|)/;function ht(){return!0}function er(){return!1}function ci(e,r){return e===ln()==(r==="focus")}function ln(){try{return ie.activeElement}catch(e){}}function Mr(e,r,n,s,o,l){var c,x;if(typeof r=="object"){typeof n!="string"&&(s=s||n,n=void 0);for(x in r)Mr(e,x,n,s,r[x],l);return e}if(s==null&&o==null?(o=n,s=n=void 0):o==null&&(typeof n=="string"?(o=s,s=void 0):(o=s,s=n,n=void 0)),o===!1)o=er;else if(!o)return e;return l===1&&(c=o,o=function(v){return a().off(v),c.apply(this,arguments)},o.guid=c.guid||(c.guid=a.guid++)),e.each(function(){a.event.add(this,r,o,s,n)})}a.event={global:{},add:function(e,r,n,s,o){var l,c,x,v,L,R,j,P,F,ce,xe,le=ue.get(e);if(_t(e))for(n.handler&&(l=n,n=l.handler,o=l.selector),o&&a.find.matchesSelector(at,o),n.guid||(n.guid=a.guid++),(v=le.events)||(v=le.events=Object.create(null)),(c=le.handle)||(c=le.handle=function(it){return typeof a!="undefined"&&a.event.triggered!==it.type?a.event.dispatch.apply(e,arguments):void 0}),r=(r||"").match(fe)||[""],L=r.length;L--;)x=un.exec(r[L])||[],F=xe=x[1],ce=(x[2]||"").split(".").sort(),F&&(j=a.event.special[F]||{},F=(o?j.delegateType:j.bindType)||F,j=a.event.special[F]||{},R=a.extend({type:F,origType:xe,data:s,handler:n,guid:n.guid,selector:o,needsContext:o&&a.expr.match.needsContext.test(o),namespace:ce.join(".")},l),(P=v[F])||(P=v[F]=[],P.delegateCount=0,(!j.setup||j.setup.call(e,s,ce,c)===!1)&&e.addEventListener&&e.addEventListener(F,c)),j.add&&(j.add.call(e,R),R.handler.guid||(R.handler.guid=n.guid)),o?P.splice(P.delegateCount++,0,R):P.push(R),a.event.global[F]=!0)},remove:function(e,r,n,s,o){var l,c,x,v,L,R,j,P,F,ce,xe,le=ue.hasData(e)&&ue.get(e);if(!(!le||!(v=le.events))){for(r=(r||"").match(fe)||[""],L=r.length;L--;){if(x=un.exec(r[L])||[],F=xe=x[1],ce=(x[2]||"").split(".").sort(),!F){for(F in v)a.event.remove(e,F+r[L],n,s,!0);continue}for(j=a.event.special[F]||{},F=(s?j.delegateType:j.bindType)||F,P=v[F]||[],x=x[2]&&new RegExp("(^|\\.)"+ce.join("\\.(?:.*\\.|)")+"(\\.|$)"),c=l=P.length;l--;)R=P[l],(o||xe===R.origType)&&(!n||n.guid===R.guid)&&(!x||x.test(R.namespace))&&(!s||s===R.selector||s==="**"&&R.selector)&&(P.splice(l,1),R.selector&&P.delegateCount--,j.remove&&j.remove.call(e,R));c&&!P.length&&((!j.teardown||j.teardown.call(e,ce,le.handle)===!1)&&a.removeEvent(e,F,le.handle),delete v[F])}a.isEmptyObject(v)&&ue.remove(e,"handle events")}},dispatch:function(e){var r,n,s,o,l,c,x=new Array(arguments.length),v=a.event.fix(e),L=(ue.get(this,"events")||Object.create(null))[v.type]||[],R=a.event.special[v.type]||{};for(x[0]=v,r=1;r<arguments.length;r++)x[r]=arguments[r];if(v.delegateTarget=this,!(R.preDispatch&&R.preDispatch.call(this,v)===!1)){for(c=a.event.handlers.call(this,v,L),r=0;(o=c[r++])&&!v.isPropagationStopped();)for(v.currentTarget=o.elem,n=0;(l=o.handlers[n++])&&!v.isImmediatePropagationStopped();)(!v.rnamespace||l.namespace===!1||v.rnamespace.test(l.namespace))&&(v.handleObj=l,v.data=l.data,s=((a.event.special[l.origType]||{}).handle||l.handler).apply(o.elem,x),s!==void 0&&(v.result=s)===!1&&(v.preventDefault(),v.stopPropagation()));return R.postDispatch&&R.postDispatch.call(this,v),v.result}},handlers:function(e,r){var n,s,o,l,c,x=[],v=r.delegateCount,L=e.target;if(v&&L.nodeType&&!(e.type==="click"&&e.button>=1)){for(;L!==this;L=L.parentNode||this)if(L.nodeType===1&&!(e.type==="click"&&L.disabled===!0)){for(l=[],c={},n=0;n<v;n++)s=r[n],o=s.selector+" ",c[o]===void 0&&(c[o]=s.needsContext?a(o,this).index(L)>-1:a.find(o,this,null,[L]).length),c[o]&&l.push(s);l.length&&x.push({elem:L,handlers:l})}}return L=this,v<r.length&&x.push({elem:L,handlers:r.slice(v)}),x},addProp:function(e,r){Object.defineProperty(a.Event.prototype,e,{enumerable:!0,configurable:!0,get:V(r)?function(){if(this.originalEvent)return r(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(n){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:n})}})},fix:function(e){return e[a.expando]?e:new a.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var r=this||e;return ze.test(r.type)&&r.click&&Ce(r,"input")&&wr(r,"click",ht),!1},trigger:function(e){var r=this||e;return ze.test(r.type)&&r.click&&Ce(r,"input")&&wr(r,"click"),!0},_default:function(e){var r=e.target;return ze.test(r.type)&&r.click&&Ce(r,"input")&&ue.get(r,"click")||Ce(r,"a")}},beforeunload:{postDispatch:function(e){e.result!==void 0&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}};function wr(e,r,n){if(!n){ue.get(e,r)===void 0&&a.event.add(e,r,ht);return}ue.set(e,r,!1),a.event.add(e,r,{namespace:!1,handler:function(s){var o,l,c=ue.get(this,r);if(s.isTrigger&1&&this[r]){if(c.length)(a.event.special[r]||{}).delegateType&&s.stopPropagation();else if(c=d.call(arguments),ue.set(this,r,c),o=n(this,r),this[r](),l=ue.get(this,r),c!==l||o?ue.set(this,r,!1):l={},c!==l)return s.stopImmediatePropagation(),s.preventDefault(),l&&l.value}else c.length&&(ue.set(this,r,{value:a.event.trigger(a.extend(c[0],a.Event.prototype),c.slice(1),this)}),s.stopImmediatePropagation())}})}a.removeEvent=function(e,r,n){e.removeEventListener&&e.removeEventListener(r,n)},a.Event=function(e,r){if(!(this instanceof a.Event))return new a.Event(e,r);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===void 0&&e.returnValue===!1?ht:er,this.target=e.target&&e.target.nodeType===3?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,r&&a.extend(this,r),this.timeStamp=e&&e.timeStamp||Date.now(),this[a.expando]=!0},a.Event.prototype={constructor:a.Event,isDefaultPrevented:er,isPropagationStopped:er,isImmediatePropagationStopped:er,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ht,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ht,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ht,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},a.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},a.event.addProp),a.each({focus:"focusin",blur:"focusout"},function(e,r){a.event.special[e]={setup:function(){return wr(this,e,ci),!1},trigger:function(){return wr(this,e),!0},_default:function(n){return ue.get(n.target,e)},delegateType:r}}),a.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,r){a.event.special[e]={delegateType:r,bindType:r,handle:function(n){var s,o=this,l=n.relatedTarget,c=n.handleObj;return(!l||l!==o&&!a.contains(o,l))&&(n.type=c.origType,s=c.handler.apply(this,arguments),n.type=r),s}}}),a.fn.extend({on:function(e,r,n,s){return Mr(this,e,r,n,s)},one:function(e,r,n,s){return Mr(this,e,r,n,s,1)},off:function(e,r,n){var s,o;if(e&&e.preventDefault&&e.handleObj)return s=e.handleObj,a(e.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if(typeof e=="object"){for(o in e)this.off(o,r,e[o]);return this}return(r===!1||typeof r=="function")&&(n=r,r=void 0),n===!1&&(n=er),this.each(function(){a.event.remove(this,e,n,r)})}});var di=/<script|<style|<link/i,hi=/checked\s*(?:[^=]|=\s*.checked.)/i,pi=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function fn(e,r){return Ce(e,"table")&&Ce(r.nodeType!==11?r:r.firstChild,"tr")&&a(e).children("tbody")[0]||e}function mi(e){return e.type=(e.getAttribute("type")!==null)+"/"+e.type,e}function gi(e){return(e.type||"").slice(0,5)==="true/"?e.type=e.type.slice(5):e.removeAttribute("type"),e}function cn(e,r){var n,s,o,l,c,x,v;if(r.nodeType===1){if(ue.hasData(e)&&(l=ue.get(e),v=l.events,v)){ue.remove(r,"handle events");for(o in v)for(n=0,s=v[o].length;n<s;n++)a.event.add(r,o,v[o][n])}Ue.hasData(e)&&(c=Ue.access(e),x=a.extend({},c),Ue.set(r,x))}}function vi(e,r){var n=r.nodeName.toLowerCase();n==="input"&&ze.test(e.type)?r.checked=e.checked:(n==="input"||n==="textarea")&&(r.defaultValue=e.defaultValue)}function $t(e,r,n,s){r=y(r);var o,l,c,x,v,L,R=0,j=e.length,P=j-1,F=r[0],ce=V(F);if(ce||j>1&&typeof F=="string"&&!q.checkClone&&hi.test(F))return e.each(function(xe){var le=e.eq(xe);ce&&(r[0]=F.call(this,xe,le.html())),$t(le,r,n,s)});if(j&&(o=Rr(r,e[0].ownerDocument,!1,e,s),l=o.firstChild,o.childNodes.length===1&&(o=l),l||s)){for(c=a.map(tt(o,"script"),mi),x=c.length;R<j;R++)v=o,R!==P&&(v=a.clone(v,!0,!0),x&&a.merge(c,tt(v,"script"))),n.call(e[R],v,R);if(x)for(L=c[c.length-1].ownerDocument,a.map(c,gi),R=0;R<x;R++)v=c[R],nt.test(v.type||"")&&!ue.access(v,"globalEval")&&a.contains(L,v)&&(v.src&&(v.type||"").toLowerCase()!=="module"?a._evalUrl&&!v.noModule&&a._evalUrl(v.src,{nonce:v.nonce||v.getAttribute("nonce")},L):Ke(v.textContent.replace(pi,""),v,L))}return e}function dn(e,r,n){for(var s,o=r?a.filter(r,e):e,l=0;(s=o[l])!=null;l++)!n&&s.nodeType===1&&a.cleanData(tt(s)),s.parentNode&&(n&&Dt(s)&&Vt(tt(s,"script")),s.parentNode.removeChild(s));return e}a.extend({htmlPrefilter:function(e){return e},clone:function(e,r,n){var s,o,l,c,x=e.cloneNode(!0),v=Dt(e);if(!q.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!a.isXMLDoc(e))for(c=tt(x),l=tt(e),s=0,o=l.length;s<o;s++)vi(l[s],c[s]);if(r)if(n)for(l=l||tt(e),c=c||tt(x),s=0,o=l.length;s<o;s++)cn(l[s],c[s]);else cn(e,x);return c=tt(x,"script"),c.length>0&&Vt(c,!v&&tt(e,"script")),x},cleanData:function(e){for(var r,n,s,o=a.event.special,l=0;(n=e[l])!==void 0;l++)if(_t(n)){if(r=n[ue.expando]){if(r.events)for(s in r.events)o[s]?a.event.remove(n,s):a.removeEvent(n,s,r.handle);n[ue.expando]=void 0}n[Ue.expando]&&(n[Ue.expando]=void 0)}}}),a.fn.extend({detach:function(e){return dn(this,e,!0)},remove:function(e){return dn(this,e)},text:function(e){return qe(this,function(r){return r===void 0?a.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=r)})},null,e,arguments.length)},append:function(){return $t(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var r=fn(this,e);r.appendChild(e)}})},prepend:function(){return $t(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var r=fn(this,e);r.insertBefore(e,r.firstChild)}})},before:function(){return $t(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return $t(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,r=0;(e=this[r])!=null;r++)e.nodeType===1&&(a.cleanData(tt(e,!1)),e.textContent="");return this},clone:function(e,r){return e=e==null?!1:e,r=r==null?e:r,this.map(function(){return a.clone(this,e,r)})},html:function(e){return qe(this,function(r){var n=this[0]||{},s=0,o=this.length;if(r===void 0&&n.nodeType===1)return n.innerHTML;if(typeof r=="string"&&!di.test(r)&&!Ge[($e.exec(r)||["",""])[1].toLowerCase()]){r=a.htmlPrefilter(r);try{for(;s<o;s++)n=this[s]||{},n.nodeType===1&&(a.cleanData(tt(n,!1)),n.innerHTML=r);n=0}catch(l){}}n&&this.empty().append(r)},null,e,arguments.length)},replaceWith:function(){var e=[];return $t(this,arguments,function(r){var n=this.parentNode;a.inArray(this,e)<0&&(a.cleanData(tt(this)),n&&n.replaceChild(r,this))},e)}}),a.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,r){a.fn[e]=function(n){for(var s,o=[],l=a(n),c=l.length-1,x=0;x<=c;x++)s=x===c?this:this.clone(!0),a(l[x])[r](s),g.apply(o,s.get());return this.pushStack(o)}});var Fr=new RegExp("^("+Ut+")(?!px)[a-z%]+$","i"),Nr=/^--/,_r=function(e){var r=e.ownerDocument.defaultView;return(!r||!r.opener)&&(r=f),r.getComputedStyle(e)},hn=function(e,r,n){var s,o,l={};for(o in r)l[o]=e.style[o],e.style[o]=r[o];s=n.call(e);for(o in r)e.style[o]=l[o];return s},bi=new RegExp(yt.join("|"),"i"),pn="[\\x20\\t\\r\\n\\f]",yi=new RegExp("^"+pn+"+|((?:^|[^\\\\])(?:\\\\.)*)"+pn+"+$","g");(function(){function e(){if(L){v.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",L.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",at.appendChild(v).appendChild(L);var R=f.getComputedStyle(L);n=R.top!=="1%",x=r(R.marginLeft)===12,L.style.right="60%",l=r(R.right)===36,s=r(R.width)===36,L.style.position="absolute",o=r(L.offsetWidth/3)===12,at.removeChild(v),L=null}}function r(R){return Math.round(parseFloat(R))}var n,s,o,l,c,x,v=ie.createElement("div"),L=ie.createElement("div");L.style&&(L.style.backgroundClip="content-box",L.cloneNode(!0).style.backgroundClip="",q.clearCloneStyle=L.style.backgroundClip==="content-box",a.extend(q,{boxSizingReliable:function(){return e(),s},pixelBoxStyles:function(){return e(),l},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),x},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var R,j,P,F;return c==null&&(R=ie.createElement("table"),j=ie.createElement("tr"),P=ie.createElement("div"),R.style.cssText="position:absolute;left:-11111px;border-collapse:separate",j.style.cssText="border:1px solid",j.style.height="1px",P.style.height="9px",P.style.display="block",at.appendChild(R).appendChild(j).appendChild(P),F=f.getComputedStyle(j),c=parseInt(F.height,10)+parseInt(F.borderTopWidth,10)+parseInt(F.borderBottomWidth,10)===j.offsetHeight,at.removeChild(R)),c}}))})();function ur(e,r,n){var s,o,l,c,x=Nr.test(r),v=e.style;return n=n||_r(e),n&&(c=n.getPropertyValue(r)||n[r],x&&c&&(c=c.replace(yi,"$1")||void 0),c===""&&!Dt(e)&&(c=a.style(e,r)),!q.pixelBoxStyles()&&Fr.test(c)&&bi.test(r)&&(s=v.width,o=v.minWidth,l=v.maxWidth,v.minWidth=v.maxWidth=v.width=c,c=n.width,v.width=s,v.minWidth=o,v.maxWidth=l)),c!==void 0?c+"":c}function mn(e,r){return{get:function(){if(e()){delete this.get;return}return(this.get=r).apply(this,arguments)}}}var gn=["Webkit","Moz","ms"],vn=ie.createElement("div").style,bn={};function xi(e){for(var r=e[0].toUpperCase()+e.slice(1),n=gn.length;n--;)if(e=gn[n]+r,e in vn)return e}function Ir(e){var r=a.cssProps[e]||bn[e];return r||(e in vn?e:bn[e]=xi(e)||e)}var yn=/^(none|table(?!-c[ea]).+)/,lr={position:"absolute",visibility:"hidden",display:"block"},Or={letterSpacing:"0",fontWeight:"400"};function Kt(e,r,n){var s=It.exec(r);return s?Math.max(0,s[2]-(n||0))+(s[3]||"px"):r}function Br(e,r,n,s,o,l){var c=r==="width"?1:0,x=0,v=0;if(n===(s?"border":"content"))return 0;for(;c<4;c+=2)n==="margin"&&(v+=a.css(e,n+yt[c],!0,o)),s?(n==="content"&&(v-=a.css(e,"padding"+yt[c],!0,o)),n!=="margin"&&(v-=a.css(e,"border"+yt[c]+"Width",!0,o))):(v+=a.css(e,"padding"+yt[c],!0,o),n!=="padding"?v+=a.css(e,"border"+yt[c]+"Width",!0,o):x+=a.css(e,"border"+yt[c]+"Width",!0,o));return!s&&l>=0&&(v+=Math.max(0,Math.ceil(e["offset"+r[0].toUpperCase()+r.slice(1)]-l-v-x-.5))||0),v}function fr(e,r,n){var s=_r(e),o=!q.boxSizingReliable()||n,l=o&&a.css(e,"boxSizing",!1,s)==="border-box",c=l,x=ur(e,r,s),v="offset"+r[0].toUpperCase()+r.slice(1);if(Fr.test(x)){if(!n)return x;x="auto"}return(!q.boxSizingReliable()&&l||!q.reliableTrDimensions()&&Ce(e,"tr")||x==="auto"||!parseFloat(x)&&a.css(e,"display",!1,s)==="inline")&&e.getClientRects().length&&(l=a.css(e,"boxSizing",!1,s)==="border-box",c=v in e,c&&(x=e[v])),x=parseFloat(x)||0,x+Br(e,r,n||(l?"border":"content"),c,s,x)+"px"}a.extend({cssHooks:{opacity:{get:function(e,r){if(r){var n=ur(e,"opacity");return n===""?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,r,n,s){if(!(!e||e.nodeType===3||e.nodeType===8||!e.style)){var o,l,c,x=bt(r),v=Nr.test(r),L=e.style;if(v||(r=Ir(x)),c=a.cssHooks[r]||a.cssHooks[x],n!==void 0){if(l=typeof n,l==="string"&&(o=It.exec(n))&&o[1]&&(n=re(e,r,o),l="number"),n==null||n!==n)return;l==="number"&&!v&&(n+=o&&o[3]||(a.cssNumber[x]?"":"px")),!q.clearCloneStyle&&n===""&&r.indexOf("background")===0&&(L[r]="inherit"),(!c||!("set"in c)||(n=c.set(e,n,s))!==void 0)&&(v?L.setProperty(r,n):L[r]=n)}else return c&&"get"in c&&(o=c.get(e,!1,s))!==void 0?o:L[r]}},css:function(e,r,n,s){var o,l,c,x=bt(r),v=Nr.test(r);return v||(r=Ir(x)),c=a.cssHooks[r]||a.cssHooks[x],c&&"get"in c&&(o=c.get(e,!0,n)),o===void 0&&(o=ur(e,r,s)),o==="normal"&&r in Or&&(o=Or[r]),n===""||n?(l=parseFloat(o),n===!0||isFinite(l)?l||0:o):o}}),a.each(["height","width"],function(e,r){a.cssHooks[r]={get:function(n,s,o){if(s)return yn.test(a.css(n,"display"))&&(!n.getClientRects().length||!n.getBoundingClientRect().width)?hn(n,lr,function(){return fr(n,r,o)}):fr(n,r,o)},set:function(n,s,o){var l,c=_r(n),x=!q.scrollboxSize()&&c.position==="absolute",v=x||o,L=v&&a.css(n,"boxSizing",!1,c)==="border-box",R=o?Br(n,r,o,L,c):0;return L&&x&&(R-=Math.ceil(n["offset"+r[0].toUpperCase()+r.slice(1)]-parseFloat(c[r])-Br(n,r,"border",!1,c)-.5)),R&&(l=It.exec(s))&&(l[3]||"px")!=="px"&&(n.style[r]=s,s=a.css(n,r)),Kt(n,s,R)}}}),a.cssHooks.marginLeft=mn(q.reliableMarginLeft,function(e,r){if(r)return(parseFloat(ur(e,"marginLeft"))||e.getBoundingClientRect().left-hn(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),a.each({margin:"",padding:"",border:"Width"},function(e,r){a.cssHooks[e+r]={expand:function(n){for(var s=0,o={},l=typeof n=="string"?n.split(" "):[n];s<4;s++)o[e+yt[s]+r]=l[s]||l[s-2]||l[0];return o}},e!=="margin"&&(a.cssHooks[e+r].set=Kt)}),a.fn.extend({css:function(e,r){return qe(this,function(n,s,o){var l,c,x={},v=0;if(Array.isArray(s)){for(l=_r(n),c=s.length;v<c;v++)x[s[v]]=a.css(n,s[v],!1,l);return x}return o!==void 0?a.style(n,s,o):a.css(n,s)},e,r,arguments.length>1)}});function ot(e,r,n,s,o){return new ot.prototype.init(e,r,n,s,o)}a.Tween=ot,ot.prototype={constructor:ot,init:function(e,r,n,s,o,l){this.elem=e,this.prop=n,this.easing=o||a.easing._default,this.options=r,this.start=this.now=this.cur(),this.end=s,this.unit=l||(a.cssNumber[n]?"":"px")},cur:function(){var e=ot.propHooks[this.prop];return e&&e.get?e.get(this):ot.propHooks._default.get(this)},run:function(e){var r,n=ot.propHooks[this.prop];return this.options.duration?this.pos=r=a.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=r=e,this.now=(this.end-this.start)*r+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ot.propHooks._default.set(this),this}},ot.prototype.init.prototype=ot.prototype,ot.propHooks={_default:{get:function(e){var r;return e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null?e.elem[e.prop]:(r=a.css(e.elem,e.prop,""),!r||r==="auto"?0:r)},set:function(e){a.fx.step[e.prop]?a.fx.step[e.prop](e):e.elem.nodeType===1&&(a.cssHooks[e.prop]||e.elem.style[Ir(e.prop)]!=null)?a.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},ot.propHooks.scrollTop=ot.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},a.easing={linear:function(e){return e},swing:function(e){return .5-Math.cos(e*Math.PI)/2},_default:"swing"},a.fx=ot.prototype.init,a.fx.step={};var tr,Cr,Vr=/^(?:toggle|show|hide)$/,Si=/queueHooks$/;function Wr(){Cr&&(ie.hidden===!1&&f.requestAnimationFrame?f.requestAnimationFrame(Wr):f.setTimeout(Wr,a.fx.interval),a.fx.tick())}function h(){return f.setTimeout(function(){tr=void 0}),tr=Date.now()}function S(e,r){var n,s=0,o={height:e};for(r=r?1:0;s<4;s+=2-r)n=yt[s],o["margin"+n]=o["padding"+n]=e;return r&&(o.opacity=o.width=e),o}function m(e,r,n){for(var s,o=(_.tweeners[r]||[]).concat(_.tweeners["*"]),l=0,c=o.length;l<c;l++)if(s=o[l].call(n,r,e))return s}function A(e,r,n){var s,o,l,c,x,v,L,R,j="width"in r||"height"in r,P=this,F={},ce=e.style,xe=e.nodeType&&zt(e),le=ue.get(e,"fxshow");n.queue||(c=a._queueHooks(e,"fx"),c.unqueued==null&&(c.unqueued=0,x=c.empty.fire,c.empty.fire=function(){c.unqueued||x()}),c.unqueued++,P.always(function(){P.always(function(){c.unqueued--,a.queue(e,"fx").length||c.empty.fire()})}));for(s in r)if(o=r[s],Vr.test(o)){if(delete r[s],l=l||o==="toggle",o===(xe?"hide":"show"))if(o==="show"&&le&&le[s]!==void 0)xe=!0;else continue;F[s]=le&&le[s]||a.style(e,s)}if(v=!a.isEmptyObject(r),!(!v&&a.isEmptyObject(F))){j&&e.nodeType===1&&(n.overflow=[ce.overflow,ce.overflowX,ce.overflowY],L=le&&le.display,L==null&&(L=ue.get(e,"display")),R=a.css(e,"display"),R==="none"&&(L?R=L:(ae([e],!0),L=e.style.display||L,R=a.css(e,"display"),ae([e]))),(R==="inline"||R==="inline-block"&&L!=null)&&a.css(e,"float")==="none"&&(v||(P.done(function(){ce.display=L}),L==null&&(R=ce.display,L=R==="none"?"":R)),ce.display="inline-block")),n.overflow&&(ce.overflow="hidden",P.always(function(){ce.overflow=n.overflow[0],ce.overflowX=n.overflow[1],ce.overflowY=n.overflow[2]})),v=!1;for(s in F)v||(le?"hidden"in le&&(xe=le.hidden):le=ue.access(e,"fxshow",{display:L}),l&&(le.hidden=!xe),xe&&ae([e],!0),P.done(function(){xe||ae([e]),ue.remove(e,"fxshow");for(s in F)a.style(e,s,F[s])})),v=m(xe?le[s]:0,s,P),s in le||(le[s]=v.start,xe&&(v.end=v.start,v.start=0))}}function k(e,r){var n,s,o,l,c;for(n in e)if(s=bt(n),o=r[s],l=e[n],Array.isArray(l)&&(o=l[1],l=e[n]=l[0]),n!==s&&(e[s]=l,delete e[n]),c=a.cssHooks[s],c&&"expand"in c){l=c.expand(l),delete e[s];for(n in l)n in e||(e[n]=l[n],r[n]=o)}else r[s]=o}function _(e,r,n){var s,o,l=0,c=_.prefilters.length,x=a.Deferred().always(function(){delete v.elem}),v=function(){if(o)return!1;for(var j=tr||h(),P=Math.max(0,L.startTime+L.duration-j),F=P/L.duration||0,ce=1-F,xe=0,le=L.tweens.length;xe<le;xe++)L.tweens[xe].run(ce);return x.notifyWith(e,[L,ce,P]),ce<1&&le?P:(le||x.notifyWith(e,[L,1,0]),x.resolveWith(e,[L]),!1)},L=x.promise({elem:e,props:a.extend({},r),opts:a.extend(!0,{specialEasing:{},easing:a.easing._default},n),originalProperties:r,originalOptions:n,startTime:tr||h(),duration:n.duration,tweens:[],createTween:function(j,P){var F=a.Tween(e,L.opts,j,P,L.opts.specialEasing[j]||L.opts.easing);return L.tweens.push(F),F},stop:function(j){var P=0,F=j?L.tweens.length:0;if(o)return this;for(o=!0;P<F;P++)L.tweens[P].run(1);return j?(x.notifyWith(e,[L,1,0]),x.resolveWith(e,[L,j])):x.rejectWith(e,[L,j]),this}}),R=L.props;for(k(R,L.opts.specialEasing);l<c;l++)if(s=_.prefilters[l].call(L,e,R,L.opts),s)return V(s.stop)&&(a._queueHooks(L.elem,L.opts.queue).stop=s.stop.bind(s)),s;return a.map(R,m,L),V(L.opts.start)&&L.opts.start.call(e,L),L.progress(L.opts.progress).done(L.opts.done,L.opts.complete).fail(L.opts.fail).always(L.opts.always),a.fx.timer(a.extend(v,{elem:e,anim:L,queue:L.opts.queue})),L}a.Animation=a.extend(_,{tweeners:{"*":[function(e,r){var n=this.createTween(e,r);return re(n.elem,e,It.exec(r),n),n}]},tweener:function(e,r){V(e)?(r=e,e=["*"]):e=e.match(fe);for(var n,s=0,o=e.length;s<o;s++)n=e[s],_.tweeners[n]=_.tweeners[n]||[],_.tweeners[n].unshift(r)},prefilters:[A],prefilter:function(e,r){r?_.prefilters.unshift(e):_.prefilters.push(e)}}),a.speed=function(e,r,n){var s=e&&typeof e=="object"?a.extend({},e):{complete:n||!n&&r||V(e)&&e,duration:e,easing:n&&r||r&&!V(r)&&r};return a.fx.off?s.duration=0:typeof s.duration!="number"&&(s.duration in a.fx.speeds?s.duration=a.fx.speeds[s.duration]:s.duration=a.fx.speeds._default),(s.queue==null||s.queue===!0)&&(s.queue="fx"),s.old=s.complete,s.complete=function(){V(s.old)&&s.old.call(this),s.queue&&a.dequeue(this,s.queue)},s},a.fn.extend({fadeTo:function(e,r,n,s){return this.filter(zt).css("opacity",0).show().end().animate({opacity:r},e,n,s)},animate:function(e,r,n,s){var o=a.isEmptyObject(e),l=a.speed(r,n,s),c=function(){var x=_(this,a.extend({},e),l);(o||ue.get(this,"finish"))&&x.stop(!0)};return c.finish=c,o||l.queue===!1?this.each(c):this.queue(l.queue,c)},stop:function(e,r,n){var s=function(o){var l=o.stop;delete o.stop,l(n)};return typeof e!="string"&&(n=r,r=e,e=void 0),r&&this.queue(e||"fx",[]),this.each(function(){var o=!0,l=e!=null&&e+"queueHooks",c=a.timers,x=ue.get(this);if(l)x[l]&&x[l].stop&&s(x[l]);else for(l in x)x[l]&&x[l].stop&&Si.test(l)&&s(x[l]);for(l=c.length;l--;)c[l].elem===this&&(e==null||c[l].queue===e)&&(c[l].anim.stop(n),o=!1,c.splice(l,1));(o||!n)&&a.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var r,n=ue.get(this),s=n[e+"queue"],o=n[e+"queueHooks"],l=a.timers,c=s?s.length:0;for(n.finish=!0,a.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),r=l.length;r--;)l[r].elem===this&&l[r].queue===e&&(l[r].anim.stop(!0),l.splice(r,1));for(r=0;r<c;r++)s[r]&&s[r].finish&&s[r].finish.call(this);delete n.finish})}}),a.each(["toggle","show","hide"],function(e,r){var n=a.fn[r];a.fn[r]=function(s,o,l){return s==null||typeof s=="boolean"?n.apply(this,arguments):this.animate(S(r,!0),s,o,l)}}),a.each({slideDown:S("show"),slideUp:S("hide"),slideToggle:S("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){a.fn[e]=function(n,s,o){return this.animate(r,n,s,o)}}),a.timers=[],a.fx.tick=function(){var e,r=0,n=a.timers;for(tr=Date.now();r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||a.fx.stop(),tr=void 0},a.fx.timer=function(e){a.timers.push(e),a.fx.start()},a.fx.interval=13,a.fx.start=function(){Cr||(Cr=!0,Wr())},a.fx.stop=function(){Cr=null},a.fx.speeds={slow:600,fast:200,_default:400},a.fn.delay=function(e,r){return e=a.fx&&a.fx.speeds[e]||e,r=r||"fx",this.queue(r,function(n,s){var o=f.setTimeout(n,e);s.stop=function(){f.clearTimeout(o)}})},function(){var e=ie.createElement("input"),r=ie.createElement("select"),n=r.appendChild(ie.createElement("option"));e.type="checkbox",q.checkOn=e.value!=="",q.optSelected=n.selected,e=ie.createElement("input"),e.value="t",e.type="radio",q.radioValue=e.value==="t"}();var O,H=a.expr.attrHandle;a.fn.extend({attr:function(e,r){return qe(this,a.attr,e,r,arguments.length>1)},removeAttr:function(e){return this.each(function(){a.removeAttr(this,e)})}}),a.extend({attr:function(e,r,n){var s,o,l=e.nodeType;if(!(l===3||l===8||l===2)){if(typeof e.getAttribute=="undefined")return a.prop(e,r,n);if((l!==1||!a.isXMLDoc(e))&&(o=a.attrHooks[r.toLowerCase()]||(a.expr.match.bool.test(r)?O:void 0)),n!==void 0){if(n===null){a.removeAttr(e,r);return}return o&&"set"in o&&(s=o.set(e,n,r))!==void 0?s:(e.setAttribute(r,n+""),n)}return o&&"get"in o&&(s=o.get(e,r))!==null?s:(s=a.find.attr(e,r),s==null?void 0:s)}},attrHooks:{type:{set:function(e,r){if(!q.radioValue&&r==="radio"&&Ce(e,"input")){var n=e.value;return e.setAttribute("type",r),n&&(e.value=n),r}}}},removeAttr:function(e,r){var n,s=0,o=r&&r.match(fe);if(o&&e.nodeType===1)for(;n=o[s++];)e.removeAttribute(n)}}),O={set:function(e,r,n){return r===!1?a.removeAttr(e,n):e.setAttribute(n,n),n}},a.each(a.expr.match.bool.source.match(/\w+/g),function(e,r){var n=H[r]||a.find.attr;H[r]=function(s,o,l){var c,x,v=o.toLowerCase();return l||(x=H[v],H[v]=c,c=n(s,o,l)!=null?v:null,H[v]=x),c}});var G=/^(?:input|select|textarea|button)$/i,X=/^(?:a|area)$/i;a.fn.extend({prop:function(e,r){return qe(this,a.prop,e,r,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[a.propFix[e]||e]})}}),a.extend({prop:function(e,r,n){var s,o,l=e.nodeType;if(!(l===3||l===8||l===2))return(l!==1||!a.isXMLDoc(e))&&(r=a.propFix[r]||r,o=a.propHooks[r]),n!==void 0?o&&"set"in o&&(s=o.set(e,n,r))!==void 0?s:e[r]=n:o&&"get"in o&&(s=o.get(e,r))!==null?s:e[r]},propHooks:{tabIndex:{get:function(e){var r=a.find.attr(e,"tabindex");return r?parseInt(r,10):G.test(e.nodeName)||X.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),q.optSelected||(a.propHooks.selected={get:function(e){var r=e.parentNode;return r&&r.parentNode&&r.parentNode.selectedIndex,null},set:function(e){var r=e.parentNode;r&&(r.selectedIndex,r.parentNode&&r.parentNode.selectedIndex)}}),a.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){a.propFix[this.toLowerCase()]=this});function Y(e){var r=e.match(fe)||[];return r.join(" ")}function ne(e){return e.getAttribute&&e.getAttribute("class")||""}function we(e){return Array.isArray(e)?e:typeof e=="string"?e.match(fe)||[]:[]}a.fn.extend({addClass:function(e){var r,n,s,o,l,c;return V(e)?this.each(function(x){a(this).addClass(e.call(this,x,ne(this)))}):(r=we(e),r.length?this.each(function(){if(s=ne(this),n=this.nodeType===1&&" "+Y(s)+" ",n){for(l=0;l<r.length;l++)o=r[l],n.indexOf(" "+o+" ")<0&&(n+=o+" ");c=Y(n),s!==c&&this.setAttribute("class",c)}}):this)},removeClass:function(e){var r,n,s,o,l,c;return V(e)?this.each(function(x){a(this).removeClass(e.call(this,x,ne(this)))}):arguments.length?(r=we(e),r.length?this.each(function(){if(s=ne(this),n=this.nodeType===1&&" "+Y(s)+" ",n){for(l=0;l<r.length;l++)for(o=r[l];n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");c=Y(n),s!==c&&this.setAttribute("class",c)}}):this):this.attr("class","")},toggleClass:function(e,r){var n,s,o,l,c=typeof e,x=c==="string"||Array.isArray(e);return V(e)?this.each(function(v){a(this).toggleClass(e.call(this,v,ne(this),r),r)}):typeof r=="boolean"&&x?r?this.addClass(e):this.removeClass(e):(n=we(e),this.each(function(){if(x)for(l=a(this),o=0;o<n.length;o++)s=n[o],l.hasClass(s)?l.removeClass(s):l.addClass(s);else(e===void 0||c==="boolean")&&(s=ne(this),s&&ue.set(this,"__className__",s),this.setAttribute&&this.setAttribute("class",s||e===!1?"":ue.get(this,"__className__")||""))}))},hasClass:function(e){var r,n,s=0;for(r=" "+e+" ";n=this[s++];)if(n.nodeType===1&&(" "+Y(ne(n))+" ").indexOf(r)>-1)return!0;return!1}});var Ne=/\r/g;a.fn.extend({val:function(e){var r,n,s,o=this[0];return arguments.length?(s=V(e),this.each(function(l){var c;this.nodeType===1&&(s?c=e.call(this,l,a(this).val()):c=e,c==null?c="":typeof c=="number"?c+="":Array.isArray(c)&&(c=a.map(c,function(x){return x==null?"":x+""})),r=a.valHooks[this.type]||a.valHooks[this.nodeName.toLowerCase()],(!r||!("set"in r)||r.set(this,c,"value")===void 0)&&(this.value=c))})):o?(r=a.valHooks[o.type]||a.valHooks[o.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(o,"value"))!==void 0?n:(n=o.value,typeof n=="string"?n.replace(Ne,""):n==null?"":n)):void 0}}),a.extend({valHooks:{option:{get:function(e){var r=a.find.attr(e,"value");return r!=null?r:Y(a.text(e))}},select:{get:function(e){var r,n,s,o=e.options,l=e.selectedIndex,c=e.type==="select-one",x=c?null:[],v=c?l+1:o.length;for(l<0?s=v:s=c?l:0;s<v;s++)if(n=o[s],(n.selected||s===l)&&!n.disabled&&(!n.parentNode.disabled||!Ce(n.parentNode,"optgroup"))){if(r=a(n).val(),c)return r;x.push(r)}return x},set:function(e,r){for(var n,s,o=e.options,l=a.makeArray(r),c=o.length;c--;)s=o[c],(s.selected=a.inArray(a.valHooks.option.get(s),l)>-1)&&(n=!0);return n||(e.selectedIndex=-1),l}}}}),a.each(["radio","checkbox"],function(){a.valHooks[this]={set:function(e,r){if(Array.isArray(r))return e.checked=a.inArray(a(e).val(),r)>-1}},q.checkOn||(a.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})}),q.focusin="onfocusin"in f;var Ie=/^(?:focusinfocus|focusoutblur)$/,Qe=function(e){e.stopPropagation()};a.extend(a.event,{trigger:function(e,r,n,s){var o,l,c,x,v,L,R,j,P=[n||ie],F=W.call(e,"type")?e.type:e,ce=W.call(e,"namespace")?e.namespace.split("."):[];if(l=j=c=n=n||ie,!(n.nodeType===3||n.nodeType===8)&&!Ie.test(F+a.event.triggered)&&(F.indexOf(".")>-1&&(ce=F.split("."),F=ce.shift(),ce.sort()),v=F.indexOf(":")<0&&"on"+F,e=e[a.expando]?e:new a.Event(F,typeof e=="object"&&e),e.isTrigger=s?2:3,e.namespace=ce.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+ce.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),r=r==null?[e]:a.makeArray(r,[e]),R=a.event.special[F]||{},!(!s&&R.trigger&&R.trigger.apply(n,r)===!1))){if(!s&&!R.noBubble&&!oe(n)){for(x=R.delegateType||F,Ie.test(x+F)||(l=l.parentNode);l;l=l.parentNode)P.push(l),c=l;c===(n.ownerDocument||ie)&&P.push(c.defaultView||c.parentWindow||f)}for(o=0;(l=P[o++])&&!e.isPropagationStopped();)j=l,e.type=o>1?x:R.bindType||F,L=(ue.get(l,"events")||Object.create(null))[e.type]&&ue.get(l,"handle"),L&&L.apply(l,r),L=v&&l[v],L&&L.apply&&_t(l)&&(e.result=L.apply(l,r),e.result===!1&&e.preventDefault());return e.type=F,!s&&!e.isDefaultPrevented()&&(!R._default||R._default.apply(P.pop(),r)===!1)&&_t(n)&&v&&V(n[F])&&!oe(n)&&(c=n[v],c&&(n[v]=null),a.event.triggered=F,e.isPropagationStopped()&&j.addEventListener(F,Qe),n[F](),e.isPropagationStopped()&&j.removeEventListener(F,Qe),a.event.triggered=void 0,c&&(n[v]=c)),e.result}},simulate:function(e,r,n){var s=a.extend(new a.Event,n,{type:e,isSimulated:!0});a.event.trigger(s,null,r)}}),a.fn.extend({trigger:function(e,r){return this.each(function(){a.event.trigger(e,r,this)})},triggerHandler:function(e,r){var n=this[0];if(n)return a.event.trigger(e,r,n,!0)}}),q.focusin||a.each({focus:"focusin",blur:"focusout"},function(e,r){var n=function(s){a.event.simulate(r,s.target,a.event.fix(s))};a.event.special[r]={setup:function(){var s=this.ownerDocument||this.document||this,o=ue.access(s,r);o||s.addEventListener(e,n,!0),ue.access(s,r,(o||0)+1)},teardown:function(){var s=this.ownerDocument||this.document||this,o=ue.access(s,r)-1;o?ue.access(s,r,o):(s.removeEventListener(e,n,!0),ue.remove(s,r))}}});var We=f.location,pt={guid:Date.now()},qt=/\?/;a.parseXML=function(e){var r,n;if(!e||typeof e!="string")return null;try{r=new f.DOMParser().parseFromString(e,"text/xml")}catch(s){}return n=r&&r.getElementsByTagName("parsererror")[0],(!r||n)&&a.error("Invalid XML: "+(n?a.map(n.childNodes,function(s){return s.textContent}).join(`
`):e)),r};var Hr=/\[\]$/,xn=/\r?\n/g,jr=/^(?:submit|button|image|reset|file)$/i,ss=/^(?:input|select|textarea|keygen)/i;function Ur(e,r,n,s){var o;if(Array.isArray(r))a.each(r,function(l,c){n||Hr.test(e)?s(e,c):Ur(e+"["+(typeof c=="object"&&c!=null?l:"")+"]",c,n,s)});else if(!n&&Fe(r)==="object")for(o in r)Ur(e+"["+o+"]",r[o],n,s);else s(e,r)}a.param=function(e,r){var n,s=[],o=function(l,c){var x=V(c)?c():c;s[s.length]=encodeURIComponent(l)+"="+encodeURIComponent(x==null?"":x)};if(e==null)return"";if(Array.isArray(e)||e.jquery&&!a.isPlainObject(e))a.each(e,function(){o(this.name,this.value)});else for(n in e)Ur(n,e[n],r,o);return s.join("&")},a.fn.extend({serialize:function(){return a.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=a.prop(this,"elements");return e?a.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!a(this).is(":disabled")&&ss.test(this.nodeName)&&!jr.test(e)&&(this.checked||!ze.test(e))}).map(function(e,r){var n=a(this).val();return n==null?null:Array.isArray(n)?a.map(n,function(s){return{name:r.name,value:s.replace(xn,`\r
`)}}):{name:r.name,value:n.replace(xn,`\r
`)}}).get()}});var wi=/%20/g,Sn=/#.*$/,ra=/([?&])_=[^&]*/,na=/^(.*?):[ \t]*([^\r\n]*)$/mg,ia=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,sa=/^(?:GET|HEAD)$/,aa=/^\/\//,as={},_i={},os="*/".concat("*"),Ci=ie.createElement("a");Ci.href=We.href;function us(e){return function(r,n){typeof r!="string"&&(n=r,r="*");var s,o=0,l=r.toLowerCase().match(fe)||[];if(V(n))for(;s=l[o++];)s[0]==="+"?(s=s.slice(1)||"*",(e[s]=e[s]||[]).unshift(n)):(e[s]=e[s]||[]).push(n)}}function ls(e,r,n,s){var o={},l=e===_i;function c(x){var v;return o[x]=!0,a.each(e[x]||[],function(L,R){var j=R(r,n,s);if(typeof j=="string"&&!l&&!o[j])return r.dataTypes.unshift(j),c(j),!1;if(l)return!(v=j)}),v}return c(r.dataTypes[0])||!o["*"]&&c("*")}function Ei(e,r){var n,s,o=a.ajaxSettings.flatOptions||{};for(n in r)r[n]!==void 0&&((o[n]?e:s||(s={}))[n]=r[n]);return s&&a.extend(!0,e,s),e}function oa(e,r,n){for(var s,o,l,c,x=e.contents,v=e.dataTypes;v[0]==="*";)v.shift(),s===void 0&&(s=e.mimeType||r.getResponseHeader("Content-Type"));if(s){for(o in x)if(x[o]&&x[o].test(s)){v.unshift(o);break}}if(v[0]in n)l=v[0];else{for(o in n){if(!v[0]||e.converters[o+" "+v[0]]){l=o;break}c||(c=o)}l=l||c}if(l)return l!==v[0]&&v.unshift(l),n[l]}function ua(e,r,n,s){var o,l,c,x,v,L={},R=e.dataTypes.slice();if(R[1])for(c in e.converters)L[c.toLowerCase()]=e.converters[c];for(l=R.shift();l;)if(e.responseFields[l]&&(n[e.responseFields[l]]=r),!v&&s&&e.dataFilter&&(r=e.dataFilter(r,e.dataType)),v=l,l=R.shift(),l){if(l==="*")l=v;else if(v!=="*"&&v!==l){if(c=L[v+" "+l]||L["* "+l],!c){for(o in L)if(x=o.split(" "),x[1]===l&&(c=L[v+" "+x[0]]||L["* "+x[0]],c)){c===!0?c=L[o]:L[o]!==!0&&(l=x[0],R.unshift(x[1]));break}}if(c!==!0)if(c&&e.throws)r=c(r);else try{r=c(r)}catch(j){return{state:"parsererror",error:c?j:"No conversion from "+v+" to "+l}}}}return{state:"success",data:r}}a.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:We.href,type:"GET",isLocal:ia.test(We.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":os,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":a.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,r){return r?Ei(Ei(e,a.ajaxSettings),r):Ei(a.ajaxSettings,e)},ajaxPrefilter:us(as),ajaxTransport:us(_i),ajax:function(e,r){typeof e=="object"&&(r=e,e=void 0),r=r||{};var n,s,o,l,c,x,v,L,R,j,P=a.ajaxSetup({},r),F=P.context||P,ce=P.context&&(F.nodeType||F.jquery)?a(F):a.event,xe=a.Deferred(),le=a.Callbacks("once memory"),it=P.statusCode||{},rt={},Ct={},Be="canceled",be={readyState:0,getResponseHeader:function(Re){var Ze;if(v){if(!l)for(l={};Ze=na.exec(o);)l[Ze[1].toLowerCase()+" "]=(l[Ze[1].toLowerCase()+" "]||[]).concat(Ze[2]);Ze=l[Re.toLowerCase()+" "]}return Ze==null?null:Ze.join(", ")},getAllResponseHeaders:function(){return v?o:null},setRequestHeader:function(Re,Ze){return v==null&&(Re=Ct[Re.toLowerCase()]=Ct[Re.toLowerCase()]||Re,rt[Re]=Ze),this},overrideMimeType:function(Re){return v==null&&(P.mimeType=Re),this},statusCode:function(Re){var Ze;if(Re)if(v)be.always(Re[be.status]);else for(Ze in Re)it[Ze]=[it[Ze],Re[Ze]];return this},abort:function(Re){var Ze=Re||Be;return n&&n.abort(Ze),xt(0,Ze),this}};if(xe.promise(be),P.url=((e||P.url||We.href)+"").replace(aa,We.protocol+"//"),P.type=r.method||r.type||P.method||P.type,P.dataTypes=(P.dataType||"*").toLowerCase().match(fe)||[""],P.crossDomain==null){x=ie.createElement("a");try{x.href=P.url,x.href=x.href,P.crossDomain=Ci.protocol+"//"+Ci.host!=x.protocol+"//"+x.host}catch(Re){P.crossDomain=!0}}if(P.data&&P.processData&&typeof P.data!="string"&&(P.data=a.param(P.data,P.traditional)),ls(as,P,r,be),v)return be;L=a.event&&P.global,L&&a.active++===0&&a.event.trigger("ajaxStart"),P.type=P.type.toUpperCase(),P.hasContent=!sa.test(P.type),s=P.url.replace(Sn,""),P.hasContent?P.data&&P.processData&&(P.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(P.data=P.data.replace(wi,"+")):(j=P.url.slice(s.length),P.data&&(P.processData||typeof P.data=="string")&&(s+=(qt.test(s)?"&":"?")+P.data,delete P.data),P.cache===!1&&(s=s.replace(ra,"$1"),j=(qt.test(s)?"&":"?")+"_="+pt.guid+++j),P.url=s+j),P.ifModified&&(a.lastModified[s]&&be.setRequestHeader("If-Modified-Since",a.lastModified[s]),a.etag[s]&&be.setRequestHeader("If-None-Match",a.etag[s])),(P.data&&P.hasContent&&P.contentType!==!1||r.contentType)&&be.setRequestHeader("Content-Type",P.contentType),be.setRequestHeader("Accept",P.dataTypes[0]&&P.accepts[P.dataTypes[0]]?P.accepts[P.dataTypes[0]]+(P.dataTypes[0]!=="*"?", "+os+"; q=0.01":""):P.accepts["*"]);for(R in P.headers)be.setRequestHeader(R,P.headers[R]);if(P.beforeSend&&(P.beforeSend.call(F,be,P)===!1||v))return be.abort();if(Be="abort",le.add(P.complete),be.done(P.success),be.fail(P.error),n=ls(_i,P,r,be),!n)xt(-1,"No Transport");else{if(be.readyState=1,L&&ce.trigger("ajaxSend",[be,P]),v)return be;P.async&&P.timeout>0&&(c=f.setTimeout(function(){be.abort("timeout")},P.timeout));try{v=!1,n.send(rt,xt)}catch(Re){if(v)throw Re;xt(-1,Re)}}function xt(Re,Ze,$r,wn){var Et,cr,dr,St,rr,Lt=Ze;v||(v=!0,c&&f.clearTimeout(c),n=void 0,o=wn||"",be.readyState=Re>0?4:0,Et=Re>=200&&Re<300||Re===304,$r&&(St=oa(P,be,$r)),!Et&&a.inArray("script",P.dataTypes)>-1&&a.inArray("json",P.dataTypes)<0&&(P.converters["text script"]=function(){}),St=ua(P,St,be,Et),Et?(P.ifModified&&(rr=be.getResponseHeader("Last-Modified"),rr&&(a.lastModified[s]=rr),rr=be.getResponseHeader("etag"),rr&&(a.etag[s]=rr)),Re===204||P.type==="HEAD"?Lt="nocontent":Re===304?Lt="notmodified":(Lt=St.state,cr=St.data,dr=St.error,Et=!dr)):(dr=Lt,(Re||!Lt)&&(Lt="error",Re<0&&(Re=0))),be.status=Re,be.statusText=(Ze||Lt)+"",Et?xe.resolveWith(F,[cr,Lt,be]):xe.rejectWith(F,[be,Lt,dr]),be.statusCode(it),it=void 0,L&&ce.trigger(Et?"ajaxSuccess":"ajaxError",[be,P,Et?cr:dr]),le.fireWith(F,[be,Lt]),L&&(ce.trigger("ajaxComplete",[be,P]),--a.active||a.event.trigger("ajaxStop")))}return be},getJSON:function(e,r,n){return a.get(e,r,n,"json")},getScript:function(e,r){return a.get(e,void 0,r,"script")}}),a.each(["get","post"],function(e,r){a[r]=function(n,s,o,l){return V(s)&&(l=l||o,o=s,s=void 0),a.ajax(a.extend({url:n,type:r,dataType:l,data:s,success:o},a.isPlainObject(n)&&n))}}),a.ajaxPrefilter(function(e){var r;for(r in e.headers)r.toLowerCase()==="content-type"&&(e.contentType=e.headers[r]||"")}),a._evalUrl=function(e,r,n){return a.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(s){a.globalEval(s,r,n)}})},a.fn.extend({wrapAll:function(e){var r;return this[0]&&(V(e)&&(e=e.call(this[0])),r=a(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&r.insertBefore(this[0]),r.map(function(){for(var n=this;n.firstElementChild;)n=n.firstElementChild;return n}).append(this)),this},wrapInner:function(e){return V(e)?this.each(function(r){a(this).wrapInner(e.call(this,r))}):this.each(function(){var r=a(this),n=r.contents();n.length?n.wrapAll(e):r.append(e)})},wrap:function(e){var r=V(e);return this.each(function(n){a(this).wrapAll(r?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){a(this).replaceWith(this.childNodes)}),this}}),a.expr.pseudos.hidden=function(e){return!a.expr.pseudos.visible(e)},a.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},a.ajaxSettings.xhr=function(){try{return new f.XMLHttpRequest}catch(e){}};var la={0:200,1223:204},zr=a.ajaxSettings.xhr();q.cors=!!zr&&"withCredentials"in zr,q.ajax=zr=!!zr,a.ajaxTransport(function(e){var r,n;if(q.cors||zr&&!e.crossDomain)return{send:function(s,o){var l,c=e.xhr();if(c.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(l in e.xhrFields)c[l]=e.xhrFields[l];e.mimeType&&c.overrideMimeType&&c.overrideMimeType(e.mimeType),!e.crossDomain&&!s["X-Requested-With"]&&(s["X-Requested-With"]="XMLHttpRequest");for(l in s)c.setRequestHeader(l,s[l]);r=function(x){return function(){r&&(r=n=c.onload=c.onerror=c.onabort=c.ontimeout=c.onreadystatechange=null,x==="abort"?c.abort():x==="error"?typeof c.status!="number"?o(0,"error"):o(c.status,c.statusText):o(la[c.status]||c.status,c.statusText,(c.responseType||"text")!=="text"||typeof c.responseText!="string"?{binary:c.response}:{text:c.responseText},c.getAllResponseHeaders()))}},c.onload=r(),n=c.onerror=c.ontimeout=r("error"),c.onabort!==void 0?c.onabort=n:c.onreadystatechange=function(){c.readyState===4&&f.setTimeout(function(){r&&n()})},r=r("abort");try{c.send(e.hasContent&&e.data||null)}catch(x){if(r)throw x}},abort:function(){r&&r()}}}),a.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),a.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return a.globalEval(e),e}}}),a.ajaxPrefilter("script",function(e){e.cache===void 0&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),a.ajaxTransport("script",function(e){if(e.crossDomain||e.scriptAttrs){var r,n;return{send:function(s,o){r=a("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(l){r.remove(),n=null,l&&o(l.type==="error"?404:200,l.type)}),ie.head.appendChild(r[0])},abort:function(){n&&n()}}}});var fs=[],Ti=/(=)\?(?=&|$)|\?\?/;a.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=fs.pop()||a.expando+"_"+pt.guid++;return this[e]=!0,e}}),a.ajaxPrefilter("json jsonp",function(e,r,n){var s,o,l,c=e.jsonp!==!1&&(Ti.test(e.url)?"url":typeof e.data=="string"&&(e.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Ti.test(e.data)&&"data");if(c||e.dataTypes[0]==="jsonp")return s=e.jsonpCallback=V(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,c?e[c]=e[c].replace(Ti,"$1"+s):e.jsonp!==!1&&(e.url+=(qt.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return l||a.error(s+" was not called"),l[0]},e.dataTypes[0]="json",o=f[s],f[s]=function(){l=arguments},n.always(function(){o===void 0?a(f).removeProp(s):f[s]=o,e[s]&&(e.jsonpCallback=r.jsonpCallback,fs.push(s)),l&&V(o)&&o(l[0]),l=o=void 0}),"script"}),q.createHTMLDocument=function(){var e=ie.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",e.childNodes.length===2}(),a.parseHTML=function(e,r,n){if(typeof e!="string")return[];typeof r=="boolean"&&(n=r,r=!1);var s,o,l;return r||(q.createHTMLDocument?(r=ie.implementation.createHTMLDocument(""),s=r.createElement("base"),s.href=ie.location.href,r.head.appendChild(s)):r=ie),o=Ee.exec(e),l=!n&&[],o?[r.createElement(o[1])]:(o=Rr([e],r,l),l&&l.length&&a(l).remove(),a.merge([],o.childNodes))},a.fn.load=function(e,r,n){var s,o,l,c=this,x=e.indexOf(" ");return x>-1&&(s=Y(e.slice(x)),e=e.slice(0,x)),V(r)?(n=r,r=void 0):r&&typeof r=="object"&&(o="POST"),c.length>0&&a.ajax({url:e,type:o||"GET",dataType:"html",data:r}).done(function(v){l=arguments,c.html(s?a("<div>").append(a.parseHTML(v)).find(s):v)}).always(n&&function(v,L){c.each(function(){n.apply(this,l||[v.responseText,L,v])})}),this},a.expr.pseudos.animated=function(e){return a.grep(a.timers,function(r){return e===r.elem}).length},a.offset={setOffset:function(e,r,n){var s,o,l,c,x,v,L,R=a.css(e,"position"),j=a(e),P={};R==="static"&&(e.style.position="relative"),x=j.offset(),l=a.css(e,"top"),v=a.css(e,"left"),L=(R==="absolute"||R==="fixed")&&(l+v).indexOf("auto")>-1,L?(s=j.position(),c=s.top,o=s.left):(c=parseFloat(l)||0,o=parseFloat(v)||0),V(r)&&(r=r.call(e,n,a.extend({},x))),r.top!=null&&(P.top=r.top-x.top+c),r.left!=null&&(P.left=r.left-x.left+o),"using"in r?r.using.call(e,P):j.css(P)}},a.fn.extend({offset:function(e){if(arguments.length)return e===void 0?this:this.each(function(o){a.offset.setOffset(this,e,o)});var r,n,s=this[0];if(s)return s.getClientRects().length?(r=s.getBoundingClientRect(),n=s.ownerDocument.defaultView,{top:r.top+n.pageYOffset,left:r.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,r,n,s=this[0],o={top:0,left:0};if(a.css(s,"position")==="fixed")r=s.getBoundingClientRect();else{for(r=this.offset(),n=s.ownerDocument,e=s.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&a.css(e,"position")==="static";)e=e.parentNode;e&&e!==s&&e.nodeType===1&&(o=a(e).offset(),o.top+=a.css(e,"borderTopWidth",!0),o.left+=a.css(e,"borderLeftWidth",!0))}return{top:r.top-o.top-a.css(s,"marginTop",!0),left:r.left-o.left-a.css(s,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&a.css(e,"position")==="static";)e=e.offsetParent;return e||at})}}),a.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,r){var n=r==="pageYOffset";a.fn[e]=function(s){return qe(this,function(o,l,c){var x;if(oe(o)?x=o:o.nodeType===9&&(x=o.defaultView),c===void 0)return x?x[r]:o[l];x?x.scrollTo(n?x.pageXOffset:c,n?c:x.pageYOffset):o[l]=c},e,s,arguments.length)}}),a.each(["top","left"],function(e,r){a.cssHooks[r]=mn(q.pixelPosition,function(n,s){if(s)return s=ur(n,r),Fr.test(s)?a(n).position()[r]+"px":s})}),a.each({Height:"height",Width:"width"},function(e,r){a.each({padding:"inner"+e,content:r,"":"outer"+e},function(n,s){a.fn[s]=function(o,l){var c=arguments.length&&(n||typeof o!="boolean"),x=n||(o===!0||l===!0?"margin":"border");return qe(this,function(v,L,R){var j;return oe(v)?s.indexOf("outer")===0?v["inner"+e]:v.document.documentElement["client"+e]:v.nodeType===9?(j=v.documentElement,Math.max(v.body["scroll"+e],j["scroll"+e],v.body["offset"+e],j["offset"+e],j["client"+e])):R===void 0?a.css(v,L,x):a.style(v,L,R,x)},r,c?o:void 0,c)}})}),a.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,r){a.fn[r]=function(n){return this.on(r,n)}}),a.fn.extend({bind:function(e,r,n){return this.on(e,null,r,n)},unbind:function(e,r){return this.off(e,null,r)},delegate:function(e,r,n,s){return this.on(r,e,n,s)},undelegate:function(e,r,n){return arguments.length===1?this.off(e,"**"):this.off(r,e||"**",n)},hover:function(e,r){return this.mouseenter(e).mouseleave(r||e)}}),a.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,r){a.fn[r]=function(n,s){return arguments.length>0?this.on(r,null,n,s):this.trigger(r)}});var fa=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;a.proxy=function(e,r){var n,s,o;if(typeof r=="string"&&(n=e[r],r=e,e=n),!!V(e))return s=d.call(arguments,2),o=function(){return e.apply(r||this,s.concat(d.call(arguments)))},o.guid=e.guid=e.guid||a.guid++,o},a.holdReady=function(e){e?a.readyWait++:a.ready(!0)},a.isArray=Array.isArray,a.parseJSON=JSON.parse,a.nodeName=Ce,a.isFunction=V,a.isWindow=oe,a.camelCase=bt,a.type=Fe,a.now=Date.now,a.isNumeric=function(e){var r=a.type(e);return(r==="number"||r==="string")&&!isNaN(e-parseFloat(e))},a.trim=function(e){return e==null?"":(e+"").replace(fa,"$1")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return a});var ca=f.jQuery,da=f.$;return a.noConflict=function(e){return f.$===a&&(f.$=da),e&&f.jQuery===a&&(f.jQuery=ca),a},typeof t=="undefined"&&(f.jQuery=f.$=a),a})});var Ns=Yr((Mu,zn)=>{(function(f,t,i){if(!f)return;for(var u={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},d={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},y={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},g={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},C,w=1;w<20;++w)u[111+w]="f"+w;for(w=0;w<=9;++w)u[w+96]=w.toString();function N(T,M,Z){if(T.addEventListener){T.addEventListener(M,Z,!1);return}T.attachEvent("on"+M,Z)}function W(T){if(T.type=="keypress"){var M=String.fromCharCode(T.which);return T.shiftKey||(M=M.toLowerCase()),M}return u[T.which]?u[T.which]:d[T.which]?d[T.which]:String.fromCharCode(T.which).toLowerCase()}function se(T,M){return T.sort().join(",")===M.sort().join(",")}function z(T){var M=[];return T.shiftKey&&M.push("shift"),T.altKey&&M.push("alt"),T.ctrlKey&&M.push("ctrl"),T.metaKey&&M.push("meta"),M}function q(T){if(T.preventDefault){T.preventDefault();return}T.returnValue=!1}function V(T){if(T.stopPropagation){T.stopPropagation();return}T.cancelBubble=!0}function oe(T){return T=="shift"||T=="ctrl"||T=="alt"||T=="meta"}function ie(){if(!C){C={};for(var T in u)T>95&&T<112||u.hasOwnProperty(T)&&(C[u[T]]=T)}return C}function Ae(T,M,Z){return Z||(Z=ie()[T]?"keydown":"keypress"),Z=="keypress"&&M.length&&(Z="keydown"),Z}function Ke(T){return T==="+"?["+"]:(T=T.replace(/\+{2}/g,"+plus"),T.split("+"))}function Fe(T,M){var Z,de,Le,Ce=[];for(Z=Ke(T),Le=0;Le<Z.length;++Le)de=Z[Le],g[de]&&(de=g[de]),M&&M!="keypress"&&y[de]&&(de=y[de],Ce.push("shift")),oe(de)&&Ce.push(de);return M=Ae(de,Ce,M),{key:de,modifiers:Ce,action:M}}function Se(T,M){return T===null||T===t?!1:T===M?!0:Se(T.parentNode,M)}function a(T){var M=this;if(T=T||t,!(M instanceof a))return new a(T);M.target=T,M._callbacks={},M._directMap={};var Z={},de,Le=!1,Ce=!1,Ee=!1;function Je(fe){fe=fe||{};var ke=!1,ye;for(ye in Z){if(fe[ye]){ke=!0;continue}Z[ye]=0}ke||(Ee=!1)}function et(fe,ke,ye,ve,Pe,ut){var De,Ve,qe=[],ct=ye.type;if(!M._callbacks[fe])return[];for(ct=="keyup"&&oe(fe)&&(ke=[fe]),De=0;De<M._callbacks[fe].length;++De)if(Ve=M._callbacks[fe][De],!(!ve&&Ve.seq&&Z[Ve.seq]!=Ve.level)&&ct==Ve.action&&(ct=="keypress"&&!ye.metaKey&&!ye.ctrlKey||se(ke,Ve.modifiers))){var or=!ve&&Ve.combo==Pe,Zt=ve&&Ve.seq==ve&&Ve.level==ut;(or||Zt)&&M._callbacks[fe].splice(De,1),qe.push(Ve)}return qe}function gt(fe,ke,ye,ve){M.stopCallback(ke,ke.target||ke.srcElement,ye,ve)||fe(ke,ye)===!1&&(q(ke),V(ke))}M._handleKey=function(fe,ke,ye){var ve=et(fe,ke,ye),Pe,ut={},De=0,Ve=!1;for(Pe=0;Pe<ve.length;++Pe)ve[Pe].seq&&(De=Math.max(De,ve[Pe].level));for(Pe=0;Pe<ve.length;++Pe){if(ve[Pe].seq){if(ve[Pe].level!=De)continue;Ve=!0,ut[ve[Pe].seq]=1,gt(ve[Pe].callback,ye,ve[Pe].combo,ve[Pe].seq);continue}Ve||gt(ve[Pe].callback,ye,ve[Pe].combo)}var qe=ye.type=="keypress"&&Ce;ye.type==Ee&&!oe(fe)&&!qe&&Je(ut),Ce=Ve&&ye.type=="keydown"};function wt(fe){typeof fe.which!="number"&&(fe.which=fe.keyCode);var ke=W(fe);if(ke){if(fe.type=="keyup"&&Le===ke){Le=!1;return}M.handleKey(ke,z(fe),fe)}}function Nt(){clearTimeout(de),de=setTimeout(Je,1e3)}function vt(fe,ke,ye,ve){Z[fe]=0;function Pe(ct){return function(){Ee=ct,++Z[fe],Nt()}}function ut(ct){gt(ye,ct,fe),ve!=="keyup"&&(Le=W(ct)),setTimeout(Je,10)}for(var De=0;De<ke.length;++De){var Ve=De+1===ke.length,qe=Ve?ut:Pe(ve||Fe(ke[De+1]).action);kt(ke[De],qe,ve,fe,De)}}function kt(fe,ke,ye,ve,Pe){M._directMap[fe+":"+ye]=ke,fe=fe.replace(/\s+/g," ");var ut=fe.split(" "),De;if(ut.length>1){vt(fe,ut,ke,ye);return}De=Fe(fe,ye),M._callbacks[De.key]=M._callbacks[De.key]||[],et(De.key,De.modifiers,{type:De.action},ve,fe,Pe),M._callbacks[De.key][ve?"unshift":"push"]({callback:ke,modifiers:De.modifiers,action:De.action,seq:ve,level:Pe,combo:fe})}M._bindMultiple=function(fe,ke,ye){for(var ve=0;ve<fe.length;++ve)kt(fe[ve],ke,ye)},N(T,"keypress",wt),N(T,"keydown",wt),N(T,"keyup",wt)}a.prototype.bind=function(T,M,Z){var de=this;return T=T instanceof Array?T:[T],de._bindMultiple.call(de,T,M,Z),de},a.prototype.unbind=function(T,M){var Z=this;return Z.bind.call(Z,T,function(){},M)},a.prototype.trigger=function(T,M){var Z=this;return Z._directMap[T+":"+M]&&Z._directMap[T+":"+M]({},T),Z},a.prototype.reset=function(){var T=this;return T._callbacks={},T._directMap={},T},a.prototype.stopCallback=function(T,M){var Z=this;if((" "+M.className+" ").indexOf(" mousetrap ")>-1||Se(M,Z.target))return!1;if("composedPath"in T&&typeof T.composedPath=="function"){var de=T.composedPath()[0];de!==T.target&&(M=de)}return M.tagName=="INPUT"||M.tagName=="SELECT"||M.tagName=="TEXTAREA"||M.isContentEditable},a.prototype.handleKey=function(){var T=this;return T._handleKey.apply(T,arguments)},a.addKeycodes=function(T){for(var M in T)T.hasOwnProperty(M)&&(u[M]=T[M]);C=null},a.init=function(){var T=a(t);for(var M in T)M.charAt(0)!=="_"&&(a[M]=function(Z){return function(){return T[Z].apply(T,arguments)}}(M))},a.init(),f.Mousetrap=a,typeof zn!="undefined"&&zn.exports&&(zn.exports=a),typeof define=="function"&&define.amd&&define(function(){return a})})(typeof window!="undefined"?window:null,typeof window!="undefined"?document:null)});var js=Yr((Xi,Yi)=>{(function(f,t){typeof define=="function"&&define.amd?define([],t):typeof Xi!="undefined"?t():(t(),f.FileSaver={})})(Xi,function(){"use strict";function f(C,w){return typeof w=="undefined"?w={autoBom:!1}:typeof w!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),w={autoBom:!w}),w.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(C.type)?new Blob(["\uFEFF",C],{type:C.type}):C}function t(C,w,N){var W=new XMLHttpRequest;W.open("GET",C),W.responseType="blob",W.onload=function(){g(W.response,w,N)},W.onerror=function(){console.error("could not download file")},W.send()}function i(C){var w=new XMLHttpRequest;w.open("HEAD",C,!1);try{w.send()}catch(N){}return 200<=w.status&&299>=w.status}function u(C){try{C.dispatchEvent(new MouseEvent("click"))}catch(N){var w=document.createEvent("MouseEvents");w.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),C.dispatchEvent(w)}}var d=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,y=d.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=d.saveAs||(typeof window!="object"||window!==d?function(){}:"download"in HTMLAnchorElement.prototype&&!y?function(C,w,N){var W=d.URL||d.webkitURL,se=document.createElement("a");w=w||C.name||"download",se.download=w,se.rel="noopener",typeof C=="string"?(se.href=C,se.origin===location.origin?u(se):i(se.href)?t(C,w,N):u(se,se.target="_blank")):(se.href=W.createObjectURL(C),setTimeout(function(){W.revokeObjectURL(se.href)},4e4),setTimeout(function(){u(se)},0))}:"msSaveOrOpenBlob"in navigator?function(C,w,N){if(w=w||C.name||"download",typeof C!="string")navigator.msSaveOrOpenBlob(f(C,N),w);else if(i(C))t(C,w,N);else{var W=document.createElement("a");W.href=C,W.target="_blank",setTimeout(function(){u(W)})}}:function(C,w,N,W){if(W=W||open("","_blank"),W&&(W.document.title=W.document.body.innerText="downloading..."),typeof C=="string")return t(C,w,N);var se=C.type==="application/octet-stream",z=/constructor/i.test(d.HTMLElement)||d.safari,q=/CriOS\/[\d]+/.test(navigator.userAgent);if((q||se&&z||y)&&typeof FileReader!="undefined"){var V=new FileReader;V.onloadend=function(){var Ae=V.result;Ae=q?Ae:Ae.replace(/^data:[^;]*;/,"data:attachment/file;"),W?W.location.href=Ae:location=Ae,W=null},V.readAsDataURL(C)}else{var oe=d.URL||d.webkitURL,ie=oe.createObjectURL(C);W?W.location=ie:location.href=ie,W=null,setTimeout(function(){oe.revokeObjectURL(ie)},4e4)}});d.saveAs=g.saveAs=g,typeof Yi!="undefined"&&(Yi.exports=g)})});var Us=Yr((Qi,Zi)=>{(function(f,t){typeof Qi=="object"&&typeof Zi!="undefined"?Zi.exports=t():typeof define=="function"&&define.amd?define(t):(f=typeof globalThis!="undefined"?globalThis:f||self,f.Split=t())})(Qi,function(){"use strict";var f=typeof window!="undefined"?window:null,t=f===null,i=t?void 0:f.document,u="addEventListener",d="removeEventListener",y="getBoundingClientRect",g="_a",C="_b",w="_c",N="horizontal",W=function(){return!1},se=t?"calc":["","-webkit-","-moz-","-o-"].filter(function(Se){var a=i.createElement("div");return a.style.cssText="width:"+Se+"calc(9px)",!!a.style.length}).shift()+"calc",z=function(Se){return typeof Se=="string"||Se instanceof String},q=function(Se){if(z(Se)){var a=i.querySelector(Se);if(!a)throw new Error("Selector "+Se+" did not match a DOM element");return a}return Se},V=function(Se,a,T){var M=Se[a];return M!==void 0?M:T},oe=function(Se,a,T,M){if(a){if(M==="end")return 0;if(M==="center")return Se/2}else if(T){if(M==="start")return 0;if(M==="center")return Se/2}return Se},ie=function(Se,a){var T=i.createElement("div");return T.className="gutter gutter-"+a,T},Ae=function(Se,a,T){var M={};return z(a)?M[Se]=a:M[Se]=se+"("+a+"% - "+T+"px)",M},Ke=function(Se,a){var T;return T={},T[Se]=a+"px",T},Fe=function(Se,a){if(a===void 0&&(a={}),t)return{};var T=Se,M,Z,de,Le,Ce,Ee;Array.from&&(T=Array.from(T));var Je=q(T[0]),et=Je.parentNode,gt=getComputedStyle?getComputedStyle(et):null,wt=gt?gt.flexDirection:null,Nt=V(a,"sizes")||T.map(function(){return 100/T.length}),vt=V(a,"minSize",100),kt=Array.isArray(vt)?vt:T.map(function(){return vt}),fe=V(a,"maxSize",1/0),ke=Array.isArray(fe)?fe:T.map(function(){return fe}),ye=V(a,"expandToMin",!1),ve=V(a,"gutterSize",10),Pe=V(a,"gutterAlign","center"),ut=V(a,"snapOffset",30),De=Array.isArray(ut)?ut:T.map(function(){return ut}),Ve=V(a,"dragInterval",1),qe=V(a,"direction",N),ct=V(a,"cursor",qe===N?"col-resize":"row-resize"),or=V(a,"gutter",ie),Zt=V(a,"elementStyle",Ae),bt=V(a,"gutterStyle",Ke);qe===N?(M="width",Z="clientX",de="left",Le="right",Ce="clientWidth"):qe==="vertical"&&(M="height",Z="clientY",de="top",Le="bottom",Ce="clientHeight");function _t(re,K,ee,ae){var ze=Zt(M,K,ee,ae);Object.keys(ze).forEach(function($e){re.style[$e]=ze[$e]})}function Ht(re,K,ee){var ae=bt(M,K,ee);Object.keys(ae).forEach(function(ze){re.style[ze]=ae[ze]})}function ue(){return Ee.map(function(re){return re.size})}function Ue(re){return"touches"in re?re.touches[0][Z]:re[Z]}function yr(re){var K=Ee[this.a],ee=Ee[this.b],ae=K.size+ee.size;K.size=re/this.size*ae,ee.size=ae-re/this.size*ae,_t(K.element,K.size,this[C],K.i),_t(ee.element,ee.size,this[w],ee.i)}function xr(re){var K,ee=Ee[this.a],ae=Ee[this.b];this.dragging&&(K=Ue(re)-this.start+(this[C]-this.dragOffset),Ve>1&&(K=Math.round(K/Ve)*Ve),K<=ee.minSize+ee.snapOffset+this[C]?K=ee.minSize+this[C]:K>=this.size-(ae.minSize+ae.snapOffset+this[w])&&(K=this.size-(ae.minSize+this[w])),K>=ee.maxSize-ee.snapOffset+this[C]?K=ee.maxSize+this[C]:K<=this.size-(ae.maxSize-ae.snapOffset+this[w])&&(K=this.size-(ae.maxSize+this[w])),yr.call(this,K),V(a,"onDrag",W)(ue()))}function jt(){var re=Ee[this.a].element,K=Ee[this.b].element,ee=re[y](),ae=K[y]();this.size=ee[M]+ae[M]+this[C]+this[w],this.start=ee[de],this.end=ee[Le]}function Jt(re){if(!getComputedStyle)return null;var K=getComputedStyle(re);if(!K)return null;var ee=re[Ce];return ee===0?null:(qe===N?ee-=parseFloat(K.paddingLeft)+parseFloat(K.paddingRight):ee-=parseFloat(K.paddingTop)+parseFloat(K.paddingBottom),ee)}function Ut(re){var K=Jt(et);if(K===null||kt.reduce(function($e,nt){return $e+nt},0)>K)return re;var ee=0,ae=[],ze=re.map(function($e,nt){var Ge=K*$e/100,tt=oe(ve,nt===0,nt===re.length-1,Pe),Vt=kt[nt]+tt;return Ge<Vt?(ee+=Vt-Ge,ae.push(0),Vt):(ae.push(Ge-Vt),Ge)});return ee===0?re:ze.map(function($e,nt){var Ge=$e;if(ee>0&&ae[nt]-ee>0){var tt=Math.min(ee,ae[nt]-ee);ee-=tt,Ge=$e-tt}return Ge/K*100})}function It(){var re=this,K=Ee[re.a].element,ee=Ee[re.b].element;re.dragging&&V(a,"onDragEnd",W)(ue()),re.dragging=!1,f[d]("mouseup",re.stop),f[d]("touchend",re.stop),f[d]("touchcancel",re.stop),f[d]("mousemove",re.move),f[d]("touchmove",re.move),re.stop=null,re.move=null,K[d]("selectstart",W),K[d]("dragstart",W),ee[d]("selectstart",W),ee[d]("dragstart",W),K.style.userSelect="",K.style.webkitUserSelect="",K.style.MozUserSelect="",K.style.pointerEvents="",ee.style.userSelect="",ee.style.webkitUserSelect="",ee.style.MozUserSelect="",ee.style.pointerEvents="",re.gutter.style.cursor="",re.parent.style.cursor="",i.body.style.cursor=""}function yt(re){if(!("button"in re&&re.button!==0)){var K=this,ee=Ee[K.a].element,ae=Ee[K.b].element;K.dragging||V(a,"onDragStart",W)(ue()),re.preventDefault(),K.dragging=!0,K.move=xr.bind(K),K.stop=It.bind(K),f[u]("mouseup",K.stop),f[u]("touchend",K.stop),f[u]("touchcancel",K.stop),f[u]("mousemove",K.move),f[u]("touchmove",K.move),ee[u]("selectstart",W),ee[u]("dragstart",W),ae[u]("selectstart",W),ae[u]("dragstart",W),ee.style.userSelect="none",ee.style.webkitUserSelect="none",ee.style.MozUserSelect="none",ee.style.pointerEvents="none",ae.style.userSelect="none",ae.style.webkitUserSelect="none",ae.style.MozUserSelect="none",ae.style.pointerEvents="none",K.gutter.style.cursor=ct,K.parent.style.cursor=ct,i.body.style.cursor=ct,jt.call(K),K.dragOffset=Ue(re)-K.end}}Nt=Ut(Nt);var at=[];Ee=T.map(function(re,K){var ee={element:q(re),size:Nt[K],minSize:kt[K],maxSize:ke[K],snapOffset:De[K],i:K},ae;if(K>0&&(ae={a:K-1,b:K,dragging:!1,direction:qe,parent:et},ae[C]=oe(ve,K-1===0,!1,Pe),ae[w]=oe(ve,!1,K===T.length-1,Pe),wt==="row-reverse"||wt==="column-reverse")){var ze=ae.a;ae.a=ae.b,ae.b=ze}if(K>0){var $e=or(K,qe,ee.element);Ht($e,ve,K),ae[g]=yt.bind(ae),$e[u]("mousedown",ae[g]),$e[u]("touchstart",ae[g]),et.insertBefore($e,ee.element),ae.gutter=$e}return _t(ee.element,ee.size,oe(ve,K===0,K===T.length-1,Pe),K),K>0&&at.push(ae),ee});function Dt(re){var K=re.i===at.length,ee=K?at[re.i-1]:at[re.i];jt.call(ee);var ae=K?ee.size-re.minSize-ee[w]:re.minSize+ee[C];yr.call(ee,ae)}Ee.forEach(function(re){var K=re.element[y]()[M];K<re.minSize&&(ye?Dt(re):re.minSize=K)});function Sr(re){var K=Ut(re);K.forEach(function(ee,ae){if(ae>0){var ze=at[ae-1],$e=Ee[ze.a],nt=Ee[ze.b];$e.size=K[ae-1],nt.size=ee,_t($e.element,$e.size,ze[C],$e.i),_t(nt.element,nt.size,ze[w],nt.i)}})}function zt(re,K){at.forEach(function(ee){if(K!==!0?ee.parent.removeChild(ee.gutter):(ee.gutter[d]("mousedown",ee[g]),ee.gutter[d]("touchstart",ee[g])),re!==!0){var ae=Zt(M,ee.a.size,ee[C]);Object.keys(ae).forEach(function(ze){Ee[ee.a].element.style[ze]="",Ee[ee.b].element.style[ze]=""})}})}return{setSizes:Sr,getSizes:ue,collapse:function(K){Dt(Ee[K])},destroy:zt,parent:et,pairs:at}};return Fe})});function Rt(f,t){for(f+="";f.length<t;)f=" "+f;return f}function Qr(f,t){for(f+="";f.length<t;)f+=" ";return f}function gr(f){var t=f.split("/");return t[t.length-1]}function Ni(f){return f.substring(0,f.lastIndexOf("/"))}function ir(f){var t=f.lastIndexOf(".");return t>0?f.substr(0,t):f}function _e(f,t){return t||(t=2),t==8?_e(f>>16&65535,4)+_e(f&65535,4):Ma(f,t,16)}function Ma(f,t,i){try{for(var u=f.toString(i).toUpperCase();u.length<t;)u="0"+u;return u}catch(d){return f+""}}var Cs=Ss(_s());var Zr=class{constructor(t,i){t=t||[],this.lines=t,this.text=i,this.offset2loc=new Map,this.line2offset=new Map;for(let u of t)u.offset>=0&&(this.offset2loc[u.offset]||(this.offset2loc[u.offset]=u),this.line2offset[u.line]||(this.line2offset[u.line]=u.offset))}findLineForOffset(t,i){if(this.offset2loc)for(let u=0;u<=i;u++){let d=this.offset2loc[t];if(d)return d;t--}return null}lineCount(){return this.lines.length}};function Fa(f,t){var i=0;if(f){f=f.toUpperCase();let g=[".CHR",".BIN",".DAT",".PAL",".NAM",".RLE",".LZ4",".NSF"];for(var u of g)f.endsWith(u)&&i++}for(var d=0;d<(t?t.length:0);){let g=t[d++];if(g&128){var y=0;for((g&224)==192?y=1:(g&240)==224?y=2:(g&248)==240?y=3:(g<160||g==255)&&i++;y--;)if(d>=t.length||(t[d++]&192)!=128){i++;break}}else if(g<9||g>=14&&g<26||g==127){i++;break}}return i>0}function Na(f,t,i){var u=new XMLHttpRequest;u.open("GET",f,!0),u.responseType=i,u.onload=function(d){if(u.status==200){var y=u.response;y instanceof ArrayBuffer&&(y=new Uint8Array(y)),t(y)}else if(u.status==404)t(null);else throw Error("Error "+u.status+" loading "+f)},u.onerror=function(d){t(null)},u.ontimeout=function(d){throw Error("Timeout loading "+f)},u.send(null)}var Dn=class{async getRemoteFile(t){return new Promise((i,u)=>Na(t,i,Fa(t)?"arraybuffer":"text"))}async getFileData(t){var i="presets/zx/"+t,u=await this.getRemoteFile(i);return u&&console.log("read",i,u.length,"bytes"),u}async setFileData(t,i){}},Ln=class{constructor(t,i){this.basefs=t,this.overlayfs=i}async getFileData(t){var i=await this.overlayfs.getFileData(t);return i==null?this.basefs.getFileData(t):i}async setFileData(t,i){return await this.overlayfs.setFileData(t,i),this.basefs.setFileData(t,i)}},Pn=class{constructor(t){this.store=t}async getFileData(t){return this.store.getItem(t)}async setFileData(t,i){return this.store.setItem(t,i)}};function Ia(f){return"output"in f}var Rn=class{constructor(t,i,u){this.filedata={};this.pendingWorkerMessages=0;this.tools_preloaded={};this.isCompiling=!1;this.filename2path={};this.worker=t,this.platform=i,this.filesystem=u,t.onmessage=d=>{this.receiveWorkerMessage(d.data)}}receiveWorkerMessage(t){var i=this.pendingWorkerMessages>1;i?(this.sendBuild(),this.pendingWorkerMessages=1):(this.callbackBuildStatus&&this.callbackBuildStatus(!1),this.isCompiling||(console.log(this.pendingWorkerMessages),console.trace()),this.isCompiling=!1,this.pendingWorkerMessages=0),t&&Ia(t)&&this.processBuildResult(t),this.callbackBuildResult(t)}preloadWorker(t){var i=this.platform.getToolForFilename(t);i&&!this.tools_preloaded[i]&&(this.worker.postMessage({preload:i}),this.tools_preloaded[i]=!0)}pushAllFiles(t,i){t.push(i);var u=Ni(this.mainFilename);u.length>0&&u!="local"&&t.push(u+"/"+i)}parseIncludeDependencies(t){let i=[],u,d=/^\s*[.#%]?(include|incbin)\s+"(.+?)"/gmi;for(;u=d.exec(t);)this.pushAllFiles(i,u[2]);let y=/^\s*([;']|[/][/])#resource\s+"(.+?)"/gm;for(;u=y.exec(t);)this.pushAllFiles(i,u[2]);return i}parseLinkDependencies(t){let i=[],u,d=/^\s*([;]|[/][/])#link\s+"(.+?)"/gm;for(;u=d.exec(t);)this.pushAllFiles(i,u[2]);return i}loadFileDependencies(t){let i=this.parseIncludeDependencies(t),u=this.parseLinkDependencies(t),d=i.concat(u);return this.loadFiles(d).then(y=>{if(y)for(let g of y)g.link=u.indexOf(g.path)>=0;return y})}okToSend(){return this.pendingWorkerMessages++==0&&this.mainFilename!=null}updateFileInStore(t,i){this.filesystem.setFileData(t,i)}buildWorkerMessage(t){this.preloadWorker(this.mainFilename);let i={updates:[],buildsteps:[]},u=this.stripLocalPath(this.mainFilename),d=this.getFile(this.mainFilename);i.updates.push({path:u,data:d}),this.filename2path[u]=this.mainFilename;let y=[];for(let g of t)g.link||(i.updates.push({path:g.filename,data:g.data}),y.push(g.filename)),this.filename2path[g.filename]=g.path;i.buildsteps.push({path:u,files:[u].concat(y),tool:this.platform.getToolForFilename(this.mainFilename),mainfile:!0});for(let g of t)g.data&&g.link&&(this.preloadWorker(g.filename),i.updates.push({path:g.filename,data:g.data}),i.buildsteps.push({path:g.filename,files:[g.filename].concat(y),tool:this.platform.getToolForFilename(g.path)}));return this.dataItems&&(i.setitems=this.dataItems),i}async loadFiles(t){var i=[],u=(g,C)=>{i.push({path:g,filename:this.stripLocalPath(g),link:!0,data:C})};for(var d of t)if(d in this.filedata){var y=this.filedata[d];y&&u(d,y)}else{var y=await this.filesystem.getFileData(d);y?(this.filedata[d]=y,u(d,y)):this.filedata[d]=null}return i}getFile(t){return this.filedata[t]}iterateFiles(t){for(var i in this.filedata)t(i,this.getFile(i))}sendBuild(){if(!this.mainFilename)throw Error("need to call setMainFilename first");var t=this.getFile(this.mainFilename);if(t instanceof Uint8Array){this.isCompiling=!0,this.receiveWorkerMessage({output:t,errors:[],listings:null,symbolmap:null,params:{}});return}var i=typeof t=="string"?t:"";return this.loadFileDependencies(i).then(u=>{u||(u=[]);var d=this.buildWorkerMessage(u);this.worker.postMessage(d),this.isCompiling=!0})}updateFile(t,i){this.filedata[t]!=i&&(this.updateFileInStore(t,i),this.filedata[t]=i,this.okToSend()&&(this.callbackBuildStatus&&this.callbackBuildStatus(!0),this.sendBuild()))}setMainFilename(t){this.mainFilename=t,this.callbackBuildStatus&&this.callbackBuildStatus(!0),this.sendBuild()}processBuildResult(t){if(t.listings){this.listings=t.listings;for(var i in this.listings){var u=this.listings[i];u.lines&&(u.sourcefile=new Zr(u.lines,u.text)),u.asmlines&&(u.assemblyfile=new Zr(u.asmlines,u.text))}}var d=this.platform.getMemoryMap().main;t.segments&&(d=d.concat(t.segments||[])),d.sort((y,g)=>y.start-g.start),this.segments=d}getListings(){return this.listings}getListingForFile(t){var i=ir(this.stripLocalPath(t)),u=this.getListings(),d=null;for(var y in u)if(d=y,ir(y)==i)return u[y]}stripLocalPath(t){if(this.mainFilename){let i=Ni(this.mainFilename);i!=""&&t.startsWith(i)&&(t=t.substring(i.length+1))}return t}updateDataItems(t){this.dataItems=t,this.okToSend()&&this.sendBuild()}};function Es(f){return Cs.default.createInstance({name:"__"+f,version:2})}var Oi=As(),Fn=class{constructor(t,i){this.id2window={};this.id2createfn={};this.id2showfn={};this.id2div={};this.containerdiv=t,this.project=i,this.undofiles=[]}isWindow(t){return this.id2createfn[t]!=null}setCreateFunc(t,i){this.id2createfn[t]=i}setShowFunc(t,i){this.id2showfn[t]=i}create(t){var i=this.id2window[t];i||(console.log("creating window",t),i=this.id2window[t]=this.id2createfn[t](t));var u=this.id2div[t];return u||(u=this.id2div[t]=i.createDiv(this.containerdiv),Oi(u).hide()),i}createOrShow(t,i){var u=this.create(t),d=this.id2div[t];return this.activewnd!=u?(this.activediv&&Oi(this.activediv).hide(),this.activewnd&&this.activewnd.setVisible&&this.activewnd.setVisible(!1),this.activediv=d,this.activewnd=u,Oi(d).show(),this.refresh(!0),this.refreshErrors(),u.setVisible&&u.setVisible(!0),this.id2showfn[t]&&this.id2showfn[t](t,u)):this.refresh(i),this.activeid=t,u}put(t,i){this.id2window[t]=i}refresh(t){this.activewnd&&this.activewnd.refresh&&this.activewnd.refresh(t)}tick(){this.activewnd&&this.activewnd.tick&&this.activewnd.tick()}setErrors(t){this.lasterrors=t,this.refreshErrors()}refreshErrors(){this.activewnd&&this.activewnd.markErrors&&(this.lasterrors&&this.lasterrors.length?this.activewnd.markErrors(this.lasterrors):this.activewnd.clearErrors())}getActive(){return this.activewnd}getActiveID(){return this.activeid}getCurrentText(){if(this.activewnd&&this.activewnd.getValue)return this.activewnd.getValue();bootbox.alert("Please switch to an editor window.")}resize(){this.activeid&&this.activewnd&&this.activewnd.recreateOnResize&&(this.activewnd=null,this.id2window[this.activeid]=null,this.id2div[this.activeid]=null,this.createOrShow(this.activeid))}updateFile(t,i){var u=this.id2window[t];u&&u.setText&&typeof i=="string"?(u.setText(i),this.undofiles.push(t)):this.project.updateFile(t,i)}undoStep(){var t=this.undofiles.pop(),i=this.id2window[t];i&&i.undoStep?i.undoStep():bootbox.alert("No more steps to undo.")}updateAllOpenWindows(t){for(var i in this.id2window){var u=this.id2window[i];u&&u.setText&&t.getItem(i).then(d=>{this.updateFile(i,d)})}}findWindowWithFilePrefix(t){t=gr(ir(t));for(var i in this.id2createfn)if(!(i.toLowerCase().endsWith(".h")||i.toLowerCase().endsWith(".inc")||i.toLowerCase().endsWith(".bas"))&&gr(ir(i))==t)return i;return null}};function Oa(f){var t={};if(f)for(var i in f)t[f[i]]=i;return t}var Nn=class{constructor(t,i){this.symbolmap=t,this.debuginfo=i,this.addr2symbol=Oa(t),this.addr2symbol[0]||(this.addr2symbol[0]="$00"),this.addr2symbol[65536]="__END__"}},In=class{constructor(){this.id2bp={}}getDebugCondition(){return Object.keys(this.id2bp).length==0?null:()=>{var t=!1;for(var i in this.id2bp)this.id2bp[i].cond()&&(t=!0);return t}}};function ks(f,t){f.onkeydown=i=>{t(i.which,0,1|Bi(i)),(i.ctrlKey||i.which==8||i.which==9||i.which==27)&&i.preventDefault()},f.onkeyup=i=>{t(i.which,0,64|Bi(i))},f.onkeypress=i=>{t(i.which,i.charCode,128|Bi(i))}}var lt={ANYKEY:{c:0,n:"?"},UP:{c:38,n:"Up",plyr:0,yaxis:-1},DOWN:{c:40,n:"Down",plyr:0,yaxis:1},LEFT:{c:37,n:"Left",plyr:0,xaxis:-1},RIGHT:{c:39,n:"Right",plyr:0,xaxis:1},A:{c:32,n:"Space",plyr:0,button:0},B:{c:16,n:"Shift",plyr:0,button:1},GP_A:{c:88,n:"X",plyr:0,button:0},GP_B:{c:90,n:"Z",plyr:0,button:1},GP_C:{c:86,n:"V",plyr:0,button:2},GP_D:{c:67,n:"C",plyr:0,button:3},SELECT:{c:220,n:"\\",plyr:0,button:8},START:{c:13,n:"Enter",plyr:0,button:9},P2_UP:{c:87,n:"W",plyr:1,yaxis:-1},P2_DOWN:{c:83,n:"S",plyr:1,yaxis:1},P2_LEFT:{c:65,n:"A",plyr:1,xaxis:-1},P2_RIGHT:{c:68,n:"D",plyr:1,xaxis:1},P2_A:{c:84,n:"T",plyr:1,button:0},P2_B:{c:82,n:"R",plyr:1,button:1},P2_GP_A:{c:69,n:"E",plyr:1,button:0},P2_GP_B:{c:82,n:"R",plyr:1,button:1},P2_GP_C:{c:84,n:"T",plyr:1,button:2},P2_GP_D:{c:89,n:"Y",plyr:1,button:3},P2_SELECT:{c:70,n:"F",plyr:1,button:8},P2_START:{c:71,n:"G",plyr:1,button:9},VK_ESCAPE:{c:27,n:"Esc"},VK_F1:{c:112,n:"F1"},VK_F2:{c:113,n:"F2"},VK_F3:{c:114,n:"F3"},VK_F4:{c:115,n:"F4"},VK_F5:{c:116,n:"F5"},VK_F6:{c:117,n:"F6"},VK_F7:{c:118,n:"F7"},VK_F8:{c:119,n:"F8"},VK_F9:{c:120,n:"F9"},VK_F10:{c:121,n:"F10"},VK_F11:{c:122,n:"F11"},VK_F12:{c:123,n:"F12"},VK_SCROLL_LOCK:{c:145,n:"ScrLck"},VK_PAUSE:{c:19,n:"Pause"},VK_QUOTE:{c:192,n:"'"},VK_1:{c:49,n:"1"},VK_2:{c:50,n:"2"},VK_3:{c:51,n:"3"},VK_4:{c:52,n:"4"},VK_5:{c:53,n:"5"},VK_6:{c:54,n:"6"},VK_7:{c:55,n:"7"},VK_8:{c:56,n:"8"},VK_9:{c:57,n:"9"},VK_0:{c:48,n:"0"},VK_MINUS:{c:189,n:"-"},VK_MINUS2:{c:173,n:"-"},VK_EQUALS:{c:187,n:"="},VK_EQUALS2:{c:61,n:"="},VK_BACK_SPACE:{c:8,n:"Bkspc"},VK_TAB:{c:9,n:"Tab"},VK_Q:{c:81,n:"Q"},VK_W:{c:87,n:"W"},VK_E:{c:69,n:"E"},VK_R:{c:82,n:"R"},VK_T:{c:84,n:"T"},VK_Y:{c:89,n:"Y"},VK_U:{c:85,n:"U"},VK_I:{c:73,n:"I"},VK_O:{c:79,n:"O"},VK_P:{c:80,n:"P"},VK_ACUTE:{c:219,n:"\xB4"},VK_OPEN_BRACKET:{c:221,n:"["},VK_CLOSE_BRACKET:{c:220,n:"]"},VK_CAPS_LOCK:{c:20,n:"CpsLck"},VK_A:{c:65,n:"A"},VK_S:{c:83,n:"S"},VK_D:{c:68,n:"D"},VK_F:{c:70,n:"F"},VK_G:{c:71,n:"G"},VK_H:{c:72,n:"H"},VK_J:{c:74,n:"J"},VK_K:{c:75,n:"K"},VK_L:{c:76,n:"L"},VK_CEDILLA:{c:186,n:"\xC7"},VK_TILDE:{c:222,n:"~"},VK_ENTER:{c:13,n:"Enter"},VK_SHIFT:{c:16,n:"Shift"},VK_BACK_SLASH:{c:226,n:"\\"},VK_Z:{c:90,n:"Z"},VK_X:{c:88,n:"X"},VK_C:{c:67,n:"C"},VK_V:{c:86,n:"V"},VK_B:{c:66,n:"B"},VK_N:{c:78,n:"N"},VK_M:{c:77,n:"M"},VK_COMMA:{c:188,n:"] ="},VK_PERIOD:{c:190,n:"."},VK_SEMICOLON:{c:191,n:";"},VK_SLASH:{c:193,n:"/"},VK_CONTROL:{c:17,n:"Ctrl"},VK_ALT:{c:18,n:"Alt"},VK_SPACE:{c:32,n:"Space"},VK_INSERT:{c:45,n:"Ins"},VK_DELETE:{c:46,n:"Del"},VK_HOME:{c:36,n:"Home"},VK_END:{c:35,n:"End"},VK_PAGE_UP:{c:33,n:"PgUp"},VK_PAGE_DOWN:{c:34,n:"PgDown"},VK_UP:{c:38,n:"Up"},VK_DOWN:{c:40,n:"Down"},VK_LEFT:{c:37,n:"Left"},VK_RIGHT:{c:39,n:"Right"},VK_NUM_LOCK:{c:144,n:"Num"},VK_DIVIDE:{c:111,n:"Num /"},VK_MULTIPLY:{c:106,n:"Num *"},VK_SUBTRACT:{c:109,n:"Num -"},VK_ADD:{c:107,n:"Num +"},VK_DECIMAL:{c:194,n:"Num ."},VK_NUMPAD0:{c:96,n:"Num 0"},VK_NUMPAD1:{c:97,n:"Num 1"},VK_NUMPAD2:{c:98,n:"Num 2"},VK_NUMPAD3:{c:99,n:"Num 3"},VK_NUMPAD4:{c:100,n:"Num 4"},VK_NUMPAD5:{c:101,n:"Num 5"},VK_NUMPAD6:{c:102,n:"Num 6"},VK_NUMPAD7:{c:103,n:"Num 7"},VK_NUMPAD8:{c:104,n:"Num 8"},VK_NUMPAD9:{c:105,n:"Num 9"},VK_NUMPAD_CENTER:{c:12,n:"Num Cntr"}};function Bi(f){return(f.shiftKey?2:0)|(f.ctrlKey?4:0)|(f.altKey?8:0)|(f.metaKey?16:0)}function Ba(f,t,i,u){var d=f.createElement("canvas");return d.width=i,d.height=u,d.classList.add("emuvideo"),d.tabIndex=-1,t.appendChild(d),d}var On=class{constructor(t,i,u,d){this.paddle_x=255;this.paddle_y=255;this.mainElement=t,this.width=i,this.height=u,this.options=d}setRotate(t){var i=this.canvas;t?(i.style.transform="rotate("+t+"deg)",i.width<i.height&&(i.style.paddingLeft=i.style.paddingRight="10%")):(i.style.transform=null,i.style.paddingLeft=i.style.paddingRight=null)}create(t){var i;this.canvas=i=Ba(t||document,this.mainElement,this.width,this.height),this.vcanvas=$(i),this.options&&this.options.rotate&&this.setRotate(this.options.rotate),this.options&&this.options.overscan&&this.vcanvas.css("padding","0px"),this.options&&this.options.aspect&&(console.log(this.options),this.vcanvas.css("aspect-ratio",this.options.aspect+"")),this.ctx=i.getContext("2d"),this.imageData=this.ctx.createImageData(this.width,this.height),this.datau32=new Uint32Array(this.imageData.data.buffer)}setKeyboardEvents(t){ks(this.canvas,t)}getFrameData(){return this.datau32}getContext(){return this.ctx}updateFrame(t,i,u,d,y,g){y&&g?this.ctx.putImageData(this.imageData,t,i,u,d,y,g):this.ctx.putImageData(this.imageData,0,0)}setupMouseEvents(t){t||(t=this.canvas),$(t).mousemove(i=>{var u=Vi(t,i),d=Math.floor(u.x*255/this.canvas.width),y=Math.floor(u.y*255/this.canvas.height);this.paddle_x=Ds(0,255,d),this.paddle_y=Ds(0,255,y)})}};function Ds(f,t,i){return i<f?f:i>t?t:i}var Va=!1,Bn=class{constructor(t,i){this.running=!1;this.pulsing=!1;this.nextts=0;this.useReqAnimFrame=Va&&typeof window.requestAnimationFrame=="function";this.frameRate=t,this.intervalMsec=1e3/t,this.callback=i}scheduleFrame(t){var i=u=>{try{this.nextFrame(this.useReqAnimFrame?u:Date.now())}catch(d){throw this.running=!1,this.pulsing=!1,d}};this.useReqAnimFrame?window.requestAnimationFrame(i):setTimeout(i,t)}nextFrame(t){t>this.nextts&&(this.running&&this.callback(),this.nframes==0&&(this.startts=t),this.nframes++==300&&console.log("Avg framerate: "+this.nframes*1e3/(t-this.startts)+" fps")),this.nextts+=this.intervalMsec,t-this.nextts>1e3&&(this.nextts=t),this.running?this.scheduleFrame(this.nextts-t):this.pulsing=!1}isRunning(){return this.running}start(){this.running||(this.running=!0,this.nextts=0,this.nframes=0,this.pulsing||(this.scheduleFrame(0),this.pulsing=!0))}stop(){this.running=!1}};function Vi(f,t){var i=f.getBoundingClientRect(),u=f.width/i.width,d=f.height/i.height;return{x:(t.clientX-i.left)*u,y:(t.clientY-i.top)*d}}var Wa=function(f){var t=this,i,u,d,y,g,C,w,N,W=4;function se(V){var oe=V.outputBuffer.getChannelData(0),ie=this.module;if(ie||(ie=V.srcElement.module),!!ie)if(ie.callback){ie.callback(oe);return}else{for(var Ae=C[w],Ke=0;Ke<oe.length;Ke++)oe[Ke]=Ae[Ke];w=(w+1)%C.length}}function z(){if(C)for(var V of C)V.fill(0)}function q(){var V=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;if(!V){console.log("no web audio context");return}t.context=new V,t.sr=t.context.sampleRate,t.bufferlen=2048,t.filterNode=t.context.createBiquadFilter(),t.filterNode.type="lowshelf",t.filterNode.frequency.value=100,t.filterNode.gain.value=-6,typeof t.context.createScriptProcessor=="function"?t.mixerNode=t.context.createScriptProcessor(t.bufferlen,1,1):t.mixerNode=t.context.createJavaScriptNode(t.bufferlen,1,1),t.mixerNode.module=t,t.mixerNode.onaudioprocess=se,t.compressorNode=t.context.createDynamicsCompressor(),t.mixerNode.connect(t.filterNode),t.filterNode.connect(t.compressorNode),t.compressorNode.connect(t.context.destination)}this.start=function(){if(this.context){this.context.state=="suspended"&&this.context.resume();return}if(q(),!!this.context){u=this.sr*1/f,i=0,d=0,g=0,C=[],w=1,N=0;for(var V=0;V<W;V++){var oe=new ArrayBuffer(t.bufferlen*4);C[V]=new Float32Array(oe)}y=C[0]}},this.stop=function(){this.context&&this.context.suspend&&this.context.suspend(),z()},this.close=function(){this.context&&(this.context.close(),this.context=null)},this.addSingleSample=function(V){if(y&&(y[g++]=V,g>=y.length)){g=0,C[N]=y;var oe=(N+1)%C.length;oe==w?N=Math.floor(w+W/2)%C.length:N=oe,y=C[N]}},this.feedSample=function(V,oe){if(d+=V*oe,i+=u*oe,i>=1){for(d/=i;i>=1;)this.addSingleSample(d*u),i-=1;d*=i}}},Vn=class{constructor(t){this.sa=new Wa(t)}feedSample(t,i){this.sa.feedSample(t,i)}start(){this.sa.start()}stop(){this.sa.stop()}};var ja=[lt.UP,lt.DOWN,lt.LEFT,lt.RIGHT,lt.A,lt.B,lt.SELECT,lt.START,lt.P2_UP,lt.P2_DOWN,lt.P2_LEFT,lt.P2_RIGHT,lt.P2_A,lt.P2_B,lt.P2_SELECT,lt.P2_START],Wn=class{constructor(t){this.active=!1;this.state=new Int8Array(32);this.lastState=new Int8Array(32);this.AXIS0=24;this.handler=t,window.addEventListener("gamepadconnected",i=>{console.log("Gamepad connected:",i),this.active=typeof navigator.getGamepads=="function"}),window.addEventListener("gamepaddisconnected",i=>{console.log("Gamepad disconnected:",i)})}poll(){if(this.active)for(var t=navigator.getGamepads(),i=0;i<t.length;i++){var u=t[i];if(u){for(var d=0;d<u.axes.length;d++){var y=d+this.AXIS0;this.state[y]=Math.round(u.axes[d]),this.state[y]!=this.lastState[y]&&this.handleStateChange(i,y)}for(var d=0;d<u.buttons.length;d++)this.state[d]=u.buttons[d].pressed?1:0,this.state[d]!=this.lastState[d]&&this.handleStateChange(i,d);this.lastState.set(this.state)}}}handleStateChange(t,i){var u=i-this.AXIS0;for(var d of ja)if(d&&d.plyr==t){var y=d.c,g=this.state[i],C=this.lastState[i];if(i==d.button||u==0&&d.xaxis==g||u==1&&d.yaxis==g){g!=0?this.handler(y,0,1):this.handler(y,0,64);break}else if(g==0&&u==0&&d.xaxis==C||u==1&&d.yaxis==C){this.handler(y,0,64);break}}}};var Ls=1;function Ua(){return Ls}function za(f){Ls=f}var Hn=class{constructor(t){this.checkpointInterval=10;this.maxCheckpoints=300;this.reset(),this.platform=t}reset(){this.checkpoints=[],this.framerecs=[],this.frameCount=0,this.lastSeekFrame=0,this.lastSeekStep=0,this.lastStepCount=0,this.callbackStateChanged&&this.callbackStateChanged()}frameRequested(){var t={controls:this.platform.saveControlsState(),seed:Ua()},i=!1;return this.lastSeekFrame<this.frameCount?this.loadControls(this.lastSeekFrame):(this.platform.saveControlsState&&this.framerecs.push(t),i=this.frameCount++%this.checkpointInterval==0),this.lastSeekFrame++,this.lastSeekStep=0,this.callbackStateChanged&&this.callbackStateChanged(),i}numFrames(){return this.frameCount}currentFrame(){return this.lastSeekFrame}currentStep(){return this.lastSeekStep}recordFrame(t){this.checkpoints.push(t),this.callbackNewCheckpoint&&this.callbackNewCheckpoint(t),this.checkpoints.length>this.maxCheckpoints&&(this.checkpoints.shift(),this.framerecs=this.framerecs.slice(this.checkpointInterval),this.lastSeekFrame-=this.checkpointInterval,this.frameCount-=this.checkpointInterval,this.callbackStateChanged&&this.callbackStateChanged())}getStateAtOrBefore(t){if(t<=0&&this.checkpoints.length>0)return{frame:0,state:this.checkpoints[0]};var i=Math.floor(t/this.checkpointInterval),u=i<this.checkpoints.length?i:this.checkpoints.length-1,d=u*this.checkpointInterval;return{frame:d,state:this.checkpoints[u]}}loadFrame(t,i){if(t|=0,i|=0,t==this.lastSeekFrame&&i==this.lastSeekStep)return t;let{frame:u,state:d}=this.getStateAtOrBefore(t-1);if(d){var y=0;for(this.platform.pause(),this.platform.loadState(d);u<t;)u<this.framerecs.length&&this.loadControls(u),u++,y=this.platform.advance(u<t);return u==0&&(y=this.platform.advance(!0),this.platform.loadState(d)),i>0&&this.platform.advanceFrameClock&&(i=this.platform.advanceFrameClock(null,i)),this.lastSeekFrame=t,this.lastSeekStep=i,this.lastStepCount=y,t}else return-1}loadControls(t){this.platform.loadControlsState&&this.platform.loadControlsState(this.framerecs[t].controls),za(this.framerecs[t].seed)}};var jn=class{constructor(t,i){this.idx=0;this.sl=0;this.cur_sp=-1;this.singleFrame=!0;this.m=t,this.reset(i||1048576)}start(){this.m.connectProbe(this)}stop(){this.m.connectProbe(null)}reset(t){t&&(this.buf=new Uint32Array(t)),this.sl=0,this.cur_sp=-1,this.clear()}clear(){this.idx=0}logData(t){this.log(t)}log(t){this.idx>=this.buf.length||(this.buf[this.idx++]=t)}relog(t){this.buf[this.idx-1]=t}lastOp(){return this.idx>0?this.buf[this.idx-1]&4278190080:-1}lastAddr(){return this.idx>0?this.buf[this.idx-1]&16777215:-1}addLogBuffer(t){this.idx+t.length>this.buf.length&&(t=t.slice(0,this.buf.length-this.idx)),this.buf.set(t,this.idx),this.idx+=t.length}logClocks(t){t|=0,t>0&&(this.lastOp()==0?this.relog(this.lastAddr()+t|0):this.log(t|0))}logNewScanline(){this.log(2113929216),this.sl++}logNewFrame(){this.log(2130706432),this.sl=0,this.singleFrame&&this.clear()}logExecute(t,i){this.cur_sp!==i&&(i<this.cur_sp&&this.log(167772160|i),i>this.cur_sp&&this.log(184549376|i),this.cur_sp=i),this.log(t|16777216)}logInterrupt(t){this.log(t|134217728)}logValue(t,i,u){this.log(t&65535|(i&255)<<16|u)}logRead(t,i){this.logValue(t,i,301989888)}logWrite(t,i){this.logValue(t,i,318767104)}logIORead(t,i){this.logValue(t,i,335544320)}logIOWrite(t,i){this.logValue(t,i,352321536)}logVRAMRead(t,i){this.logValue(t,i,369098752)}logVRAMWrite(t,i){this.logValue(t,i,385875968)}logIllegal(t){this.log(t|150994944)}countEvents(t){for(var i=0,u=0;u<this.idx;u++)(this.buf[u]&4278190080)==t&&i++;return i}countClocks(){for(var t=0,i=0;i<this.idx;i++)this.buf[i]&4278190080||(t+=this.buf[i]&65535);return t}};var Un=class{logClocks(){}logNewScanline(){}logNewFrame(){}logExecute(){}logInterrupt(){}logRead(){}logWrite(){}logIORead(){}logIOWrite(){}logVRAMRead(){}logVRAMWrite(){}logIllegal(){}logData(){}addLogBuffer(t){}};var Yt=class extends Error{constructor(i,u){super(i);this.$loc=u,Object.setPrototypeOf(this,Yt.prototype)}};var Jr=class{constructor(){this.maxROMSize=262144;this.numTotalScanlines=312;this.cpuCyclesPerLine=224;this.joymask0=0;this.videoOffsetBytes=0;this.prefix="zx";var t=this;this.cpu={getPC:t.getPC.bind(t),getSP:t.getSP.bind(t),isStable:t.isStable.bind(t),reset:t.reset.bind(t),saveState:()=>t.getCPUState(),loadState:()=>{console.log("loadState not implemented")},connectMemoryBus(){console.log("connectMemoryBus not implemented")}}}async fetchWASM(){var t=await fetch("wasm/zx.wasm");if(t.status==200||t.size){var i=await t.arrayBuffer(),u=await WebAssembly.compile(i),d=await WebAssembly.instantiate(u,{});this.instance=d,this.exports=d.exports}else throw new Error("could not load WASM file")}async fetchBIOS(){var t=await fetch("roms/opense.rom");if(t.status==200||t.size){var i=await t.arrayBuffer();this.biosptr=this.exports.malloc(i.byteLength),this.biosarr=new Uint8Array(this.exports.memory.buffer,this.biosptr,i.byteLength),this.loadBIOS(new Uint8Array(i))}else throw new Error("could not load BIOS file")}async initWASM(){this.sys=this.exports.machine_init(this.biosptr);let t=this.exports.machine_get_state_size();this.stateptr=this.exports.malloc(t);let i=this.exports.machine_get_controls_state_size();this.ctrlstateptr=this.exports.malloc(i);let u=this.exports.machine_get_cpu_state_size();this.cpustateptr=this.exports.malloc(u),this.romptr=this.exports.malloc(this.maxROMSize),this.statearr=new Uint8Array(this.exports.memory.buffer,this.stateptr,t),this.ctrlstatearr=new Uint8Array(this.exports.memory.buffer,this.ctrlstateptr,i),this.cpustatearr=new Uint8Array(this.exports.memory.buffer,this.cpustateptr,u);let d=4096*4;this.audioarr=new Float32Array(this.exports.memory.buffer,this.exports.machine_get_sample_buffer(),d),this.romarr=new Uint8Array(this.exports.memory.buffer,this.romptr,this.maxROMSize),console.log("machine_init",this.sys,t,i,u,d)}async loadWASM(){await this.fetchWASM(),this.exports.memory.grow(96),await this.fetchBIOS(),await this.initWASM()}getPC(){return this.exports.machine_cpu_get_pc(this.sys)}getSP(){return this.exports.machine_cpu_get_sp(this.sys)}isStable(){return this.exports.machine_cpu_is_stable(this.sys)}loadROM(t){if(t.length>this.maxROMSize)throw new Yt(`Rom size too big: ${t.length} bytes`);this.romarr.set(t),this.romlen=t.length,console.log("load rom",t.length,"bytes"),console.assert(t.length===32600,"unexpected rom length"),this.reset()}loadBIOS(t){this.biosarr.set(t)}read(t){return this.exports.machine_mem_read(this.sys,t&65535)}readConst(t){return this.exports.machine_mem_read(this.sys,t&65535)}write(t,i){this.exports.machine_mem_write(this.sys,t&65535,i&255)}getAudioParams(){return{sampleRate:44100,stereo:!1}}connectVideo(t){this.pixel_dest=t;var i=this.exports.machine_get_pixel_buffer(this.sys);console.log("connectVideo",i,t.length),this.pixel_src=new Uint32Array(this.exports.memory.buffer,i+this.videoOffsetBytes,t.length)}syncVideo(){this.exports.machine_update_video&&this.exports.machine_update_video(this.sys),this.pixel_dest!=null&&this.pixel_dest.set(this.pixel_src)}saveControlsState(){return this.exports.machine_save_controls_state(this.sys,this.ctrlstateptr),{controls:this.ctrlstatearr.slice(0)}}loadControlsState(t){this.ctrlstatearr.set(t.controls),this.exports.machine_load_controls_state(this.sys,this.ctrlstateptr)}connectAudio(t){this.audio=t}syncAudio(){if(this.audio!=null)for(var t=this.exports.machine_get_sample_count(),i=0;i<t;i++)this.audio.feedSample(this.audioarr[i],1)}advanceFrameClock(t,i){var u;if(t)for(u=0;u<i&&!t();u++)this.exports.machine_tick(this.sys);else this.exports.machine_exec(this.sys,i),u=i;return this.syncVideo(),this.syncAudio(),u}copyProbeData(){if(this.probe&&!(this.probe instanceof Un)){var t=this.exports.machine_get_probe_buffer_size(),i=this.exports.machine_get_probe_buffer_address(),u=new Uint32Array(this.exports.memory.buffer,i,t);this.probe.logNewFrame(),this.probe.addLogBuffer(u)}}connectProbe(t){this.probe=t}reset(){this.exports.machine_reset(this.sys),this.exports.machine_exec(this.sys,5e5),this.romptr&&this.romlen&&this.exports.machine_load_rom(this.sys,this.romptr,this.romlen);for(var t=0;t<128;t++)this.setKeyInput(t,0,64)}advanceFrame(t){var i=this.probe!=null;i&&this.exports.machine_reset_probe_buffer();var u=this.advanceFrameClock(t,Math.floor(1e6/50));return i&&this.copyProbeData(),u}getCPUState(){this.exports.machine_save_cpu_state(this.sys,this.cpustateptr);var t=this.cpustatearr,i=t[9]+(t[8]<<8),u=t[10]+(t[11]<<8),d=t[12]+(t[13]<<8),y=t[14]+(t[15]<<8),g=t[24]+(t[25]<<8),C=t[26]+(t[27]<<8),w=t[28]+(t[29]<<8),N=t[34]+(t[35]<<8),W=t[36]+(t[37]<<8);return{PC:N,SP:g,AF:i,BC:y,DE:d,HL:u,IX:w,IY:C,IR:W,o:this.readConst(N)}}saveState(){return this.exports.machine_save_state(this.sys,this.stateptr),{c:this.getCPUState(),state:this.statearr.slice(0)}}loadState(t){this.statearr.set(t.state),this.exports.machine_load_state(this.sys,this.stateptr)}getVideoParams(){return{width:320,height:256,overscan:!0,videoFrequency:50}}setKeyInput(t,i,u){if(!(t==16||t==17||t==18||t==224)){var d=0,y=0;t==37&&(t=8,d=4),t==38&&(t=11,d=1),t==39&&(t=9,d=8),t==40&&(t=10,d=2),t==32&&(d=16),t==65&&(t=65,y=4),t==87&&(t=87,y=1),t==68&&(t=68,y=8),t==83&&(t=83,y=2),t==69&&(y=16),t==113&&(t=241),t==115&&(t=243),t==119&&(t=245),t==121&&(t=247),u&1?(this.exports.machine_key_down(this.sys,t),this.joymask0|=d):u&64&&(this.exports.machine_key_up(this.sys,t),this.joymask0&=~d),this.exports.zx_joystick(this.sys,this.joymask0,0)}}};var Ps=["nop","ld bc,xx","ld (bc),a","inc bc","inc b","dec b","ld b,x","rlca","ex af,af'","add hl,bc","ld a,(bc)","dec bc","inc c","dec c","ld c,x","rrca","djnz x","ld de,xx","ld (de),a","inc de","inc d","dec d","ld d,x","rla","jr x","add hl,de","ld a,(de)","dec de","inc e","dec e","ld e,x","rra","jr nz,x","ld hl,xx","ld (xx),hl","inc hl","inc h","dec h","ld h,x","daa","jr z,x","add hl,hl","ld hl,(xx)","dec hl","inc l","dec l","ld l,x","cpl","jr nc,x","ld sp,xx","ld (xx),a","inc sp","inc (hl)","dec (hl)","ld (hl),x","scf","jr c,x","add hl,sp","ld a,(xx)","dec sp","inc a","dec a","ld a,x","ccf","ld b,b","ld b,c","ld b,d","ld b,e","ld b,h","ld b,l","ld b,(hl)","ld b,a","ld c,b","ld c,c","ld c,d","ld c,e","ld c,h","ld c,l","ld c,(hl)","ld c,a","ld d,b","ld d,c","ld d,d","ld d,e","ld d,h","ld d,l","ld d,(hl)","ld d,a","ld e,b","ld e,c","ld e,d","ld e,e","ld e,h","ld e,l","ld e,(hl)","ld e,a","ld h,b","ld h,c","ld h,d","ld h,e","ld h,h","ld h,l","ld h,(hl)","ld h,a","ld l,b","ld l,c","ld l,d","ld l,e","ld l,h","ld l,l","ld l,(hl)","ld l,a","ld (hl),b","ld (hl),c","ld (hl),d","ld (hl),e","ld (hl),h","ld (hl),l","halt","ld (hl),a","ld a,b","ld a,c","ld a,d","ld a,e","ld a,h","ld a,l","ld a,(hl)","ld a,a","add a,b","add a,c","add a,d","add a,e","add a,h","add a,l","add a,(hl)","add a,a","adc a,b","adc a,c","adc a,d","adc a,e","adc a,h","adc a,l","adc a,(hl)","adc a,a","sub b","sub c","sub d","sub e","sub h","sub l","sub (hl)","sub a","sbc a,b","sbc a,c","sbc a,d","sbc a,e","sbc a,h","sbc a,l","sbc a,(hl)","sbc a,a","and b","and c","and d","and e","and h","and l","and (hl)","and a","xor b","xor c","xor d","xor e","xor h","xor l","xor (hl)","xor a","or b","or c","or d","or e","or h","or l","or (hl)","or a","cp b","cp c","cp d","cp e","cp h","cp l","cp (hl)","cp a","ret nz","pop bc","jp nz,xx","jp xx","call nz,xx","push bc","add a,x","rst 00h","ret z","ret","jp z,xx","xxBITxx","call z,xx","call xx","adc a,x","rst 08h","ret nc","pop de","jp nc,xx","out (x),a","call nc,xx","push de","sub x","rst 10h","ret c","exx","jp c,xx","in a,(x)","call c,xx","xxIXxx","sbc a,x","rst 18h","ret po","pop hl","jp po,xx","ex (sp),hl","call po,xx","push hl","and x","rst 20h","ret pe","jp (hl)","jp pe,xx","ex de,hl","call pe,xx","xx80xx","xor x","rst 28h","ret p","pop af","jp p,xx","di","call p,xx","push af","or x","rst 30h","ret m","ld sp,hl","jp m,xx","ei","call m,xx","xxIYxx","cp x","rst 38h"],Rs=["in b,(c)","out (c),b","sbc hl,bc","ld (xx),bc","neg","retn","im 0","ld i,a","in c,(c)","out (c),c","adc hl,bc","ld bc,(xx)","neg","reti","","ld r,a","in d,(c)","out (c),d","sbc hl,de","ld (xx),de","neg","retn","im 1","ld a,i","in e,(c)","out (c),e","adc hl,de","ld de,(xx)","neg","retn","im 2","ld a,r","in h,(c)","out (c),h","sbc hl,hl","ld (xx),hl","neg","retn","","rrd","in l,(c)","out (c),l","adc hl,hl","ld hl,(xx)","neg","retn","","rld","in f,(c)","out (c),f","sbc hl,sp","ld (xx),sp","neg","retn","","","in a,(c)","out (c),a","adc hl,sp","ld sp,(xx)","neg","reti","","","ldi","cpi","ini","outi","","","","","ldd","cpd","ind","outd","","","","","ldir","cpir","inir","otir","","","","","lddr","cpdr","indr","otdr","","","",""],Ms=["rlc b","rlc c","rlc d","rlc e","rlc h","rlc l","rlc (hl)","rlc a","rrc b","rrc c","rrc d","rrc e","rrc h","rrc l","rrc (hl)","rrc a","rl b","rl c","rl d","rl e","rl h","rl l","rl (hl)","rl a","rr b","rr c","rr d","rr e","rr h","rr l","rr (hl)","rr a","sla b","sla c","sla d","sla e","sla h","sla l","sla (hl)","sla a","sra b","sra c","sra d","sra e","sra h","sra l","sra (hl)","sra a","sll b","sll c","sll d","sll e","sll h","sll l","sll (hl)","sll a","srl b","srl c","srl d","srl e","srl h","srl l","srl (hl)","srl a","bit 0,b","bit 0,c","bit 0,d","bit 0,e","bit 0,h","bit 0,l","bit 0,(hl)","bit 0,a","bit 1,b","bit 1,c","bit 1,d","bit 1,e","bit 1,h","bit 1,l","bit 1,(hl)","bit 1,a","bit 2,b","bit 2,c","bit 2,d","bit 2,e","bit 2,h","bit 2,l","bit 2,(hl)","bit 2,a","bit 3,b","bit 3,c","bit 3,d","bit 3,e","bit 3,h","bit 3,l","bit 3,(hl)","bit 3,a","bit 4,b","bit 4,c","bit 4,d","bit 4,e","bit 4,h","bit 4,l","bit 4,(hl)","bit 4,a","bit 5,b","bit 5,c","bit 5,d","bit 5,e","bit 5,h","bit 5,l","bit 5,(hl)","bit 5,a","bit 6,b","bit 6,c","bit 6,d","bit 6,e","bit 6,h","bit 6,l","bit 6,(hl)","bit 6,a","bit 7,b","bit 7,c","bit 7,d","bit 7,e","bit 7,h","bit 7,l","bit 7,(hl)","bit 7,a","res 0,b","res 0,c","res 0,d","res 0,e","res 0,h","res 0,l","res 0,(hl)","res 0,a","res 1,b","res 1,c","res 1,d","res 1,e","res 1,h","res 1,l","res 1,(hl)","res 1,a","res 2,b","res 2,c","res 2,d","res 2,e","res 2,h","res 2,l","res 2,(hl)","res 2,a","res 3,b","res 3,c","res 3,d","res 3,e","res 3,h","res 3,l","res 3,(hl)","res 3,a","res 4,b","res 4,c","res 4,d","res 4,e","res 4,h","res 4,l","res 4,(hl)","res 4,a","res 5,b","res 5,c","res 5,d","res 5,e","res 5,h","res 5,l","res 5,(hl)","res 5,a","res 6,b","res 6,c","res 6,d","res 6,e","res 6,h","res 6,l","res 6,(hl)","res 6,a","res 7,b","res 7,c","res 7,d","res 7,e","res 7,h","res 7,l","res 7,(hl)","res 7,a","set 0,b","set 0,c","set 0,d","set 0,e","set 0,h","set 0,l","set 0,(hl)","set 0,a","set 1,b","set 1,c","set 1,d","set 1,e","set 1,h","set 1,l","set 1,(hl)","set 1,a","set 2,b","set 2,c","set 2,d","set 2,e","set 2,h","set 2,l","set 2,(hl)","set 2,a","set 3,b","set 3,c","set 3,d","set 3,e","set 3,h","set 3,l","set 3,(hl)","set 3,a","set 4,b","set 4,c","set 4,d","set 4,e","set 4,h","set 4,l","set 4,(hl)","set 4,a","set 5,b","set 5,c","set 5,d","set 5,e","set 5,h","set 5,l","set 5,(hl)","set 5,a","set 6,b","set 6,c","set 6,d","set 6,e","set 6,h","set 6,l","set 6,(hl)","set 6,a","set 7,b","set 7,c","set 7,d","set 7,e","set 7,h","set 7,l","set 7,(hl)","set 7,a"];function Fs(f,t,i,u,d){var y,g,C=[t,i,u,d],w=!1;switch(y=1,t){case 203:g=Ms[i],y++;break;case 237:i>=64&&i<=127&&(g=Rs[i-64]),i>=160&&i<=191&&(g=Rs[i-160+64]),y++;break;case 221:case 253:var N=t==221?"ix":"iy";i==203?(g=Ms[d],C[2]=d,C[3]=u,y++):g=Ps[i],g=g.replace(/[(]hl[)]/,"("+N+"+x)"),g=g.replace(/\bhl\b/,N),y++;break;default:g=Ps[t];break}if((!g||!g.length)&&(g="??"),/\bxx\b/.test(g))g=g.replace(/\bxx\b/,"$"+_e(C[y]+(C[y+1]<<8),4)),y+=2,w=!0;else if(/\bx\b/.test(g)){if(g.startsWith("j")){var W=i<128?f+2+i:f+2-(256-i);W&=65535,g=g.replace(/\bx\b/,"$"+_e(W,4)),w=!0}else g=g.replace(/\bx\b/,"$"+_e(C[y],2));y+=1}return{line:g.toUpperCase(),nbytes:y,isaddr:w}}var Er=class{constructor(t){this.recorder=null;this.internalFiles={};this.debugSavedState=null;this.debugBreakState=null;this.debugTargetClock=0;this.debugClock=0;this.breakpoints=new In;this.frameCount=0;this.mainElement=t}setRecorder(t){this.recorder=t}updateRecorder(){this.recorder&&this.isRunning()&&this.recorder.frameRequested()&&this.recorder.recordFrame(this.saveState())}inspect(t){if(this.debugSymbols){var i=this.debugSymbols.symbolmap,u=this.debugSymbols.addr2symbol;if(!i||!this.readAddress)return null;var d=i["_"+t]||i[t];if(typeof d!="number")return null;var y=this.readAddress(d);if(u&&u[d+1]!=null)return"$"+_e(d,4)+" = $"+_e(y,2)+" ("+y+" decimal)";{let g=this.readAddress(d+1),C=y|g<<8;return"$"+_e(d,4)+" = $"+_e(y,2)+" $"+_e(g,2)+" ("+(C<<16>>16)+" decimal)"}}}getDebugTree(){return this.saveState()}readFile(t){return this.internalFiles[t]}writeFile(t,i){return this.internalFiles[t]=i,!0}setBreakpoint(t,i){i?(this.breakpoints.id2bp[t]={cond:i},this.restartDebugging()):this.clearBreakpoint(t)}clearBreakpoint(t){delete this.breakpoints.id2bp[t]}getDebugCallback(){return this.breakpoints.getDebugCondition()}setupDebug(t){this.onBreakpointHit=t}clearDebug(){this.debugSavedState=null,this.debugBreakState=null,this.debugTargetClock=-1,this.debugClock=0,this.onBreakpointHit=null,this.clearBreakpoint("debug"),this.frameCount=0}setDebugCondition(t){this.setBreakpoint("debug",t)}restartDebugging(){this.debugSavedState?this.loadState(this.debugSavedState):this.debugSavedState=this.saveState(),this.debugClock=0,this.debugCallback=this.getDebugCallback(),this.debugBreakState=null,this.resume()}preFrame(){this.debugCallback&&!this.debugBreakState&&(this.debugSavedState=this.saveState(),this.debugTargetClock-=this.debugClock,this.debugClock=0)}postFrame(){this.debugCallback&&this.debugBreakState&&this.loadState(this.debugBreakState),this.frameCount++}nextFrame(t){this.pollControls(),this.updateRecorder(),this.preFrame();var i=this.advance(t);return this.postFrame(),i}breakpointHit(t,i){console.log(this.debugTargetClock,t,this.debugClock,this.isStable()),this.debugTargetClock=t,this.debugBreakState=this.saveState(),console.log("Breakpoint at clk",this.debugClock,"PC",this.debugBreakState.c.PC.toString(16)),this.pause(),this.onBreakpointHit&&this.onBreakpointHit(this.debugBreakState,i)}runEval(t){this.setDebugCondition(()=>{if(++this.debugClock>=this.debugTargetClock&&this.isStable()){var i=this.getCPUState();return t(i)?(this.breakpointHit(this.debugClock),!0):!1}})}runToPC(t){this.debugTargetClock++,this.runEval(i=>i.PC==t)}runUntilReturn(){var t=this.getSP();this.runEval(i=>i.SP>t)}runToFrameClock(t){this.restartDebugging(),this.debugTargetClock=t,this.runEval(()=>!0)}step(){this.runToFrameClock(this.debugClock+1)}stepBack(){var t,i,u=this.debugTargetClock;this.restartDebugging(),this.debugTargetClock=u-25,this.runEval(d=>this.debugClock<u?(t=this.saveState(),i=this.debugClock,!1):(t&&(this.loadState(t),this.debugClock=i),!0))}reset(){this.machine.reset()}loadState(t){this.machine.loadState(t)}saveState(){return this.machine.saveState()}getSP(){return this.machine.cpu.getSP()}isStable(){return this.machine.cpu.isStable()}getCPUState(){return this.machine.cpu.saveState()}loadControlsState(t){this.machine.loadControlsState(t)}saveControlsState(){return this.machine.saveControlsState()}async start(){this.machine=new Jr;let t=this.machine;t instanceof Jr&&await t.loadWASM();var i,u=t.getVideoParams();this.video=new On(this.mainElement,u.width,u.height,{overscan:!!u.overscan}),this.video.create(),t.connectVideo(this.video.getFrameData()),this.video.setKeyboardEvents(t.setKeyInput.bind(t)),this.poller=new Wn(t.setKeyInput.bind(t)),i=u.videoFrequency,this.timer=new Bn(i||60,this.nextFrame.bind(this));var d=t.getAudioParams();this.audio=new Vn(d.sampleRate),this.audio.start(),t.connectAudio(this.audio),this.probeRecorder=new jn(t),this.startProbing=()=>(t.connectProbe(this.probeRecorder),this.probeRecorder),this.stopProbing=()=>{t.connectProbe(null)}}loadROM(t,i){this.machine.loadROM(i)}pollControls(){this.poller&&this.poller.poll(),this.machine.pollControls&&this.machine.pollControls()}advance(t){var i=this.machine.advanceFrame(this.getDebugCallback());return!t&&this.video&&this.video.updateFrame(),i}advanceFrameClock(t,i){if(i>0)return this.machine.advanceFrameClock(t,i)}isRunning(){return this.timer&&this.timer.isRunning()}resume(){this.timer.start(),this.audio&&this.audio.start()}pause(){this.timer.stop(),this.audio&&this.audio.stop(),this.probeRecorder&&(this.probeRecorder.singleFrame=!0)}runToVsync(){this.probeRecorder&&(this.probeRecorder.clear(),this.probeRecorder.singleFrame=!1),this.restartDebugging();var t=this.frameCount;this.runEval(()=>this.frameCount>t)}getToolForFilename(t){let i=/(?:\.([^.]+))?$/.exec(t)[1];switch(i){case"c":case"h":return"sdcc";case"s":return"sdasz80";case"z":case"asm":return"zmac";default:throw`unexpected file extension: ${i}`}}disassemble(t,i){return Fs(t,i(t),i(t+1),i(t+2),i(t+3))}getPresets(){return[{id:"bios.c",name:"BIOS Routines (C)"},{id:"cosmic.c",name:"Cosmic Impalas (C)"},{id:"hello.asm",name:"Hello World (ASM)"}]}readAddress(t){return this.machine.readConst(t)}getMemoryMap(){return{main:[{name:"BIOS",start:0,size:16384,type:"rom"},{name:"Screen RAM",start:16384,size:6144,type:"ram"},{name:"Color RAM",start:22528,size:768,type:"ram"},{name:"System RAM",start:23552,size:192,type:"ram"},{name:"User RAM",start:23755,size:65368-23755,type:"ram"}]}}};var Is=Ns(),$n=class{constructor(t,i){this.boundkeys=[];this.mousetrap=i?new Is(i):Is,this.span=$(document.createElement("span")).addClass("btn_toolbar"),t.appendChild(this.span[0]),this.newGroup()}destroy(){if(this.span&&(this.span.remove(),this.span=null),this.mousetrap){for(var t of this.boundkeys)this.mousetrap.unbind(t);this.mousetrap=null}}newGroup(){return this.grp=$(document.createElement("span")).addClass("btn_group").appendTo(this.span).hide()}add(t,i,u,d){var y=null;return u&&(y=$(document.createElement("button")).addClass("btn"),u.startsWith("glyphicon")&&(u='<span class="glyphicon '+u+'" aria-hidden="true"></span>'),y.html(u),y.prop("title",t?i+" ("+t+")":i),y.click(d),this.grp.append(y).show()),t&&(this.mousetrap.bind(t,d),this.boundkeys.push(t)),y}};var Wi=window.matchMedia&&window.matchMedia("only screen and (max-width: 760px)").matches;function Os(f,t){var i=$(document.createElement("div"));return f&&i.appendTo(f),t&&i.addClass(t),i}var Hi=1024,Tr=class{getDisasmView(){return this.disasmview}createDiv(t){var i=document.createElement("div");return i.setAttribute("class","editor"),t.appendChild(i),this.newEditor(i),i}newEditor(t){this.disasmview=CodeMirror(t,{mode:"z80",theme:"cobalt",tabSize:8,readOnly:!0,styleActiveLine:!0})}refresh(t){let i=sr||Q.saveState(),u=i.c?i.c.PC:0,d=0,y=0,g=Q.debugSymbols&&Q.debugSymbols.addr2symbol||{},C=(W,se)=>{let z="",q=0;for(;q<se;){let V=W+q|0,oe=Q.disassemble(V,Q.readAddress.bind(Q)),ie="",Ae="";for(let Se=0;Se<oe.nbytes;Se++)ie+=_e(Q.readAddress(V+Se));for(;ie.length<14;)ie+=" ";let Ke=oe.line;if(g&&oe.isaddr&&(Ke=Ke.replace(/([^#])[$]([0-9A-F]+)/,(Se,...a)=>{let T=parseInt(a[1],16),M=g[T];return M?a[0]+M:(M=g[T-1],M?a[0]+M+"+1":Se)})),g){let Se=g[V];Se&&(Ae="; "+Se)}let Fe=_e(V,4)+"	"+Qr(ie,14)+"	"+Qr(Ke,30)+Ae+`
`;z+=Fe,V==u&&(y=d),d++,q+=oe.nbytes||1}return z};var w=u<0?u-Hi:Math.max(0,u-Hi);let N=C(w,u-w)+C(u,Hi);this.disasmview.setValue(N),t&&this.disasmview.setCursor(y,0),ji(this.disasmview,y)}getCursorPC(){var t=this.disasmview.getCursor().line;if(t>=0){var i=this.disasmview.getLine(t).trim().split(/\s+/);if(i&&i.length>=1){var u=parseInt(i[0],16);if(u>=0)return u}}return-1}};function ji(f,t){var i=f.charCoords({line:t,ch:0},"local").top,u=f.getScrollerElement().offsetHeight/2;f.scrollTo(null,i-u-5)}function Bs(f,t){var i=document.createElement("span");return i.setAttribute("class",t),i.appendChild(document.createTextNode(f)),i}var $a=200,Ui={default:{theme:"mbo"},z80:{isAsm:!0}},Vs={input:null},en=class{constructor(t,i){this.updateTimer=null;this.dirtylisting=!0;this.errormsgs=[];this.errorwidgets=[];this.errormarks=[];this.path=t,this.mode=i}createDiv(t){var i=document.createElement("div");i.setAttribute("class","editor"),t.appendChild(i);var u=Me.getFile(this.path);return this.newEditor(i),u&&(this.setText(u),this.editor.setSelection({line:0,ch:0},{line:0,ch:0},{scroll:!0})),this.setupEditor(),i}setVisible(t){t&&this.editor.focus()}newEditor(t){var i=Ui[this.mode]||Ui.default,u=i.isAsm,d=!!i.lineWrap,y=i.theme||Ui.default.theme,g=!i.noLineNumbers&&!Wi,C=["CodeMirror-linenumbers","gutter-offset","gutter-info"];u&&(C=["CodeMirror-linenumbers","gutter-offset","gutter-bytes","gutter-clock","gutter-info"]),(i.noGutters||Wi)&&(C=["gutter-info"]),this.editor=CodeMirror(t,{theme:y,lineNumbers:g,matchBrackets:!0,tabSize:8,indentAuto:!0,lineWrapping:d,gutters:C})}editorChanged(){clearTimeout(this.updateTimer),this.updateTimer=setTimeout(()=>{Me.updateFile(this.path,this.editor.getValue())},300),this.markHighlight&&(this.markHighlight.clear(),this.markHighlight=null)}setupEditor(){this.editor.on("changes",(t,i)=>{this.editorChanged()}),this.editor.on("cursorActivity",t=>{this.inspectUnderCursor()}),this.editor.on("gutterClick",(t,i)=>{this.toggleBreakpoint(i)}),this.editor.setOption("mode",this.mode),this.editor.on("beforeChange",(t,i)=>{Vs.input&&i.text&&(i.text=i.text.map(Vs.input))})}inspectUnderCursor(){var t=this.editor.getCursor(!0),i=this.editor.getCursor(!1);if(t.line==i.line&&t.ch<i.ch&&i.ch-t.ch<80){var u=this.editor.getSelection();this.inspect(u)}else this.inspect(null)}inspect(t){var i=Q.inspect(t);if(this.inspectWidget&&(this.inspectWidget.clear(),this.inspectWidget=null),i){var u=Bs(i,"tooltipinfoline"),d=this.editor.getCursor().line;this.inspectWidget=this.editor.addLineWidget(d,u,{above:!1})}}setText(t){var i=this.editor.getValue();i!=t&&(this.editor.setValue(t),i==""&&this.editor.clearHistory())}insertText(t){var i=this.editor.getCursor();this.editor.replaceRange(t,i,i)}highlightLines(t,i){var u="hilite-span",d={className:u,inclusiveLeft:!0};this.markHighlight=this.editor.markText({line:t,ch:0},{line:i,ch:0},d),this.editor.scrollIntoView({from:{line:t,ch:0},to:{line:i,ch:0}})}replaceSelection(t,i,u){this.editor.setSelection(this.editor.posFromIndex(t),this.editor.posFromIndex(i)),this.editor.replaceSelection(u)}getValue(){return this.editor.getValue()}getPath(){return this.path}addError(t){if(!t.path||this.path.endsWith(t.path)){var i=this.editor.lineCount(),u=t.line-1;if((u<0||u>=i)&&(u=0),this.addErrorMarker(u,t.msg),t.start!=null){var d={className:"mark-error",inclusiveLeft:!0},y={line:u,ch:t.end?t.start:t.start-1},g={line:u,ch:t.end?t.end:t.start},C=this.editor.markText(y,g,d);this.errormarks.push(C)}}}addErrorMarker(t,i){var u=document.createElement("div");u.setAttribute("class","tooltipbox tooltiperror"),u.appendChild(document.createTextNode("\u24CD")),this.editor.setGutterMarker(t,"gutter-info",u),this.errormsgs.push({line:t,msg:i}),$(u).mouseover(d=>{this.expandErrors()})}addErrorLine(t,i){var u=Bs(i,"tooltiperrorline");this.errorwidgets.push(this.editor.addLineWidget(t,u))}expandErrors(){for(var t;t=this.errormsgs.shift();)this.addErrorLine(t.line,t.msg)}markErrors(t){this.clearErrors(),t=t.slice(0,$a);for(var i of t)this.addError(i)}clearErrors(){for(this.dirtylisting=!0,this.editor.clearGutter("gutter-info"),this.errormsgs=[];this.errorwidgets.length;)this.errorwidgets.shift().clear();for(;this.errormarks.length;)this.errormarks.shift().clear()}getSourceFile(){return this.sourcefile}updateListing(){this.clearErrors(),this.editor.clearGutter("gutter-bytes"),this.editor.clearGutter("gutter-offset"),this.editor.clearGutter("gutter-clock");var t=this.sourcefile.lines||[];for(var i of t)if(i.offset>=0&&this.setGutter("gutter-offset",i.line-1,_e(i.offset&65535,4)),i.insns){var u=i.insns.length>9?"...":i.insns;this.setGutter("gutter-bytes",i.line-1,u),i.iscode&&i.cycles&&this.setGutter("gutter-clock",i.line-1,i.cycles+"")}}setGutter(t,i,u){var d=this.editor.lineInfo(i);if(!(d&&d.gutterMarkers&&d.gutterMarkers[t])){var y=document.createTextNode(u);this.editor.setGutterMarker(i,t,y)}}setGutterBytes(t,i){this.setGutter("gutter-bytes",t-1,i)}setCurrentLine(t,i){var u=g=>{var C=document.createElement("div"),w="currentpc-marker";C.classList.add(w),C.appendChild(document.createTextNode("\u25B6")),this.editor.setGutterMarker(g.line-1,"gutter-info",C)};if(this.clearCurrentLine(i),t){u(t),i&&this.editor.setCursor({line:t.line-1,ch:t.start||0},{scroll:!0});var d="currentpc-span",y={className:d,inclusiveLeft:!0};t.start||t.end?this.markCurrentPC=this.editor.markText({line:t.line-1,ch:t.start},{line:t.line-1,ch:t.end||t.start+1},y):this.markCurrentPC=this.editor.markText({line:t.line-1,ch:0},{line:t.line,ch:0},y),this.currentDebugLine=t}}clearCurrentLine(t){this.currentDebugLine&&(this.editor.clearGutter("gutter-info"),t&&this.editor.setSelection(this.editor.getCursor()),this.currentDebugLine=null),this.markCurrentPC&&(this.markCurrentPC.clear(),this.markCurrentPC=null)}getActiveLine(){if(this.sourcefile){var t=sr&&sr.c;if(!t&&Q.getCPUState&&!Q.isRunning()&&(t=Q.getCPUState()),t){var i=t&&(t.EPC||t.PC),u=this.sourcefile.findLineForOffset(i,15);return u}}}refreshDebugState(t){this.clearCurrentLine(t);var i=this.getActiveLine();i&&this.setCurrentLine(i,t)}refreshListing(){var t=Me.getListingForFile(this.path);t&&t.sourcefile&&t.sourcefile!==this.sourcefile&&(this.sourcefile=t.sourcefile,this.dirtylisting=!0),!(!this.sourcefile||!this.dirtylisting)&&(this.updateListing(),this.dirtylisting=!1)}refresh(t){this.refreshListing(),this.refreshDebugState(t)}tick(){this.refreshDebugState(!1)}getLine(t){return this.editor.getLine(t-1)}getCurrentLine(){return this.editor.getCursor().line+1}getCursorPC(){for(var t=this.getCurrentLine();this.sourcefile&&t>=0;){var i=this.sourcefile.line2offset[t];if(i>=0)return i;t--}return-1}undoStep(){this.editor.execCommand("undo")}toggleBreakpoint(t){if(this.sourcefile!=null){var i=this.sourcefile.line2offset[t+1];zi(i)}}},Kn=class extends Tr{constructor(i){super();this.path=i}refreshListing(){var i=Me.getListingForFile(this.path);this.assemblyfile=i&&(i.assemblyfile||i.sourcefile)}refresh(i){if(this.refreshListing(),!!this.assemblyfile){var u=this.assemblyfile.text,d=this.getDisasmView();if(d.setValue(u),!!Q.saveState){var y=sr||Q.saveState(),g=y.c?y.c.PC:0;if(g>=0&&this.assemblyfile){var C=this.assemblyfile.findLineForOffset(g,15);C&&(i&&d.setCursor(C.line-1,0),ji(d,C.line-1))}}}}};function Bt(f){var t=f&&f.w+"px"||"100%",i=f&&f.h+"px"||"100%",u=this.itemHeight=f.itemHeight;this.items=f.items,this.generatorFn=f.generatorFn,this.totalRows=f.totalRows||f.items&&f.items.length;var d=Bt.createScroller(u*this.totalRows);this.container=Bt.createContainer(t,i),this.container.appendChild(d);var y=Math.ceil(f.h/u);this.cachedItemsLen=y*3,this._renderChunk(this.container,0);var g=this,C,w=y*u,N=0;setInterval(function(){if(Date.now()-N>100)for(var se=document.querySelectorAll('[data-rm="1"]'),z=0,q=se.length;z<q;z++)try{g.container.removeChild(se[z])}catch(V){}},300);function W(se){var z=se.target.scrollTop;if(!C||Math.abs(z-C)>w){var q=Math.floor(z/u)-y;g._renderChunk(g.container,q<0?0:q),C=z}N=Date.now(),se.preventDefault&&se.preventDefault()}this.container.addEventListener("scroll",W)}Bt.prototype.createRow=function(f){var t;if(this.generatorFn)t=this.generatorFn(f);else if(this.items)if(typeof this.items[f]=="string"){var i=document.createTextNode(this.items[f]);t=document.createElement("div"),t.style.height=this.itemHeight+"px",t.appendChild(i)}else t=this.items[f];return t.classList.add("vrow"),t.setAttribute("data-index",""+f),t.style.position="absolute",t.style.top=f*this.itemHeight+"px",t};Bt.prototype._renderChunk=function(f,t){var i=t+this.cachedItemsLen;i>this.totalRows&&(i=this.totalRows);for(var u=document.createDocumentFragment(),d=t;d<i;d++)u.appendChild(this.createRow(d));for(var y=1,g=f.childNodes.length;y<g;y++)f.childNodes[y].style.display="none",f.childNodes[y].setAttribute("data-rm","1");f.appendChild(u)};Bt.createContainer=function(f,t){var i=document.createElement("div");return i.classList.add("vlist"),i.style.width=f,i.style.height=t,i.style.overflow="auto",i.style.position="relative",i.style.padding="0",i.style.border="1px solid black",i};Bt.createScroller=function(f){var t=document.createElement("div");return t.style.opacity="0",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="1px",t.style.height=f+"px",t};Bt.prototype.scrollToItem=function(f){this.container.scrollTop=this.itemHeight*f};function $i(){return $("#booksMenuButton").first().height()}var Qt=class{constructor(t){var i=document.createElement("div");i.setAttribute("class","memdump"),t.appendChild(i),this.maindiv=i}create(t,i,u){this.getLineAt=u,this.memorylist=new Bt({w:$(t).width(),h:$(t).height(),itemHeight:$i(),totalRows:i,generatorFn:d=>{var y=u(d),g=document.createElement("div");return g.appendChild(document.createTextNode(y.text)),y.clas!=null&&(g.className=y.clas),g}}),$(this.maindiv).append(this.memorylist.container)}refresh(){this.memorylist&&$(this.maindiv).find("[data-index]").each((t,i)=>{var u=i,d=parseInt(u.getAttribute("data-index")),y=u.innerText,g=this.getLineAt(d),C=g.text;if(y!=C&&(u.innerText=C,g.clas!=null&&!u.classList.contains(g.clas))){var w=Array.from(u.classList);w.forEach(N=>u.classList.remove(N)),u.classList.add("vrow"),u.classList.add(g.clas)}})}};function Gn(f){return f.endsWith("_SIZE__")||f.endsWith("_LAST__")||f.endsWith("STACKSIZE__")||f.endsWith("FILEOFFS__")||f.startsWith("l__")||f.startsWith("s__")||f.startsWith(".__.")}var Mt=class{constructor(){this.cumulativeData=!1;var t=160,i=262;try{t=Math.ceil(Q.machine.cpuCyclesPerLine)||t,i=Math.ceil(Q.machine.numTotalScanlines)||i}catch(u){console.error(u)}this.cyclesPerLine=t,this.totalScanlines=i}addr2symbol(t){var i=Q.debugSymbols&&Q.debugSymbols.addr2symbol||{};return i[t]}addr2str(t){var i=this.addr2symbol(t);return typeof i=="string"?"$"+_e(t)+" ("+i+")":"$"+_e(t)}showTooltip(t){t?(this.tooldiv||(this.tooldiv=document.createElement("div"),this.tooldiv.setAttribute("class","tooltiptrack"),document.body.appendChild(this.tooldiv)),$(this.tooldiv).text(t).show()):$(this.tooldiv).hide()}setVisible(t){t?(this.probe=Q.startProbing(),this.probe.singleFrame=!this.cumulativeData,this.tick()):(this.probe&&(this.probe.singleFrame=!0),Q.stopProbing(),this.probe=null)}redraw(t){var i=this.probe;if(!(!i||!i.idx))for(var u=0,d=0,y=0,g=0;g<i.idx;g++){var C=i.buf[g],w=C&65535,N=C>>16&255,W=C&4278190080;switch(W){case 2113929216:u++,d=0;break;case 2130706432:u=0,d=0;break;case 0:d+=w,y+=w;break;default:t(W,w,d,u,y,N);break}}}opToString(t,i,u){var d="";switch(t){case 16777216:d="Exec";break;case 301989888:d="Read";break;case 318767104:d="Write";break;case 335544320:d="IO Read";break;case 352321536:d="IO Write";break;case 369098752:d="VRAM Read";break;case 385875968:d="VRAM Write";break;case 134217728:d="Interrupt";break;case 150994944:d="Error";break;case 167772160:d="Stack Push";break;case 184549376:d="Stack Pop";break;default:return""}return typeof i=="number"&&(d+=" "+this.addr2str(i)),t&268435456&&typeof u=="number"&&(d+=" = $"+_e(u,2)),d}getOpRGB(t){switch(t){case 16777216:return 98305;case 301989888:return 8388865;case 318767104:return 65920;case 335544320:return 98432;case 352321536:return 12583296;case 369098752:return 8421377;case 385875968:return 4227264;case 134217728:return 13619151;case 150994944:return 4145151;default:return 0}}},qn=class{constructor(t,i){this.recreateOnResize=!0;this.path=t,this.data=i}createDiv(t){return this.vlist=new Qt(t),this.vlist.create(t,this.data.length+15>>4,this.getMemoryLineAt.bind(this)),this.vlist.maindiv}getMemoryLineAt(t){for(var i=t*16,u=0,d=16,y=_e(i+u,4)+" ",g=0;g<u;g++)y+="   ";u>8&&(y+=" ");for(var g=u;g<d;g++){var C=this.data[i+g];g==8&&(y+=" "),y+=" "+(C>=0?_e(C,2):"  ")}return{text:y}}refresh(){this.vlist.refresh()}getPath(){return this.path}};var Xn=class{constructor(){this.recreateOnResize=!0;this.totalRows=5120}createDiv(t){var i=document.createElement("div");return i.setAttribute("class","memdump"),t.appendChild(i),this.showMemoryWindow(t,i),this.maindiv=i}showMemoryWindow(t,i){this.memorylist=new Bt({w:$(t).width(),h:$(t).height(),itemHeight:$i(),totalRows:this.totalRows,generatorFn:u=>{var d=this.getMemoryLineAt(u),y=document.createElement("div");if(this.dumplines){var g=this.dumplines[u];g&&y.classList.add("seg_"+this.getMemorySegment(this.dumplines[u].a))}return y.appendChild(document.createTextNode(d)),y}}),$(i).append(this.memorylist.container),this.tick(),Ft&&this.dumplines&&this.scrollToAddress(Ft.data_start)}scrollToAddress(t){this.dumplines&&this.memorylist.scrollToItem(this.findMemoryWindowLine(t))}refresh(){this.dumplines=null,this.tick()}tick(){this.memorylist&&$(this.maindiv).find("[data-index]").each((t,i)=>{var u=$(i),d=parseInt(u.attr("data-index")),y=u.text(),g=this.getMemoryLineAt(d);y!=g&&u.text(g)})}getMemoryLineAt(t){var i=t*16,u=0,d=16,y;if(this.getDumpLines()){var g=this.dumplines[t];if(g)i=g.a&65520,u=g.a-i,d=u+g.l,y=g.s;else return"."}for(var C=_e(i+u,4)+" ",w=0;w<u;w++)C+="   ";u>8&&(C+=" ");for(var w=u;w<d;w++){var N=this.readAddress(i+w);w==8&&(C+=" "),C+=" "+(typeof N=="number"?_e(N,2):"??")}for(var w=d;w<16;w++)C+="   ";return y&&(C+="  "+y),C}readAddress(t){return Q.readAddress(t)}getDumpLineAt(t){var i=this.dumplines[t];if(i)return i.a+" "+i.s}getDumpLines(){var t=Q.debugSymbols&&Q.debugSymbols.addr2symbol||{};if(this.dumplines==null){this.dumplines=[];var i=0,u;for(let C of Object.keys(t)){var d=parseInt(C),y=t[d];if(u)for(Gn(u)&&(u="");i<d&&this.dumplines.length<65536;){var g=i+16&1048560;g>d&&(g=d),this.dumplines.push({a:i,l:g-i,s:u}),i=g}u=y}}return this.dumplines}getMemorySegment(t){if(Ft){if(t>=Ft.data_start&&t<Ft.data_start+Ft.data_size)return Q.getSP&&t>=Q.getSP()-15?"stack":"data";if(t>=Ft.code_start&&t<Ft.code_start+(Ft.code_size||Ft.rom_size))return"code"}var i=Me.segments;if(i){for(var u of i)if(t>=u.start&&t<u.start+u.size){if(u.type=="rom")return"code";if(u.type=="ram")return"data";if(u.type=="io")return"io"}}return"unknown"}findMemoryWindowLine(t){for(var i=0;i<this.dumplines.length;i++)if(this.dumplines[i].a>=t)return i}};var Yn=class{createDiv(t){return this.maindiv=Os(t,"vertical-scroll"),this.maindiv.css("display","grid"),this.maindiv.css("grid-template-columns","5em 40% 40%"),this.maindiv[0]}addSegment(t,i){if(i){var u=$('<div class="segment-offset" style="grid-column-start:1"/>');u.text("$"+_e(t.start,4)),this.maindiv.append(u)}var d=$('<div class="segment"/>');if(i||d.css("grid-column-start",3),t.last?d.text(t.name+" ("+(t.last-t.start)+" / "+t.size+" bytes used)"):d.text(t.name+" ("+t.size+" bytes)"),t.size>=256){var y=(Math.log(t.size)-Math.log(256))*.5;d.css("padding-top",y+"em"),d.css("padding-bottom",y+"em")}t.type&&d.addClass("segment-"+t.type),this.maindiv.append(d),d.click(()=>{var g=Ye.createOrShow("#memory");g.scrollToAddress(t.start)})}refresh(){this.maindiv.empty();var t=Me.segments;if(t){var i=0,u=-1;for(var d of t)d.start>i&&this.addSegment({name:"",start:i,size:d.start-i},!0),this.addSegment(d,u!=d.start),u=d.start,i=d.start+d.size}}};var Ki=class extends Mt{constructor(){super(...arguments);this.recreateOnResize=!0}createCanvas(i,u,d){var y=document.createElement("div"),g=document.createElement("canvas");return g.width=u,g.height=d,g.classList.add("pixelated"),g.style.width="100%",g.style.height="90vh",g.style.backgroundColor="black",g.style.cursor="crosshair",g.onmousemove=C=>{var w=Vi(g,C);this.showTooltip(this.getTooltipText(w.x,w.y)),$(this.tooldiv).css("left",C.pageX+10).css("top",C.pageY-30)},g.onmouseout=C=>{$(this.tooldiv).hide()},i.appendChild(y),y.appendChild(g),this.canvas=g,this.ctx=g.getContext("2d"),this.initCanvas(),this.maindiv=y}initCanvas(){}getTooltipText(i,u){return null}clear(){}tick(){this.clear(),this.redraw(this.drawEvent.bind(this))}},qi=class extends Ki{constructor(){super(...arguments);this.recreateOnResize=!1}createDiv(i){return this.createCanvas(i,this.cyclesPerLine,this.totalScanlines)}initCanvas(){this.imageData=this.ctx.createImageData(this.canvas.width,this.canvas.height),this.datau32=new Uint32Array(this.imageData.data.buffer)}getTooltipText(i,u){i=i|0,u=u|0;var d="",y=null,g=[],C=-1;return this.redraw((w,N,W,se,z,q)=>{switch(w){case 16777216:y=this.addr2symbol(N)||y;break;case 167772160:g.push(y);break;case 184549376:y=g.pop();break}se==u&&W<=i&&(W!=C&&(d="",C=W),d==""&&y&&(d+=`
`+y),d+=`
`+this.opToString(w,N,q))}),"X: "+i+"  Y: "+u+" "+d}refresh(){this.tick(),this.datau32.fill(4278190080)}tick(){super.tick(),this.ctx.putImageData(this.imageData,0,0)}clear(){this.datau32.fill(4278190080)}},Qn=class extends qi{createDiv(t){return this.createCanvas(t,256,256)}clear(){for(var t=0;t<=65535;t++){var i=Q.readAddress(t),u=i>>2|i&31;u|=u<<8|u<<16,this.datau32[t]=u|4278190080}}drawEvent(t,i,u,d){var y=this.getOpRGB(t);if(y){var g=this.datau32[i&65535];g=g|y|4278190080,this.datau32[i&65535]=g}}getTooltipText(t,i){var u=(t&255)+(i<<8),d="",y=-1,g={},C=null,w=[];return this.redraw((N,W,se,z,q,V)=>{switch(N){case 16777216:y=W,C=this.addr2symbol(W)||C;break;case 167772160:w.push(C);break;case 184549376:C=w.pop();break}var oe=N|y;W==u&&!g[oe]&&(d==""&&C&&(d+=`
`+C),d+=`
PC `+this.addr2str(y)+" "+this.opToString(N,null,V),g[oe]=1)}),this.addr2str(u)+d}};var Zn=class extends Mt{createDiv(i){return this.vlist=new Qt(i),this.vlist.create(i,this.cyclesPerLine*this.totalScanlines,this.getMemoryLineAt.bind(this)),this.vlist.maindiv}getMemoryLineAt(i){var u="",d="seg_data",y=this.dumplines&&this.dumplines[i];if(y!=null){var g=y.info.join(", ");u="("+Rt(y.row,4)+", "+Rt(y.col,4)+")  "+Qr(y.asm||"",20)+g,g.indexOf("Write ")>=0&&(d="seg_io")}return{text:u,clas:d}}refresh(){this.tick()}tick(){let i=Q instanceof Er;this.dumplines={},this.redraw((u,d,y,g,C,w)=>{i&&(C>>=2);var N=this.dumplines[C];switch(N==null&&(N={op:u,addr:d,row:g,col:y,asm:null,info:[]},this.dumplines[C]=N),u){case 16777216:var W=Q.disassemble(d,Q.readAddress.bind(Q));N.asm=W&&W.line;break;default:var se=this.opToString(u,d,w);se!=""&&N.info.push(se);break}}),this.vlist.refresh()}};var Jn=class extends Mt{constructor(){super(...arguments);this.recreateOnResize=!0}createDiv(i){return this.vlist=new Qt(i),this.vlist.create(i,this.totalScanlines,this.getMemoryLineAt.bind(this)),this.vlist.maindiv}getMemoryLineAt(i){for(var u=Rt(i+"",3)+" ",d="seg_code",y=this.dumplines&&this.dumplines[i]||[],g=Math.round(this.cyclesPerLine/3.3),C=0;C<this.cyclesPerLine;C++){var w=y[C];if(w!==void 0){var N=w&65535,W=W&4278190080;if(W==16777216)u+=",";else{var se=_e(N);u+=se,C+=se.length-1}}else u+=C==g?"|":"."}return y[-1]&&(u+=" "+y[-1]),{text:u,clas:d}}refresh(){this.tick()}tick(){this.dumplines={},this.redraw((i,u,d,y,g,C)=>{var w=this.dumplines[y];switch(w==null&&(this.dumplines[y]=w=[]),i){case 16777216:var N=Q.debugSymbols.addr2symbol[u];N&&(w[-1]=N);break;case 335544320:case 352321536:case 369098752:case 385875968:w[d]=i|u;break}}),this.vlist.refresh()}};var ei=class extends Mt{constructor(){super(...arguments);this.cumulativeData=!0}createDiv(i){return Q.debugSymbols&&Q.debugSymbols.symbolmap?this.keys=Array.from(Object.keys(Q.debugSymbols.symbolmap).filter(u=>!Gn(u))):this.keys=["no symbols defined"],this.vlist=new Qt(i),this.vlist.create(i,this.keys.length+1,this.getMemoryLineAt.bind(this)),this.vlist.maindiv}getMemoryLineAt(i){if(i==0)return{text:Rt("Symbol",35)+Rt("Reads",8)+Rt("Writes",8)};var u=this.keys[i-1],d=this.dumplines&&this.dumplines[u];function y(w){var N=d[w]|0;return Rt(N?N.toString():"",8)}var g,C;return d!=null?(g=Rt(u,35)+y(301989888)+y(318767104),d[16777216]?C="seg_code":d[335544320]||d[352321536]?C="seg_io":C="seg_data"):(g=Rt(u,35),C="seg_unknown"),{text:g,clas:C}}refresh(){this.tick()}tick(){this.dumplines={},this.redraw((i,u,d,y,g,C)=>{var w=Q.debugSymbols.addr2symbol[u];if(w!=null){var N=this.dumplines[w];N==null&&(N={},this.dumplines[w]=N),N[i]=(N[i]|0)+1}}),this.vlist.refresh(),this.probe&&this.probe.clear()}};function Ws(f,t,i){for(var u="",d=f.BYTES_PER_ELEMENT||1,y=Math.ceil(16/d),g=f instanceof Float32Array||f instanceof Float64Array,C=0;C<i;C+=y){u+="$"+_e(C+t)+":";for(var w=0;w<y;w++)C+w<f.length&&(w==y/2&&(u+=" "),g?u+=" "+f[C+w].toPrecision(d*2):u+=" "+_e(f[C+w],d*2));u+=`
`}return u}var rn=256,Hs=100,Ka=!1,Ar=class{constructor(t,i){this.expanded=!1;this.parent=t,this.name=i,this.children=new Map,this.level=t?t.level+1:-1,this.view=t?t.view:null}getDiv(){return this._div==null&&(this._div=document.createElement("div"),this._div.classList.add("vertical-scroll"),this._div.classList.add("tree-content"),this._header=document.createElement("div"),this._header.classList.add("tree-header"),this._header.classList.add("tree-level-"+this.level),this._header.append(this.name),this._inline=document.createElement("span"),this._inline.classList.add("tree-value"),this._header.append(this._inline),this._div.append(this._header),this.parent._content.append(this._div),this._header.onclick=t=>{this.toggleExpanded()}),this.expanded&&this._content==null?(this._content=document.createElement("div"),this._div.append(this._content)):!this.expanded&&this._content!=null&&(this._content.remove(),this._content=null,this.children.clear()),this._div}toggleExpanded(){this.expanded=!this.expanded,this.view.tick()}remove(){this._div.remove(),this._div=null}update(t){this.getDiv();var i="";if(t&&t.$$&&typeof t.$$=="function"&&this._content!=null&&(t=t.$$()),t==null)i=t+"";else if(typeof t=="number")t!=(t|0)?i=t.toString():i=t+"	($"+_e(t)+")";else if(typeof t=="boolean")i=t.toString();else if(typeof t=="string")t.length<Hs?i=t:i=t.substring(0,Hs)+"...";else if(t.buffer&&t.length<=rn)i=Ws(t,0,t.length);else if(typeof t=="object"||typeof t=="function")if(this._content!=null){if(t.slice&&t.length>rn){let w={},N=t;for(var u=rn;t.length/u>rn;)u*=2;for(let W=0;W<N.length;W+=u)w["$"+_e(W)]={$$:()=>N.slice(W,W+u)};t=w}let g=t instanceof Array?Array.from(t.keys()):Object.getOwnPropertyNames(t);if(g.length>rn){let w={},N=t;for(var u=100;g.length/u>100;)u*=2;for(let se=0;se<g.length;se+=u){for(var d={},y=se;y<se+u;y++)d[g[y]]=N[g[y]];w["["+se+"...]"]=d}t=w,g=Object.getOwnPropertyNames(t)}let C=new Set(this.children.keys());g.forEach(w=>{var N=!Ka&&typeof w=="string"&&w.startsWith("$$");if(!N){let W=this.children.get(w);W==null&&(W=new Ar(this,w),this.children.set(w,W)),W.update(t[w])}C.delete(w)}),C.forEach(w=>{this.children.get(w).remove(),this.children.delete(w)}),this._header.classList.add("tree-expanded"),this._header.classList.remove("tree-collapsed")}else this._header.classList.add("tree-collapsed"),this._header.classList.remove("tree-expanded");else i=typeof t;this._inline.innerText!=i&&(this._inline.innerText=i)}};function ti(f,t){var i=new Ar(null,null);i.view=t,i._content=f;var u=new Ar(i,"/");return u.expanded=!0,u.getDiv(),u._div.style.padding="0px",u}var ri=class extends Mt{createDiv(i){return this.treeroot=ti(i,this),this.treeroot.getDiv()}refresh(){this.tick()}tick(){this.treeroot.update(this.getRootObject())}getRootObject(){var i={};return this.redraw((u,d,y,g,C,w)=>{switch(u){case 16777216:let N=this.addr2symbol(d);N&&(i[N]||(i[N]=g));break}}),i}};var Gi=class{createDiv(t){return this.root=ti(t,this),this.root.getDiv()}refresh(){this.tick()}tick(){this.root.update(this.getRootObject())}},ni=class extends Gi{getRootObject(){return Q.getDebugTree()}};var $s=Ss(js());var qa=Us(),Q,Me,Ye,Ft,sr;function Ga(f){f.startsWith("?")&&(f=f.substr(1));var t=f.split("&");if(!t||t.length==0)return{};for(var i={},u=0;u<t.length;++u){var d=t[u].split("=",2);d.length==1?i[d[0]]="":i[d[0]]=decodeURIComponent(d[1].replace(/\+/g," "))}return i}var ar=Ga(window.location.search||"?"),sn=$("#controls_top"),ui,ft,mt,Ji,kr,ii,es,Xa,si=!1,Dr=!1,ts=null,rs=!1,Ks="c.PC == 0x6000",Ya={z80asm:"z80",sdasz80:"z80",sdcc:"text/x-csrc",zmac:"z80"};function an(f){Po(!1),bootbox.alert({title:'<span class="glyphicon glyphicon-alert" aria-hidden="true"></span> Alert',message:f})}function Qa(){return new Worker("./dist/worker.js")}function Za(){return ii?ii.title||ii.name||Me.mainFilename||"ROM":Me.mainFilename||"ROM"}async function Ja(){var f=new Dn;return new Ln(f,new Pn(es))}async function eo(){var f=await Ja();Me=new Rn(Qa(),Q,f),Ye=new Fn($("#workspace")[0],Me),Me.callbackBuildResult=t=>{po(t)},Me.callbackBuildStatus=t=>{to(t)}}function to(f){f?sn.addClass("is-busy"):sn.removeClass("is-busy"),$("#compile_spinner").css("visibility",f?"visible":"hidden")}function ai(){var f=$("#windowMenuList").empty(),t=!1;function i(w,N,W){t&&(f.append(document.createElement("hr")),t=!1);var se=document.createElement("li"),z=document.createElement("a");if(z.setAttribute("class","dropdown-item"),z.setAttribute("href","#"),z.setAttribute("data-wndid",w),w==Ye.getActiveID()&&$(z).addClass("dropdown-item-checked"),z.appendChild(document.createTextNode(N)),se.appendChild(z),f.append(se),W){var q=(V,oe)=>{f.find("a").removeClass("dropdown-item-checked"),$(z).addClass("dropdown-item-checked")};Ye.setCreateFunc(w,W),Ye.setShowFunc(w,q),$(z).click(V=>{Ye.createOrShow(w),ts=w})}}function u(w){var N=Q.getToolForFilename(w),W=N&&Ya[N];return new en(w,W)}function d(w){i(w,gr(w),()=>{var N=Me.getFile(w);if(typeof N=="string")return u(w);if(N instanceof Uint8Array)return new qn(w,N)})}d(Me.mainFilename),Me.iterateFiles((w,N)=>{N&&w!=Me.mainFilename&&d(w)}),t=!0;var y=Me.getListings();if(y)for(var g in y){var C=y[g];(C.assemblyfile&&C.assemblyfile.text||C.sourcefile&&C.sourcefile.text)&&i(g,gr(g),w=>new Kn(w))}t=!0,i("#disasm","Disassembly",()=>new Tr),i("#memory","Memory Browser",()=>new Xn),Me.segments&&Me.segments.length&&i("#memmap","Memory Map",()=>new Yn),Q.startProbing&&(i("#memheatmap","Memory Probe",()=>new Qn),i("#probelog","Probe Log",()=>new Zn),i("#scanlineio","Scanline I/O",()=>new Jn),i("#symbolprobe","Symbol Profiler",()=>new ei),i("#framecalls","Frame Profiler",()=>new ri)),i("#debugview","Debug Tree",()=>new ni)}function ro(f){ai(),Ye.createOrShow(f),Me.setMainFilename(f)}async function no(f){Me.mainFilename=f;var t=await Me.loadFiles([f]);console.assert(t&&t.length),nn=new Date,ro(f)}function io(f){ar.file=f,Vo()}function qs(){return gr(Me.mainFilename)}function so(f){if(kr==null)return an("Please finish compiling with no errors before downloading ROM."),!0;var t=ir(qs());if(kr instanceof Uint8Array){var i=new Blob([kr],{type:"application/octet-stream"}),u="-zx.bin";(0,$s.saveAs)(i,t+u)}else an("The platform doesn't have downloadable ROMs.")}function ao(f){for(var t={},i=0;i<ui.length;i++){var u=ui[i],d=u.chapter?u.chapter+". "+u.name:u.name,y=u.id==Me.mainFilename;f.append($("<option />").val(u.id).text(d).attr("selected",y?"selected":null)),y&&(ii=u),t[u.id]=d}return t}async function oo(f,t,i,u){var d=await es.keys(),y=0;d||(d=[]);for(var g=0;g<d.length;g++){var C=d[g];if(C.startsWith(i)&&!u[C]){y++==0&&f.append($("<option />").text("------- "+t+" -------").attr("disabled","true"));var w=C.substring(i.length);f.append($("<option />").val(C).text(w).attr("selected",C==Me.mainFilename?"selected":null))}}}function uo(f){f.css("visibility","visible");var t=Me.mainFilename;f.val()!=t&&f.append($("<option />").val(t).text(t).attr("selected","selected"))}async function lo(){var f=$("#preset_select").empty(),t=ao(f);await oo(f,"Local Files","",t),uo(f),f.off("change").change(function(i){io($(this).val().toString())})}function fo(f){var t=$("<p/>");if(f.path!=null){var i=f.line?f.label?`(${f.path} @ ${f.label})`:`(${f.path}:${f.line})`:`(${f.path})`,u=$("<a/>").text(i),d=f.path;d==qs()&&(d=Me.mainFilename),Ye.isWindow(d)&&u.click(y=>{var g=Ye.createOrShow(d);g instanceof en&&g.setCurrentLine(f,!0)}),t.append(u),t.append("&nbsp;")}return t.append($("<span/>").text(f.msg)),t}function Gs(){$("#error_alert").hide(),rs=!1}function ns(f,t){var i=$("#error_alert_msg").empty();for(var u of f.slice(0,10))i.append(fo(u));$("#error_alert").show(),rs=t}function Xs(f,t){if(t!=null){var i={msg:t,line:0};f instanceof Yt&&f.$loc&&(i=Object.create(f.$loc),i.msg=t,console.log(i)),ns([i],!0)}}var co=new Date,nn;function ho(){if(nn){var f=new Date;console.log("load time",nn.getTime()-co.getTime()),console.log("build time",f.getTime()-nn.getTime()),nn=null}}async function po(f){if("errors"in f&&f.errors.length>0)sn.addClass("has-errors"),Ye.setErrors(f.errors),ai(),ns(f.errors,!1);else{if(sn.removeClass("has-errors"),Ye.setErrors(null),Gs(),f==null||"unchanged"in f&&f.unchanged||!("output"in f))return;Q.debugSymbols=new Nn(f.symbolmap,f.debuginfo),Ft=f.params;var t=f.output;if(t!=null)try{on(),Js(),await Q.loadROM(Za(),t),kr=t,Ji||Lr(),ho()}catch(i){console.log(i),sn.addClass("has-errors"),Xs(i,i+""),kr=null,ai();return}ai(),Ye.refresh(!1)}}function mo(){var f=$("#mem_info");f.hide(),Xa=null}function fi(f,t){$("#debug_bar, #run_bar").find("button").removeClass("btn_active").removeClass("btn_stopped"),$("#dbg_"+f).addClass("btn_"+t)}function go(){return Q&&kr!=null}function Wt(){return go()?!0:(an("Can't do this until build successfully completes."),!1)}function vo(f){if(ts==null&&Q.disassemble){var t=Me.getListings(),i="#disasm",u=32;if(t){var d=f.c?f.c.EPC||f.c.PC:0;for(var y in t){var g=t[y],C=g.assemblyfile||g.sourcefile,w=Me.filename2path[y]||y;if(C==g.sourcefile&&(w=Ye.findWindowWithFilePrefix(y)),Ye.isWindow(w)){var N=C&&C.findLineForOffset(d,32);N&&d-N.offset<u&&(i=w,u=d-N.offset)}}}Ye.createOrShow(i,!0)}}function oi(f){sr=f,vo(f),Ye.refresh(!0),si=!0}function Ys(f){Q.setupDebug((t,i)=>{oi(t),fi(f||"pause","stopped"),i&&ns([{msg:"STOPPED: "+i,line:0}],!0)})}function br(f){Wt()&&(is(),Ys(f),f&&fi(f,"active"))}function vr(){Q&&Q.isRunning()&&(Q.pause(),console.log("Paused")),fi("pause","stopped")}function bo(){Wt()&&(on(),vr(),Ji=!0)}function Lr(){Q.isRunning()||(Q.resume(),console.log("Resumed")),fi("go","active"),rs&&Gs()}function yo(){Wt()&&(on(),Q.isRunning()||Ye.refresh(!1),Lr(),Ji=!1,ts=null)}function xo(){Wt()&&(br("step"),Q.step())}function So(){Wt()&&(br("tovsync"),Q.runToVsync())}function wo(){var f=Ye.getActive();return f&&f.getCursorPC&&f.getCursorPC()}function zi(f){!Wt()||!(f>=0)||(br("toline"),console.log("Run to",f.toString(16)),Q.runToPC(f))}function _o(){zi(wo())}function Co(){Wt()&&(br("stepout"),Q.runUntilReturn())}function Eo(){Wt()&&(br("stepback"),Q.stepBack())}function on(){sr=null,Q.clearDebug(),Ys()}function Qs(){Q.reset(),Js()}function To(){Wt()&&(on(),Qs(),Lr())}function Ao(){if(Wt()){var f=Dr;is(),on(),Lr(),Qs(),br("restart"),Q.runEval(t=>!0),f&&ea()}}function ko(){var f=$("#debugExprModal"),t=$("#debugExprSubmit");$("#debugExprInput").val(Ks),$("#debugExprExamples").text(Do()),f.modal("show"),t.off("click").on("click",()=>{var i=$("#debugExprInput").val()+"";f.modal("hide"),Lo(i)})}function Do(){var f=Q.saveState&&Q.saveState(),t=f.c;console.log(t,f);var i="";return t.PC&&(i+="c.PC == 0x"+_e(t.PC)+`
`),t.SP&&(i+="c.SP < 0x"+_e(t.SP)+`
`),t.HL&&(i+=`c.HL == 0x4000
`),Q.readAddress&&(i+=`this.readAddress(0x1234) == 0x0
`),i}function Lo(f){var t=new Function("c","return ("+f+");").bind(Q);br(),Q.runEval(t),Ks=f}function Zs(){Q.isRunning()?(Ye.tick(),si=!1):si||(Ye.tick(),si=!0),setTimeout(Zs,100)}function Po(f){f?(zs(0),$("#pleaseWaitModal").modal("show")):(zs(1),$("#pleaseWaitModal").modal("hide"))}function zs(f){$("#pleaseWaitProgressBar").css("width",f*100+"%").show()}function is(){Dr&&(Q.setRecorder(null),$("#dbg_record").removeClass("btn_recording"),$("#replaydiv").hide(),mo(),Dr=!1)}function Js(){Dr&&mt.reset()}function ea(){mt.reset(),Q.setRecorder(mt),$("#dbg_record").addClass("btn_recording"),$("#replaydiv").show(),Dr=!0}function Ro(){Dr?is():ea()}function Mo(){window.open("https://worldofspectrum.org/faq/reference/reference.htm","_help")}function Fo(){ft=new $n($("#toolbar")[0],null),ft.grp.prop("id","run_bar"),ft.add("ctrl+alt+r","Reset","glyphicon-refresh",To).prop("id","dbg_reset"),ft.add("ctrl+alt+,","Pause","glyphicon-pause",bo).prop("id","dbg_pause"),ft.add("ctrl+alt+.","Resume","glyphicon-play",yo).prop("id","dbg_go"),ft.newGroup(),ft.grp.prop("id","debug_bar"),ft.add("ctrl+alt+e","Reset and Debug","glyphicon-fast-backward",Ao).prop("id","dbg_restart"),ft.add("ctrl+alt+b","Step Backwards","glyphicon-step-backward",Eo).prop("id","dbg_stepback"),ft.add("ctrl+alt+s","Single Step","glyphicon-step-forward",xo).prop("id","dbg_step"),ft.add("ctrl+alt+o","Step Out of Subroutine","glyphicon-hand-up",Co).prop("id","dbg_stepout"),ft.add("ctrl+alt+n","Next Frame/Interrupt","glyphicon-forward",So).prop("id","dbg_tovsync"),ft.add("ctrl+alt+l","Run To Line","glyphicon-save",_o).prop("id","dbg_toline"),ft.newGroup(),ft.grp.prop("id","xtra_bar"),ft.add("ctrl+alt+?","Show Help","glyphicon-question-sign",Mo),ft.add("ctrl+alt+0","Start/Stop Replay Recording","glyphicon-record",Ro).prop("id","dbg_record"),$(".dropdown-menu").collapse({toggle:!1}),$("#item_debug_expr").click(ko).show(),$("#item_download_rom").click(so),Zs(),No()}function No(){var f=$("#replayslider"),t=$("#clockslider"),i=$("#replay_frame"),u=$("#replay_clock"),d=()=>{i.text(mt.lastSeekFrame+""),u.text(mt.lastSeekStep+"")},y=w=>{vr();var N=parseInt(f.val().toString()),W=parseInt(t.val().toString());mt.loadFrame(N,W)>=0&&(t.attr("min",0),t.attr("max",mt.lastStepCount),d(),oi(Q.saveState()))},g=w=>{vr(),mt.loadFrame(w)>=0&&(f.val(w),d(),oi(Q.saveState()))},C=w=>{vr();var N=parseInt(f.val().toString());mt.loadFrame(N,w)>=0&&(t.val(w),d(),oi(Q.saveState()))};mt.callbackStateChanged=()=>{f.attr("min",0),f.attr("max",mt.numFrames()),f.val(mt.currentFrame()),t.val(mt.currentStep()),d(),Q.saveState()},f.on("input",y),t.on("input",y),$("#replay_min").click(()=>{g(1)}),$("#replay_max").click(()=>{g(mt.numFrames())}),$("#replay_back").click(()=>{g(parseInt(f.val().toString())-1)}),$("#replay_fwd").click(()=>{g(parseInt(f.val().toString())+1)}),$("#clock_back").click(()=>{C(parseInt(t.val().toString())-1)}),$("#clock_fwd").click(()=>{C(parseInt(t.val().toString())+1)}),$("#replay_bar").show()}function li(f){var t=f.error||f.reason;t!=null&&t instanceof Yt&&Io(t)}function Io(f){vr(),Uo(f)}function Oo(){window.addEventListener("error",li),window.addEventListener("unhandledrejection",li)}function Bo(){window.removeEventListener("error",li),window.removeEventListener("unhandledrejection",li)}function Vo(f){Bo(),f?window.location.replace("?"+$.param(ar)):window.location.href="?"+$.param(ar)}function Wo(){delete ar[""],history.replaceState({},"","?"+$.param(ar))}function Ho(){var f=!1;document.addEventListener("visibilitychange",()=>{document.visibilityState=="hidden"&&Q&&Q.isRunning()?(vr(),f=!0):document.visibilityState=="visible"&&f&&(Lr(),f=!1)}),$(window).on("focus",()=>{f&&(Lr(),f=!1)}),$(window).on("blur",()=>{Q&&Q.isRunning()&&(vr(),f=!0)})}function ta(){setTimeout(()=>{$("#controls_dynamic").css("visibility","inherit")},250)}function jo(){qa(["#sidebar","#workspace","#emulator"],{sizes:[12,44,44],minSize:[0,250,250],onDragEnd:()=>{Ye&&Ye.resize()}})}function Uo(f){var t=f&&f.message||t;Xs(f,t),Ye.refresh(!1)}async function zo(){if(Q=new Er($("#emuscreen")[0]),mt=new Hn(Q),ui=Q.getPresets?Q.getPresets():[],!ar.file){var f=ui[0].id;ar.file=f||"DEFAULT",f||an("There is no default main file for this project. Try selecting one from the pulldown.")}Wo(),Oo(),await Q.start(),await eo(),await no(ar.file),Fo(),Ho(),await lo(),ta()}async function $o(){try{await zo(),document.title=document.title+" - "+Me.mainFilename}catch(f){console.log(f),an("Platform zx failed to load.")}finally{ta()}}async function Ko(){jo(),es=Es("zx"),await $o()}Ko();export{Ft as compparams,Me as current_project,sr as lastDebugState,Q as platform,Ye as projectWindows,zi as runToPC,Ko as start};
/*! Bundled license information:

localforage/dist/localforage.js:
  (*!
      localForage -- Offline Storage, Improved
      Version 1.10.0
      https://localforage.github.io/localForage
      (c) 2013-2017 Mozilla, Apache License 2.0
  *)

jquery/dist/jquery.js:
  (*!
   * jQuery JavaScript Library v3.6.3
   * https://jquery.com/
   *
   * Includes Sizzle.js
   * https://sizzlejs.com/
   *
   * Copyright OpenJS Foundation and other contributors
   * Released under the MIT license
   * https://jquery.org/license
   *
   * Date: 2022-12-20T21:28Z
   *)

split.js/dist/split.js:
  (*! Split.js - v1.6.5 *)
*/
//# sourceMappingURL=ui.js.map
