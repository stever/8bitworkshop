<!DOCTYPE html>
<html lang="en">
<head>
  <title>8bitworkshop IDE</title>
  <link rel="stylesheet" href="css/ui.css">
  <style type="text/css" media="screen">
    body {
        overflow: hidden;
        font-size: 11px;
    }
  </style>
</head>
<body>
<div id="controls_top" class="disable-select">
 <div id="controls_dynamic" style="visibility:hidden">

  <!-- main menu -->
  <span class="dropdown">
    <a class="btn dropdown-toggle toolbarMenuButton" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="Menu">
      <span class="glyphicon glyphicon-menu-hamburger" aria-hidden="true"></span>
      <span class="caret"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-left" aria-labelledby="dropdownMenuButton" style="left:auto">
      <li><a class="dropdown-item" href="#" id="item_new_file">New Project...</a></li>
      <li><a class="dropdown-item" href="#" id="item_upload_file">Upload...</a></li>
      <hr>
      <li class="dropdown dropdown-submenu">
        <a tabindex="-1" href="#">File</a>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="#" id="item_reset_file">Revert to Original...</a></li>
          <li><a class="dropdown-item" href="#" id="item_rename_file">Rename File...</a></li>
          <li><a class="dropdown-item" href="#" id="item_delete_file">Delete File...</a></li>
          <hr>
          <li><a class="dropdown-item" href="#" id="item_addfile_include">Add Include File...</a></li>
          <li><a class="dropdown-item" href="#" id="item_addfile_link">Add Linked File...</a></li>
          <hr>
          <li><a class="dropdown-item" href="#" id="item_request_persist">Request Local Storage Permissions</a></li>
        </ul>
      </li>
      <li class="dropdown dropdown-submenu">
        <a tabindex="-1" href="#">Sync</a>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="#" id="item_github_login">Sign in to Github...</a></li>
          <li><a class="dropdown-item" href="#" id="item_github_logout">Log out</a></li>
          <hr>
          <li><a class="dropdown-item" href="#" id="item_github_import">Import Project from GitHub...</a></li>
          <li><a class="dropdown-item" href="#" id="item_github_pull">Pull Latest from Repository</a></li>
          <hr>
          <li><a class="dropdown-item" href="#" id="item_github_publish">Publish Project on GitHub...</a></li>
          <li><a class="dropdown-item" href="#" id="item_github_push">Push Changes to Repository...</a></li>
          <hr>
          <li><a class="dropdown-item" href="#" id="item_repo_delete">Delete Local Repository...</a></li>
        </ul>
      </li>
      <li class="dropdown dropdown-submenu">
        <a tabindex="-1" href="#">Download</a>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="#" id="item_download_file">Download Source File</a></li>
          <li><a class="dropdown-item" href="#" id="item_download_rom">Download ROM Image</a></li>
          <li><a class="dropdown-item" href="#" id="item_download_zip">Download Project as ZIP</a></li>
          <li><a class="dropdown-item" href="#" id="item_download_allzip">Download All Changes as ZIP</a></li>
        </ul>
      </li>
      <li class="dropdown dropdown-submenu">
        <a tabindex="-1" href="#">Share</a>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="#" id="item_share_file">Share Playable Link...</a></li>
          <li><a class="dropdown-item" href="#" id="item_record_video">Record Video...</a></li>
          <li><a class="dropdown-item" href="#" id="item_export_cassette">Make Cassette Audio...</a></li>
        </ul>
      </li>
      <li class="dropdown dropdown-submenu">
        <a tabindex="-1" href="#">Debug</a>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="#" id="item_debug_expr">Break Expression...</a></li>
        </ul>
      </li>
    </ul>
  </span>

  <!-- project selector -->
  <span id="repo_name" class="hidden-sm" style="color:#eee; font-size: small"></span>
  <select id="preset_select" name="" title="Project Select" style="max-width:20em;visibility:hidden;height:2.3em">
  </select>

  <img id="compile_spinner" src="images/spinner.gif" style="visibility:hidden;margin-left:8px;margin-right:8px;height:2em">
  <span id="toolbar"></span>
  <span class="btn_group view_group hidden-sm hidden-xs" id="speed_bar" style="display:none">
    <button id="dbg_slowest" class="btn" title="Slowest"><span class="glyphicon glyphicon-fast-backward" aria-hidden="true"></span></button>
    <button id="dbg_slower" class="btn" title="Slower"><span class="glyphicon glyphicon-backward" aria-hidden="true"></span></button>
    <span class="label"><span id="fps_label">60.00</span> fps</span>
    <button id="dbg_faster" class="btn" title="Faster"><span class="glyphicon glyphicon-forward" aria-hidden="true"></span></button>
    <button id="dbg_fastest" class="btn" title="Faster"><span class="glyphicon glyphicon-fast-forward" aria-hidden="true"></span></button>
  </span>
  <span id="verilog_bar" style="display:none">
    <span class="label"><span id="settle_label"></span> evals/clk</span>
  </span>

  <!-- BOOKS menu -->
  <span class="dropdown pull-right">
    <a class="btn dropdown-toggle hidden-xs hiddem-sm toolbarMenuButton" id="booksMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      X <!-- NOTE: booksMenuButton element used for line height! -->
    </a>
  </span>
 </div>
</div>

<div id="notebook">
  <div id="sidebar">
    <ul id="windowMenuList">
    </ul>
  </div>
  <div id="workspace">
  </div>
  <div class="emulator disable-select" id="emulator">

    <!-- replay slider -->
    <div id="replaydiv" class="replaydiv" style="display:none;color:#ccc;text-align:left">
     <div style="display:grid; grid-template-columns: 3em 3em auto 1em 3em; grid-gap: 1em">

      <!-- first row -->
      <button id="replay_back" class="btn" title="Back one frame"><span class="glyphicon glyphicon-backward" aria-hidden="true"></span></button>
      <div>
        Frame<br>
        <span id="replay_frame" style="width:3em">-</span>
      </div>
      <input type="range" min="0" max="0" value="0" class="slider" id="replayslider">
      <div>&nbsp;</div>
      <button id="replay_fwd" class="btn" title="Ahead one frame"><span class="glyphicon glyphicon-forward" aria-hidden="true"></span></button>

       <!-- second row -->
      <button id="clock_back" class="btn" title="Back one step"><span class="glyphicon glyphicon-backward" aria-hidden="true"></span></button>
      <div>
        Step<br>
        <span id="replay_clock" style="width:3em">-</span>
      </div>
      <input type="range" min="0" max="0" value="0" class="slider" id="clockslider">
      <div>&nbsp;</div>
      <button id="clock_fwd" class="btn" title="Forward one step"><span class="glyphicon glyphicon-forward" aria-hidden="true"></span></button>
     </div>
    </div>

    <!-- emulator video -->
    <div id="emuscreen">
    </div>

    <!-- for Javatari only -->
    <div id="javatari-div" style="float:center;margin:10px;display:none">
      <div id="javatari-screen" style="margin: 0 auto; box-shadow: 2px 2px 10px rgb(60, 60, 60);"></div>
      <div id="javatari-console-panel" style="margin: 0 auto; box-shadow: 2px 2px 10px rgb(60, 60, 60);"></div>
    </div>

    <!-- control instructions -->
    <div class="emucontrols-vcs emucontrols-c64 text-center small control-insns" style="display:none">
      <span class="control-def"><span class="control-key">&#x2190;&#x2191;&#x2193;&#x2192;</span> Joystick</span>
      <span class="control-def"><span class="control-key small">Space</span> Button</span>
    </div>
    <div class="emucontrols-nes emucontrols-atari7800 text-center small control-insns" style="display:none">
      <span class="control-def"><span class="control-key">&#x2190;&#x2191;&#x2193;&#x2192;</span> Joypad</span>
      <span class="control-def"><span class="control-key small">Space</span> Button A</span>
      <span class="control-def"><span class="control-key small">Shift</span> Button B</span>
      <span class="control-def"><span class="control-key small">\</span> Select</span>
      <span class="control-def"><span class="control-key small">Enter</span> Start</span>
    </div>
    <div class="emucontrols-msx emucontrols-coleco emucontrols-sms text-center small control-insns" style="display:none">
      <span class="control-def"><span class="control-key">&#x2190;&#x2191;&#x2193;&#x2192;</span> Joypad</span>
      <span class="control-def"><span class="control-key small">Space</span> Button A</span>
      <span class="control-def"><span class="control-key small">Shift</span> Button B</span>
    </div>
    <div class="emucontrols-vicdual emucontrols-galaxian emucontrols-vector text-center small control-insns" style="display:none">
      <span class="control-def"><span class="control-key">&#x2190;&#x2191;&#x2193;&#x2192;</span> Joystick</span>
      <span class="control-def"><span class="control-key small">Space</span> Button 1</span>
      <span class="control-def"><span class="control-key small">Shift</span> Button 2</span>
      <span class="control-def"><span class="control-key">\</span> Coin</span>
      <span class="control-def"><span class="control-key small">Enter</span> Start</span>
    </div>
    <div class="emucontrols-mw8080bw text-center small control-insns" style="display:none">
      <span class="control-def"><span class="control-key">&#x2190;&nbsp;&#x2192;</span> Joystick</span>
      <span class="control-def"><span class="control-key small">Space</span> Fire</span>
    </div>
    <div class="emucontrols-williams text-center small control-insns" style="display:none">
      <span class="control-def"><span class="control-key">A W S D</span> Move</span>
      <span class="control-def"><span class="control-key">&#x2190;&#x2191;&#x2193;&#x2192;</span> Fire</span>
      <span class="control-def"><span class="control-key">\</span> Coin</span>
      <span class="control-def"><span class="control-key small">Enter</span> Start</span>
      <span class="control-def"><span class="control-key small">6 7 8 9</span> Extra</span>
    </div>
    <div class="emucontrols-astrocade text-center small control-insns" style="display:none">
      <span class="control-def"><span class="control-key">&#x2190;&#x2191;&#x2193;&#x2192;</span> Joystick</span>
      <span class="control-def"><span class="control-key small">Space</span> Trigger</span>
      <span class="control-def"><span class="control-key small">Mouse X</span> Knob</span>
      <span class="control-def"><span class="control-key small" style="display:inline-block;font-family:monospace">
        U I O P<br>
        J K L /<br>
        7 8 9 X<br>
        4 5 6 -<br>
        1 2 3 ,<br>
        \ 0 . =</span> Keypad</span>
    </div>
    <div class="emucontrols-vectrex text-center small control-insns" style="display:none">
      <span class="control-def"><span class="control-key">&#x2190;&#x2191;&#x2193;&#x2192;</span> Joystick</span>
      <span class="control-def"><span class="control-key">Z X C V</span> Buttons</span>
    </div>
    <div class="emucontrols-atari8 text-center small control-insns" style="display:none">
      <span class="control-def"><span class="control-key">&#x2190;&#x2191;&#x2193;&#x2192;</span> Joystick</span>
      <span class="control-def"><span class="control-key">Z</span> Button 1</span>
      <span class="control-def"><span class="control-key">X</span> Button 2</span>
      <span class="control-def"><span class="control-key">1</span> Start</span>
    </div>

    <!-- -->
    <div id="emuoverlay" class="emuoverlay" style="display:none">
    </div>
  </div>
  <div id="mem_info" class="mem_info" style="display:none">
  </div>
  <div id="error_alert" class="alert alert-danger alert-dismissable" style="position:absolute;right:0;top:0;display:none">
    <button type="button" class="close" onclick="$('.alert').hide()" aria-hidden="true">&times;</button>
    <div id="error_alert_msg"></div>
  </div>
</div>

<div id="pleaseWaitModal" class="modal fade">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-body">
        Please wait...
        <div class="progress">
          <div class="progress-bar progress-bar-striped active" role="progressbar" id="pleaseWaitProgressBar">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div id="videoPreviewModal" class="modal fade">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Video Preview - Right-click to save</h3>
      </div>
      <div class="modal-body">
        <img id="videoPreviewImage">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<div id="embedLinkModal" class="modal fade">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Share Playable Link</h3>
      </div>
      <div class="modal-body">
        <p>Here's a direct link to a playable version of your game:</p>
        <textarea rows="4" cols="80" id="embedLinkTextarea" class="cliptext"></textarea>
        <button type="button" class="btn btn-primary" data-clipboard-target="#embedLinkTextarea">Copy Direct Link</button>
        <p>You can also embed it into an IFRAME:</p>
        <textarea rows="4" cols="80" id="embedIframeTextarea" class="cliptext"></textarea>
        <button type="button" class="btn btn-primary" data-clipboard-target="#embedIframeTextarea">Copy IFRAME Tag</button>
        <p id="embedAdviceWarnIE">Note: These links may be too long for IE/Edge browsers.</p>
        <p id="embedAdviceWarnAll">Note: These links may be too long for some browsers.</p>
      </div>
      <div class="modal-footer">
        Choose one (or none) then
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<div id="debugExprModal" class="modal fade">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Break Expression</h3>
      </div>
      <div class="modal-body">
        <p>Enter a break expression:</p>
        <p><input id="debugExprInput" size="60"></input></p>
        <p>Examples:</p>
        <pre id="debugExprExamples"></pre>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" id="debugExprSubmit">Debug</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>
<div id="importGithubModal" class="modal fade">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Import Project from GitHub</h3>
      </div>
      <div class="modal-body">
        <p>Enter the GitHub repository URL:</p>
        <p><input id="importGithubURL" size="60" placeholder="https://github.com/user/repo"></input></p>
        <p>If the project is compatible with 8bitworkshop, it should build automatically.</p>
        <p>Otherwise, some work may be required -- make sure you've selected the correct platform.</p>
        <p>Source files must be in the root folder of the repository.</p>
        <p><button type="button" class="btn btn-primary" id="importGithubButton">Import Project</button></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<div id="publishGithubModal" class="modal fade">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Publish Project on GitHub</h3>
      </div>
      <div class="modal-body">
        <p>This will migrate your existing project to a new GitHub repository.</p>
        <p>https://github.com/username/&nbsp;<input id="githubRepoName" size="35" placeholder="Enter a project name"></input></p>
        <p><input id="githubRepoDesc" size="60" placeholder="Enter a project description"></input></p>
        <p>Your repository will be <select id="githubRepoPrivate">
          <option value="public">Public</option>
          <option value="private">Private</option>
        </select></p>
        <p>License: <select id="githubRepoLicense">
          <option value="">Will decide later / all rights reserved</option>
          <option value="cc0-1.0">CC Zero (public domain, remix-friendly)</option>
          <option value="mit">MIT (must preserve notices)</option>
          <option value="cc-by-4.0">CC BY (must attribute)</option>
          <option value="cc-by-sa-4.0">CC BY-SA (must attribute, use same license)</option>
          <option value="gpl-3.0">GPL v3 (must publish source)</option>
        </select></p>
        <p><button type="button" class="btn btn-primary" id="publishGithubButton">Upload Project</button></p>
        <p>Your existing file will be moved to a new folder in the IDE.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<div id="pushGithubModal" class="modal fade">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Push Project Changes to GitHub</h3>
      </div>
      <div class="modal-body">
        <p><input id="githubCommitMsg" size="50" placeholder="Enter a commit message"></input></p>
        <p><button type="button" class="btn btn-primary" id="pushGithubButton">Push Changes</button></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- jQuery -->
<script src="jquery/jquery.min.js"></script>

<!-- Bootstrap -->
<script src="bootstrap/js/bootstrap.min.js"></script>
<script src="bootstrap/js/bootbox.all.min.js"></script>
<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="lib/bootstrap-tourist.css">

<!-- CodeMirror -->
<script src="src/codemirror/codemirror.js"></script>
<script src="codemirror/mode/clike/clike.js"></script>
<script src="codemirror/mode/z80/z80.js"></script>
<script src="codemirror/mode/verilog/verilog.js"></script>
<script src="codemirror/mode/markdown/markdown.js"></script>
<script src="codemirror/mode/javascript/javascript.js"></script>
<script src="codemirror/mode/gas/gas.js"></script>
<script src="codemirror/addon/edit/matchbrackets.js"></script>
<script src="codemirror/addon/search/search.js"></script>
<script src="codemirror/addon/search/searchcursor.js"></script>
<script src="codemirror/addon/search/jump-to-line.js"></script>
<script src="codemirror/addon/dialog/dialog.js"></script>
<script src="codemirror/addon/selection/active-line.js"></script>
<link rel="stylesheet" href="css/codemirror.css">
<link rel="stylesheet" href="codemirror/addon/dialog/dialog.css">

<!-- main IDE module -->
<script src="gen/ui.js" type="module"></script>

<script>
// submenus open on click + hover
$( ".dropdown-submenu" ).click(function(event) {
    event.stopPropagation();
    $(this).parent().siblings().removeClass('open');
    $(this).parent().toggleClass('open');
});
</script>

</body>
</html>
